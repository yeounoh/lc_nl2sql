### 4\.1\.6\. Tension Between Fuzz Testing And 100% MC/DC Testing


Fuzz testing and [100% MC/DC testing](testing.html#mcdc) are in tension with
one another.
That is to say, code tested to 100% MC/DC will tend to be
more vulnerable to problems found by fuzzing and code that performs
well during fuzz testing will tend to have (much) less than
100% MC/DC.
This is because MC/DC testing discourages [defensive code](testing.html#defcode) with
unreachable branches, but without defensive code, a fuzzer is
more likely to find a path that causes problems. MC/DC testing
seems to work well for building code that is robust during
normal use, whereas fuzz testing is good for building code that is
robust against malicious attack.



Of course, users would prefer code that is both robust in normal
use and resistant to malicious attack. The SQLite developers are
dedicated to providing that. The purpose of this section is merely
to point out that doing both at the same time is difficult.



For much of its history SQLite has been focused on 100% MC/DC testing.
Resistance to fuzzing attacks only became a concern with the introduction
of AFL in 2014\. For a while there, fuzzers were finding many problems
in SQLite. In more recent years, the testing strategy of SQLite has
evolved to place more emphasis on fuzz testing. We still maintain
100% MC/DC of the core SQLite code, but most testing CPU cycles are
now devoted to fuzzing.



While fuzz testing and 100% MC/DC testing are in tension, they
are not completely at cross\-purposes. The fact that the SQlite test
suite does test to 100% MC/DC means that when fuzzers do find problems,
those problems can be fixed quickly and with little risk of introducing
new errors.



