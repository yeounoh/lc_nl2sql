## 2\.3\. Shared\-Memory Files



When operating in [WAL mode](wal.html), all SQLite database connections associated
with the same database file need to share some memory that is used as an
index for the WAL file. In most implementations, this shared memory is
implemented by calling mmap() on a file created for this sole purpose:
the shared\-memory file. The shared\-memory file, if it exists, is located
in the same directory as the database file and has the same name as the
database file except with the 4 characters "**\-shm**" appended.
Shared memory files only exist while running in WAL mode.




The shared\-memory file contains no persistent content. The only purpose
of the shared\-memory file is to provide a block of shared memory for use
by multiple processes all accessing the same database in WAL mode.
If the [VFS](vfs.html) is able to provide an alternative method for accessing shared
memory, then that alternative method might be used rather than the
shared\-memory file. For example, if [PRAGMA locking\_mode](pragma.html#pragma_locking_mode) is set to
EXCLUSIVE (meaning that only one process is able to access the database
file) then the shared memory will be allocated from heap rather than out
of the shared\-memory file, and the shared\-memory file will never be
created.




The shared\-memory file has the same lifetime as its associated WAL file.
The shared\-memory file is created when the WAL file is created and is
deleted when the WAL file is deleted. During WAL file recovery, the
shared memory file is recreated from scratch based on the contents of
the WAL file being recovered.




