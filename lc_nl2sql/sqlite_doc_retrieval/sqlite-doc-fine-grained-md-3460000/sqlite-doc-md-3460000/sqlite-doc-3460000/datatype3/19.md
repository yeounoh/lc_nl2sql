## 7\.1\. Assigning Collating Sequences from SQL



Every column of every
table has an associated collating function. If no collating function
is explicitly defined, then the collating function defaults to BINARY.
The COLLATE clause of the [column definition](lang_createtable.html#tablecoldef) is used
to define alternative collating functions for a column.





The rules for determining which collating function to use for a
binary comparison operator (\=, \<, \>, \<\=, \>\=, !\=, IS, and
IS NOT) are as follows:



1. If either operand has an explicit collating function assignment
using the postfix [COLLATE operator](lang_expr.html#collateop), then the explicit collating function
is used for comparison, with precedence to the collating function of the
left operand.
2. If either operand is a column, then the collating function of
that column is used with precedence to the left operand.
For the purposes of the previous sentence, a column name
preceded by one or more unary "\+" operators and/or CAST operators
is still considered a column name.
3. Otherwise, the BINARY collating function is used for comparison.



An operand of a comparison is considered to have an explicit
collating function assignment (rule 1 above) 
if any subexpression of the operand uses
the postfix [COLLATE operator](lang_expr.html#collateop). Thus, if a [COLLATE operator](lang_expr.html#collateop) is used
anywhere in a comparison expression, the collating function defined
by that operator is used for string comparison regardless of what 
table columns might be a part of that expression. If two or more
[COLLATE operator](lang_expr.html#collateop) subexpressions appear anywhere in a comparison, the 
left most explicit collating function is used regardless of how deeply the
COLLATE operators are nested in the expression and regardless of
how the expression is parenthesized.




The expression "x BETWEEN y and z" is logically
equivalent to two comparisons "x \>\= y AND x \<\= z" and works with
respect to collating functions as if it were two separate comparisons.
The expression "x IN (SELECT y ...)" is handled in the same way as the
expression "x \= y" for the purposes of determining the collating sequence.
The collating sequence used for expressions of the form 
"x IN (y, z, ...)" is the collating sequence of x.
If an explicit collating sequence is required on an IN operator
it should be applied to the left operand, like this: 
"x COLLATE nocase IN (y,z, ...)".




Terms of the ORDER BY clause that is part of a [SELECT](lang_select.html)
statement may be assigned a collating sequence using the 
[COLLATE operator](lang_expr.html#collateop), in which case the specified collating function is
used for sorting.
Otherwise, if the expression sorted by an ORDER BY clause is
a column, then the collating sequence of the column is used to
determine sort order. If the expression is not a column and has no
COLLATE clause, then the BINARY collating sequence is used.



