## 4\.7\. The json\_extract() function


The json\_extract(X,P1,P2,...) extracts and returns one or more 
values from the
well\-formed JSON at X. If only a single path P1 is provided, then the
SQL datatype of the result is NULL for a JSON null, INTEGER or REAL
for a JSON numeric value, an INTEGER zero for a JSON false value,
an INTEGER one for a JSON true value, the dequoted text for a 
JSON string value, and a text representation for JSON object and array values.
If there are multiple path arguments (P1, P2, and so forth) then this
routine returns SQLite text which is a well\-formed JSON array holding
the various values.



Examples:

* json\_extract('{"a":2,"c":\[4,5,{"f":7}]}', '$')
→ '{"a":2,"c":\[4,5,{"f":7}]}'
* json\_extract('{"a":2,"c":\[4,5,{"f":7}]}', '$.c')
→ '\[4,5,{"f":7}]'
* json\_extract('{"a":2,"c":\[4,5,{"f":7}]}', '$.c\[2]')
→ '{"f":7}'
* json\_extract('{"a":2,"c":\[4,5,{"f":7}]}', '$.c\[2].f')
→ 7
* json\_extract('{"a":2,"c":\[4,5],"f":7}','$.c','$.a')
→ '\[\[4,5],2]'
* json\_extract('{"a":2,"c":\[4,5],"f":7}','$.c\[\#\-1]')
→ 5
* json\_extract('{"a":2,"c":\[4,5,{"f":7}]}', '$.x')
→ NULL
* json\_extract('{"a":2,"c":\[4,5,{"f":7}]}', '$.x', '$.a')
→ '\[null,2]'
* json\_extract('{"a":"xyz"}', '$.a')
→ 'xyz'
* json\_extract('{"a":null}', '$.a')
→ NULL




There is a subtle incompatibility between the json\_extract() function
in SQLite and the json\_extract() function in MySQL. The MySQL version
of json\_extract() always returns JSON. The SQLite version of
json\_extract() only returns JSON if there are two or more PATH arguments
(because the result is then a JSON array) or if the single PATH argument
references an array or object. In SQLite, if json\_extract() has only
a single PATH argument and that PATH references a JSON null or a string
or a numeric value, then json\_extract() returns the corresponding SQL
NULL, TEXT, INTEGER, or REAL value.



The difference between MySQL json\_extract() and SQLite json\_extract()
really only stands out when accessing individual values within the JSON
that are strings or NULLs. The following table demonstrates the difference:






| Operation | SQLite Result | MySQL Result |
| --- | --- | --- |
| json\_extract('{"a":null,"b":"xyz"}','$.a') | NULL | 'null' |
| json\_extract('{"a":null,"b":"xyz"}','$.b') | 'xyz' | '"xyz"' |



