## 4\.20\. The json\_valid() function


The json\_valid(X,Y) function return 1 if the argument X is well\-formed
JSON, or returns 0 if X is not well\-formed. The Y parameter is an integer
bitmask that defines what is meant by "well\-formed". The following bits
of Y are currently defined:



* **0x01** →
The input is text that strictly complies with canonical RFC\-8259 JSON,
without any extensions.
* **0x02** →
The input is text that is JSON with [JSON5](json1.html#json5) extensions described above.
* **0x04** →
The input is a BLOB that superficially appears to be [JSONB](json1.html#jsonbx).
* **0x08** →
The input is a BLOB that strictly conforms to the internal [JSONB](json1.html#jsonbx) format.


By combining bits, the following useful values of Y can be derived:



* **1** → X is RFC\-8259 JSON text
* **2** → X is [JSON5](json1.html#json5) text
* **4** → X is probably [JSONB](json1.html#jsonbx)
* **5** → X is RFC\-8259 JSON text or [JSONB](json1.html#jsonbx)
* **6** → X is [JSON5](json1.html#json5) text or [JSONB](json1.html#jsonbx)
 ← *This is probably the value you want*
* **8** → X is strictly conforming [JSONB](json1.html#jsonbx)
* **9** → X is RFC\-8259 or strictly conforming [JSONB](json1.html#jsonbx)
* **10** → X is JSON5 or strictly conforming [JSONB](json1.html#jsonbx)


The Y parameter is optional. If omitted, it defaults to 1, which means
that the default behavior is to return true only if the input X is
strictly conforming RFC\-8259 JSON text without any extensions. This
makes the one\-argument version of json\_valid() compatible with older
versions of SQLite, prior to the addition of support for
[JSON5](json1.html#json5) and [JSONB](json1.html#jsonbx).



The difference between 0x04 and 0x08 bits in the Y parameter is that
0x04 only examines the outer wrapper of the BLOB to see if it superficially
looks like [JSONB](json1.html#jsonbx). This is sufficient for must purposes and is very fast.
The 0x08 bit does a thorough examination of all internal details of the BLOB.
The 0x08 bit takes time that is linear in the size of the X input and is much
slower. The 0x04 bit is recommended for most purposes.



If you just want to know if a value is a plausible input to one of
the other JSON functions, a Y value of 6 is probably what you want to use.



Any Y value less than 1 or greater than 15 raises an error, for the
latest version of json\_valid(). However, future versions of json\_valid()
might be enhanced to accept flag values outside of this range, having new
meanings that we have not yet thought of.



If either X or Y inputs to json\_valid() are NULL, then the function
returns NULL.



Examples:

* json\_valid('{"x":35}')
→ 1
* json\_valid('{x:35}')
→ 0
* json\_valid('{x:35}',6\)
→ 1
* json\_valid('{"x":35')
→ 0
* json\_valid(NULL)
→ NULL





