## 3\.8\. The JSON BLOB Input Bug


If a JSON input is a BLOB that is not JSONB and that looks like
text JSON when cast to text, then it is accepted as text JSON.
This is actually a long\-standing bug in the original implementation
that the SQLite developers were unaware of. The documentation stated
that a BLOB input to a JSON function should raise an error. But in the
actual implementation, the input would be accepted as long
as the BLOB content was a valid JSON string in the text encoding of
the database.



This JSON BLOB input bug was accidentally fixed when the JSON routines
were reimplemented for the 3\.45\.0 release (2024\-01\-15\).
That caused breakage in applications that had come to depend on the old
behavior. (In defense of those applications: they were often lured into
using BLOBs as JSON by the [readfile()](cli.html#fileio) SQL function
available in the [CLI](cli.html). Readfile() was used to read JSON from disk files,
but readfile() returns a BLOB. And that worked for them, so why not just
do it?)



For backwards compatibility,
the (formerly incorrect) legacy behavior of interpreting BLOBs as text JSON
if no other interpretation works
is hereby documented and is be officially supported in 
version 3\.45\.1 (2024\-01\-30\) and all subsequent releases.



