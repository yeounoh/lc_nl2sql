# 2\. Operation


TH3 is a test program generator. The output of TH3 is a program
implemented in C\-code and intended to be
linked against the SQLite library under test. The generated test
program is compiled and run on the target platform in order to verify
correct operation of SQLite on that platform.


The inputs to TH3 are test modules written in C or SQL and
small configuration
files that determine how to initialize SQLite. The
TH3 package includes 1,444 test
modules and more than 47 configurations (as of 2018\-05\-19\).
New modules and configurations
can be added to customize TH3 for specialized applications.
Each time TH3 is run, it reads
a subset of the available test modules and configuration files to generate
a custom C program that performs all of the specified tests under all
specified configurations. A complete test of SQLite normally involves running
TH3 multiple times to generate multiple test programs covering different
aspects of SQLite's operation, then linking all test programs against
a common SQLite library and running them separately on the target platform.



There are no arbitrary limits in TH3\. One could generate a
single test program that contained all test modules and all configuration files.
However, such a test program might be too large to deploy on embedded
platforms. (As of 2018\-05\-19, a full\-up TH3 test is over 850,000 lines and
58MB of C code.) TH3 provides the ability to break the library of test
modules up into smaller, more easily digested pieces.


Each individual test module might contain dozens, hundreds, or thousands
of separate tests. The test modules can be written in C or as scripts of
SQL or a mixture of the two. About two\-thirds of the existing test modules are
written in pure SQL with the remainder either in pure C or a combination 
of C and SQL.



Each test module file contains a header which describes the circumstances
under which the test is valid. For a particular configuration, only those
modules that are compatible with the configuration are run. 


