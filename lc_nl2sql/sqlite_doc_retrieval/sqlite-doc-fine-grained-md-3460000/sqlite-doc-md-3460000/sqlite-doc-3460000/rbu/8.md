### 2\.2\.4\. Automatically Generating RBU Updates with sqldiff



 As of SQLite [version 3\.9\.0](releaselog/3_9_0.html) (2015\-10\-14\), 
 the [sqldiff](sqldiff.html) utility is able to generate
 RBU databases representing the difference between two databases with
 identical schemas. For example, the following command:




```
sqldiff --rbu t1.db t2.db

```


 Outputs an SQL script to create an RBU database which, if used to update
 database t1\.db, patches it so that its contents are identical to that of
 database t2\.db.




 By default, sqldiff attempts to process all non\-virtual tables within
 the two databases provided to it. If any table appears in one database
 but not the other, or if any table has a slightly different schema in
 one database it is an error. The "\-\-table" option may be useful if this
 causes a problem
 



 Virtual tables are ignored by default by sqldiff. However, it is possible 
 to explicitly create an RBU data\_% table for a virtual table that features
 a rowid that functions like a primary key using a command such as:




```
sqldiff --rbu --table <virtual-table-name> t1.db t2.db

```


 Unfortunately, even though virtual tables are ignored by default, any
 [underlying database tables](fts3.html#*shadowtab) that they create in order to
 store data within the database are not, and [sqldiff](sqldiff.html) will include add these
 to any RBU database. For this reason, users attempting to use sqldiff to
 create RBU updates to apply to target databases with one or more virtual
 tables will likely have to run sqldiff using the \-\-table option separately
 for each table to update in the target database.



