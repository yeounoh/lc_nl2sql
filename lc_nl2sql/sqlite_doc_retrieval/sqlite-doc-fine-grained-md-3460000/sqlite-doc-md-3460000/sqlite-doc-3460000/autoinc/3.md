# 3\. The AUTOINCREMENT Keyword



If a column has the type INTEGER PRIMARY KEY AUTOINCREMENT then a slightly
different ROWID selection algorithm is used. 
The ROWID chosen for the new row is at least one larger than the largest ROWID
that has ever before existed in that same table. If the table has never
before contained any data, then a ROWID of 1 is used. If the largest possible
ROWID has previously been inserted, then
new INSERTs are not allowed and any attempt to insert a new row will
fail with an SQLITE\_FULL error. 
Only ROWID values from previous transactions that
were committed are considered. ROWID values that were rolled back
are ignored and can be reused.




SQLite keeps track of the largest ROWID
using an [internal table](fileformat2.html#intschema) named "[sqlite\_sequence](fileformat2.html#seqtab)".
The sqlite\_sequence table is created automatically, if it does not
already exist, whenever a normal table that contains an
AUTOINCREMENT column is created. A row in the sqlite\_sequence table
corresponding to the table with the AUTOINCREMENT column is created the
first time the AUTOINCREMENT table is written and updated on any
subsequent writes that increase the maximum rowid.
The content of the sqlite\_sequence table
can be modified using ordinary UPDATE, INSERT, and DELETE statements.
But making modifications to this table will likely perturb the AUTOINCREMENT
key generation algorithm. Make sure you know what you are doing before
you undertake such changes.
The sqlite\_sequence table does not track ROWID changes associated with
UPDATE statement, only INSERT statements.




The behavior implemented by the AUTOINCREMENT keyword is subtly different
from the default behavior. With AUTOINCREMENT, rows with automatically
selected ROWIDs are guaranteed to have ROWIDs that have never been used
before by the same table in the same database. And the automatically generated
ROWIDs are guaranteed to be monotonically increasing. These are important
properties in certain applications. But if your application does not
need these properties, you should probably stay with the default behavior
since the use of AUTOINCREMENT requires additional work to be done
as each row is inserted and thus causes INSERTs to run a little slower.



Note that "monotonically increasing" does not imply that the ROWID always
increases by exactly one. One is the usual increment. However, if an
insert fails due to (for example) a uniqueness constraint, the ROWID of
the failed insertion attempt might not be reused on subsequent inserts,
resulting in gaps in the ROWID sequence. AUTOINCREMENT guarantees that
automatically chosen ROWIDs will be increasing but not that they will be
sequential.


Because AUTOINCREMENT keyword changes the behavior of the ROWID selection
algorithm, AUTOINCREMENT is not allowed on [WITHOUT ROWID](withoutrowid.html) tables or on any
table column other than INTEGER PRIMARY KEY. Any attempt to use 
AUTOINCREMENT on a [WITHOUT ROWID](withoutrowid.html) table or on a column other than the
INTEGER PRIMARY KEY column results in an error.


*This page last modified on [2024\-02\-22 16:13:38](https://sqlite.org/docsrc/honeypot) UTC* 


