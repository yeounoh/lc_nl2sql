## SQLite Release 3\.24\.0 On 2018\-06\-04

1. Add support for PostgreSQL\-style [UPSERT](../lang_upsert.html).
- Add support for [auxiliary columns in r\-tree tables](../rtree.html#auxcol).
- Add C\-language APIs for discovering SQL keywords used by
 SQLite: [sqlite3\_keyword\_count()](../c3ref/keyword_check.html), [sqlite3\_keyword\_name()](../c3ref/keyword_check.html), and
 [sqlite3\_keyword\_check()](../c3ref/keyword_check.html).
- Add C\-language APIs for dynamic strings based on the
 [sqlite3\_str](../c3ref/str.html) object.
- Enhance [ALTER TABLE](../lang_altertable.html) so that it recognizes "true" and "false" as
 valid arguments to DEFAULT.
- Add the sorter\-reference optimization as a compile\-time option.
 Only available if compiled with SQLITE\_ENABLE\_SORTER\_REFERENCES.
- Improve the format of the [EXPLAIN QUERY PLAN](../eqp.html) raw output, so that
 it gives better information about the query plan and about the
 relationships between the various components of the plan.
- Added the [SQLITE\_DBCONFIG\_RESET\_DATABASE](../c3ref/c_dbconfig_defensive.html#sqlitedbconfigresetdatabase) option to the
 [sqlite3\_db\_config()](../c3ref/db_config.html) API.
**[CLI](../cli.html) Enhancements:**
- Automatically intercepts the raw [EXPLAIN QUERY PLAN](../eqp.html)
 output and reformats it into an ASCII\-art graph.
- Lines that begin with "\#" and that are not in the middle of an
 SQL statement are interpreted as comments.
- Added the \-\-append option to the ".backup" command.
- Added the ".dbconfig" command.
**Performance:**
- [UPDATE](../lang_update.html) avoids unnecessary low\-level disk writes when the contents
 of the database file do not actually change.
 For example, "UPDATE t1 SET x\=25 WHERE y\=?" generates no extra
 disk I/O if the value in column x is already 25\. Similarly,
 when doing [UPDATE](../lang_update.html) on records that span multiple pages, only
 the subset of pages that actually change are written to disk.
 This is a low\-level performance optimization only and does not
 affect the behavior of TRIGGERs or other higher level SQL
 structures.
- Queries that use ORDER BY and LIMIT now try to avoid computing
 rows that cannot possibly come in under the LIMIT. This can greatly
 improve performance of ORDER BY LIMIT queries, especially when the
 LIMIT is small relative to the number of unrestricted output rows.
- The [OR optimization](../optoverview.html#or_opt) is allowed to proceed
 even if the OR expression has also been converted into an IN
 expression. Uses of the OR optimization are now also
 [more clearly shown](../eqp.html#or-opt) in the [EXPLAIN QUERY PLAN](../eqp.html) output.
- The query planner is more aggressive about using
 [automatic indexes](../optoverview.html#autoindex) for views and subqueries for which it is
 not possible to create a persistent index.
- Make use of the one\-pass UPDATE and DELETE query plans in the
 [R\-Tree extension](../rtree.html) where appropriate.
- Performance improvements in the LEMON\-generated parser.
**Bug fixes:**
- For the right\-hand table of a LEFT JOIN, compute the values
 of expressions directly rather than loading precomputed values
 out of an [expression index](../expridx.html) as the expression index might
 not contain the correct value. Ticket
 [7fa8049685b50b5aeb0c2](https://sqlite.org/src/info/7fa8049685b50b5aeb0c2)- Do not attempt to use terms from the WHERE clause to enable
 indexed lookup of the right\-hand table of a LEFT JOIN. Ticket
 [4ba5abf65c5b0f9a96a7a](https://sqlite.org/src/info/4ba5abf65c5b0f9a96a7a)- Fix a memory leak that can occur following a failure to open error
 in the [CSV virtual table](../csv.html)- Fix a long\-standing problem wherein a corrupt schema on the
 [sqlite\_sequence](../fileformat2.html#seqtab) table used by [AUTOINCREMENT](../autoinc.html) can lead to
 a crash. Ticket
 [d8dc2b3a58cd5dc2918a1](https://www.sqlite.org/src/info/d8dc2b3a58cd5dc29)- Fix the [json\_each()](../json1.html#jeach) function so that it returns
 valid results on its "fullkey" column when the input is a simple value
 rather than an array or object.
**Hashes:**
- SQLITE\_SOURCE\_ID: "2018\-06\-04 19:24:41 c7ee0833225bfd8c5ec2f9bf62b97c4e04d03bd9566366d5221ac8fb199a87ca"
- SHA3\-256 for sqlite3\.c: 0d384704e1c66026228336d1e91771d295bf688c9c44c7a44f25a4c16c26ab3c



A [complete list of SQLite releases](../changes.html)
 in a single page and a [chronology](../chronology.html) are both also available.
 A detailed history of every
 check\-in is available at
 [SQLite version control site](https://www.sqlite.org/src/timeline).


