## SQLite Release 3\.8\.5 On 2014\-06\-04

1. Added support for [partial sorting by index](../queryplanner.html#partialsort).
- Enhance the query planner so that it always prefers an index that uses a superset of
 WHERE clause terms relative to some other index.
- Improvements to the [automerge command](../fts3.html#*fts4automergecmd) of [FTS4](../fts3.html#fts4) to better control the index size
 for a full\-text index that is subject to a large number of updates.
- Added the [sqlite3\_rtree\_query\_callback()](../rtree.html#xquery) interface to [R\-Tree extension](../rtree.html)- Added new [URI query parameters](../uri.html#coreqp) "nolock" and "immutable".
- Use less memory by not remembering CHECK constraints on read\-only
 database connections.
- Enable the [OR optimization](../queryplanner.html#or_in_where) for [WITHOUT ROWID](../withoutrowid.html) tables.
- Render expressions of the form "x IN (?)" (with a single value in
 the list on the right\-hand side of the IN operator) as if they where "x\=\=?",
 Similarly optimize "x NOT IN (?)"
- Add the ".system" and ".once" commands to the [command\-line shell](../cli.html).
- Added the [SQLITE\_IOCAP\_IMMUTABLE](../c3ref/c_iocap_atomic.html) bit to the set of bits that can be returned by
 the xDeviceCharacteristics method of a [VFS](../vfs.html).
- Added the [SQLITE\_TESTCTRL\_BYTEORDER](../c3ref/c_testctrl_always.html) test control.
**Bug Fixes:**
- OFFSET clause ignored on queries without a FROM clause.
 Ticket [07d6a0453d](https://www.sqlite.org/src/info/07d6a0453d)- Assertion fault on queries involving expressions of the form
 "x IN (?)". Ticket [e39d032577](https://www.sqlite.org/src/info/e39d032577).
- Incorrect column datatype reported.
 Ticket [a8a0d2996a](https://www.sqlite.org/src/info/a8a0d2996a)- Duplicate row returned on a query against a table with more than
 16 indices, each on a separate column, and all used via OR\-connected constraints.
 Ticket [10fb063b11](https://www.sqlite.org/src/info/10fb063b11)- Partial index causes assertion fault on UPDATE OR REPLACE.
 Ticket [2ea3e9fe63](https://www.sqlite.org/src/info/2ea3e9fe63)- Crash when calling undocumented SQL function sqlite\_rename\_parent()
 with NULL parameters.
 Ticket [264b970c43](https://www.sqlite.org/src/info/264b970c4379fd)- ORDER BY ignored if the query has an identical GROUP BY.
 Ticket [b75a9ca6b0](https://www.sqlite.org/src/info/b75a9ca6b0499)- The group\_concat(x,'') SQL function returns NULL instead of an empty string
 when all inputs are empty strings.
 Ticket [55746f9e65](https://www.sqlite.org/src/info/55746f9e65f85)- Fix a bug in the VDBE code generator that caused crashes when
 doing an INSERT INTO ... SELECT statement where the number of columns
 being inserted is larger than the number of columns in the destination
 table.
 Ticket [e9654505cfd](https://www.sqlite.org/src/info/e9654505cfda9)- Fix a problem in CSV import in the [command\-line shell](../cli.html)
 where if the leftmost field of the first row
 in the CSV file was both zero bytes in size and unquoted no data would
 be imported.
- Fix a problem in FTS4 where the left\-most column that contained
 the [notindexed column](../fts3.html#fts4notindexed) name as a prefix
 was not indexed rather than the column whose name matched exactly.
- Fix the [sqlite3\_db\_readonly()](../c3ref/db_readonly.html) interface so that it returns true if
 the database is read\-only due to the file format write version number
 being too large.

- SQLITE\_SOURCE\_ID: "2014\-06\-04 14:06:34 b1ed4f2a34ba66c29b130f8d13e9092758019212"
- SHA1 for sqlite3\.c: 7bc194957238c61b1a47f301270286be5bc5208c



A [complete list of SQLite releases](../changes.html)
 in a single page and a [chronology](../chronology.html) are both also available.
 A detailed history of every
 check\-in is available at
 [SQLite version control site](https://www.sqlite.org/src/timeline).


