## SQLite Release 3\.8\.0\.2 On 2013\-09\-03

1. Add support for [partial indexes](../partialindex.html)
2. Cut\-over to the [next generation query planner](../queryplanner-ng.html) for faster and better query plans.
- The [EXPLAIN QUERY PLAN](../eqp.html) output no longer shows an estimate of the number of
 rows generated by each loop in a join.
- Added the [FTS4 notindexed option](../fts3.html#fts4notindexed), allowing non\-indexed columns in an FTS4 table.
- Added the [SQLITE\_STMTSTATUS\_VM\_STEP](../c3ref/c_stmtstatus_counter.html#sqlitestmtstatusvmstep) option to [sqlite3\_stmt\_status()](../c3ref/stmt_status.html).
- Added the [cache\_spill pragma](../pragma.html#pragma_cache_spill).
- Added the [query\_only pragma](../pragma.html#pragma_query_only).
- Added the [defer\_foreign\_keys pragma](../pragma.html#pragma_defer_foreign_keys) and the
 [sqlite3\_db\_status](../c3ref/db_status.html)(db, [SQLITE\_DBSTATUS\_DEFERRED\_FKS](../c3ref/c_dbstatus_options.html#sqlitedbstatusdeferredfks),...) C\-language interface.
- Added the "percentile()" function as a [loadable extension](../loadext.html) in the ext/misc
 subdirectory of the source tree.
- Added the [SQLITE\_ALLOW\_URI\_AUTHORITY](../compile.html#allow_uri_authority) compile\-time option.
- Add the [sqlite3\_cancel\_auto\_extension(X)](../c3ref/cancel_auto_extension.html) interface.
- A running SELECT statement that lacks a FROM clause (or any other statement that
 never reads or writes from any database file) will not prevent a read
 transaction from closing.
- Add the [SQLITE\_DEFAULT\_AUTOMATIC\_INDEX](../compile.html#default_automatic_index) compile\-time option. Setting this option
 to 0 disables automatic indices by default.
- Issue an [SQLITE\_WARNING\_AUTOINDEX](../rescode.html#warning_autoindex) warning on the [SQLITE\_CONFIG\_LOG](../c3ref/c_config_covering_index_scan.html#sqliteconfiglog) whenever
 the query planner uses an automatic index.
- Added the [SQLITE\_FTS3\_MAX\_EXPR\_DEPTH](../compile.html#fts3_max_expr_depth) compile\-time option.
- Added an optional 5th parameter defining the collating sequence to the
 next\_char() extension SQL function.
- The [SQLITE\_BUSY\_SNAPSHOT](../rescode.html#busy_snapshot) extended error code is returned in WAL mode when
 a read transaction cannot be upgraded to a write transaction because the read is
 on an older snapshot.
- Enhancements to the sqlite3\_analyzer utility program to provide size
 information separately for each individual index of a table, in addition to
 the aggregate size.
- Allow read transactions to be freely opened and closed by SQL statements run
 from within the implementation of [application\-defined SQL functions](../appfunc.html) if the
 function is called by a SELECT statement that does not access any database table.
- Disable the use of posix\_fallocate() on all (unix) systems unless the
 HAVE\_POSIX\_FALLOCATE compile\-time option is used.
- Update the ".import" command in the [command\-line shell](../cli.html) to support multi\-line
 fields and correct RFC\-4180 quoting and to issue warning and/or error messages
 if the input text is not strictly RFC\-4180 compliant.
- Bug fix: In the [unicode61](../fts3.html#unicode61) tokenizer of [FTS4](../fts3.html#fts4), treat all private code points
 as identifier symbols.
- Bug fix: Bare identifiers in ORDER BY clauses bind more tightly to output column
 names, but identifiers in expressions bind more tightly to input column names.
 Identifiers in GROUP BY clauses always prefer output column names, however.
- Bug fixes: Multiple problems in the legacy query optimizer were fixed by the
 move to [NGQP](../queryplanner-ng.html).


1. Fix an off\-by\-one error that caused quoted empty string at the end of a
CRNL\-terminated line of CSV input to be misread by the command\-line shell.
- Fix a query planner bug involving a LEFT JOIN with a BETWEEN or LIKE/GLOB
constraint and then another INNER JOIN to the right that involves an OR constraint.
- Fix a query planner bug that could result in a segfault when querying tables
with a UNIQUE or PRIMARY KEY constraint with more than four columns.


1. Fix a bug in the optimization that attempts to omit unused LEFT JOINs

- SQLITE\_SOURCE\_ID:
 "2013\-09\-03 17:11:13 7dd4968f235d6e1ca9547cda9cf3bd570e1609ef"
- SHA1 for sqlite3\.c: 6cf0c7b46975a87a0dc3fba69c229a7de61b0c21



A [complete list of SQLite releases](../changes.html)
 in a single page and a [chronology](../chronology.html) are both also available.
 A detailed history of every
 check\-in is available at
 [SQLite version control site](https://www.sqlite.org/src/timeline).


