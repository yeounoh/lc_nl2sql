## 8\.4\. The edit() SQL function


The CLI has another built\-in SQL function named edit(). Edit() takes
one or two arguments. The first argument is a value \- often a large
multi\-line string to be edited. The second argument is the invocation
for a text editor. (It may include options to affect the editor's
behavior.) If the second argument is omitted, the VISUAL environment
variable is used. The edit() function writes its first argument into a
temporary file, invokes the editor on the temporary file, rereads the file
back into memory after the editor is done, then returns the edited text.



The edit() function can be used to make changes to large text
values. For example:




```
sqlite> UPDATE docs SET body=edit(body) WHERE name='report-15';

```

In this example, the content of the docs.body field for the entry where
docs.name is "report\-15" will be sent to the editor. After the editor returns,
the result will be written back into the docs.body field.



The default operation of edit() is to invoke a text editor. But by using
an alternative edit program in the second argument, you can also get it to edit
images or other non\-text resources. For example, if you want to modify a JPEG
image that happens to be stored in a field of a table, you could run:




```
sqlite> UPDATE pics SET img=edit(img,'gimp') WHERE id='pic-1542';

```

The edit program can also be used as a viewer, by simply ignoring the
return value. For example, to merely look at the image above, you might run:




```
sqlite> SELECT length(edit(img,'gimp')) WHERE id='pic-1542';

```


