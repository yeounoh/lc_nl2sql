## 2\.1\. Changesets and Patchsets


 The sessions module revolves around creating and manipulating
changesets. A changeset is a blob of data that encodes a series of
changes to a database. Each change in a changeset is one of the
following:



* An **INSERT**. An INSERT change contains a single row to add to
 a database table. The payload of the INSERT change consists of the
 values for each field of the new row.
* A **DELETE**. A DELETE change represents a row, identified by
 its primary key values, to remove from a database table. The payload
 of a DELETE change consists of the values for all fields of the
 deleted row.
* An **UPDATE**. An UPDATE change represents the modification of
 one or more non\-PRIMARY KEY fields of a single row within a database
 table, identified by its PRIMARY KEY fields. The payload for an UPDATE
 change consists of:
 


	+ The PRIMARY KEY values identifying the modified row,
	+ The new values for each modified field of the row, and
	+ The original values for each modified field of the row. An UPDATE change does not contain any information regarding
 non\-PRIMARY KEY fields that are not modified by the change. It is not
 possible for an UPDATE change to specify modifications to PRIMARY
 KEY fields.


 A single changeset may contain changes that apply to more than one
database table. For each table that the changeset includes at least one change
for, it also encodes the following data:



* The name of the database table,
* The number of columns the table has, and
* Which of those columns are PRIMARY KEY columns.


 Changesets may only be applied to databases that contain tables
matching the above three criteria as stored in the changeset.



 A patchset is similar to a changeset. It is slightly more compact than
a changeset, but provides more limited conflict detection and resolution
options (see the next section for details). The differences between a
patchset and a changeset are that:



* For a **DELETE** change, the payload consists of the PRIMARY KEY
 fields only. The original values of other fields are not stored as
 part of a patchset.
* For an **UPDATE** change, the payload consists of the PRIMARY KEY
 fields and the new values of modified fields only. The original
 values of modified fields are not stored as part of a patchset.


