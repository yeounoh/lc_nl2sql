## 2\.2\. Conflicts


 When a changeset or patchset is applied to a database, an attempt is
made to insert a new row for each INSERT change, remove a row for each
DELETE change and modify a row for each UPDATE change. If the target
database is in the same state as the original database that the changeset
was recorded on, this is a simple matter. However, if the contents of the
target database is not in exactly this state, conflicts can occur when
applying the changeset or patchset.



When processing an **INSERT** change, the following conflicts can
occur:



* The target database may already contain a row with the same PRIMARY
 KEY values as specified by the INSERT change.
* Some other database constraint, for example a UNIQUE or CHECK
 constraint, may be violated when the new row is inserted.


When processing a **DELETE** change, the following conflicts may be
detected:



* The target database may contain no row with the specified PRIMARY
 KEY values to delete.
* The target database may contain a row with the specified PRIMARY
 KEY values, but the other fields may contain values that do not
 match those stored as part of the changeset. This type of conflict
 is not detected when using a patchset.


When processing an **UPDATE** change, the following conflicts may be
detected:



* The target database may contain no row with the specified PRIMARY
 KEY values to modify.
* The target database may contain a row with the specified PRIMARY
 KEY values, but the current values of the fields that will be modified
 by the change may not match the original values stored within the
 changeset. This type of conflict is not detected when using a patchset.
* Some other database constraint, for example a UNIQUE or CHECK
 constraint, may be violated when the row is updated.


 Depending on the type of conflict, a sessions application has a variety
of configurable options for dealing with conflicts, ranging from omitting the
conflicting change, aborting the entire changeset application or applying
the change despite the conflict. For details, refer to the documentation for
the [sqlite3changeset\_apply()](session/sqlite3changeset_apply.html) API.



