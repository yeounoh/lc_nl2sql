# 1\. How To Use Indexes On Expressions



Use a [CREATE INDEX](lang_createindex.html) statement to create a new index on one or more
expressions just like you would to create an index on columns. The only
difference is that expressions are listed as the elements to be indexed
rather than column names.




The SQLite query planner will consider using an index on an expression
when the expression that is indexed appears in the WHERE clause or in
the ORDER BY clause of a query, *exactly* as it is written in the
CREATE INDEX statement. The query planner does not do algebra. In order
to match WHERE clause constraints and ORDER BY terms to indexes, SQLite
requires that the expressions be the same, except for minor syntactic
differences such as white\-space changes. So if you have:




```
CREATE TABLE t2(x,y,z);
CREATE INDEX t2xy ON t2(x+y);

```


And then you run the query:




```
SELECT * FROM t2 WHERE y+x=22;

```


Then the index will not be used because 
the expression on the CREATE INDEX
statement (x\+y) is not the same as the expression as it appears in the 
query (y\+x). The two expressions might be mathematically equivalent, but
the SQLite query planner insists that they be the same, not merely
equivalent. Consider rewriting the query thusly:




```
SELECT * FROM t2 WHERE x+y=22;

```


This second query will likely use the index because now the expression
in the WHERE clause (x\+y) matches the expression in the index exactly.




