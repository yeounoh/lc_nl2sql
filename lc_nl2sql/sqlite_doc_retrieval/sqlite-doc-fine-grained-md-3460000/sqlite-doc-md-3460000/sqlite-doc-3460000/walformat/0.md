




WAL\-mode File Format




[![SQLite](images/sqlite370_banner.gif)](index.html)


Small. Fast. Reliable.  
Choose any three.


* [Home](index.html)* [Menu](javascript:void(0))* [About](about.html)* [Documentation](docs.html)* [Download](download.html)* [License](copyright.html)* [Support](support.html)* [Purchase](prosupport.html)* [Search](javascript:void(0))




* [About](about.html)* [Documentation](docs.html)* [Download](download.html)* [Support](support.html)* [Purchase](prosupport.html)






Search Documentation
Search Changelog










WAL\-mode File Format


â–º
Table Of Contents
[1\. Files On Disk](#files_on_disk)
[1\.1\. The Main Database File](#the_main_database_file)
[1\.2\. The Write\-Ahead\-Log or "\-wal" File](#the_write_ahead_log_or_wal_file)
[1\.3\. The Wal\-Index or "\-shm" file](#the_wal_index_or_shm_file)
[1\.4\. File Lifecycles](#file_lifecycles)
[1\.5\. Variations](#variations)
[2\. The WAL\-Index File Format](#the_wal_index_file_format)
[2\.1\. The WAL\-Index Header](#the_wal_index_header)
[2\.1\.1\. The mxFrame field](#the_mxframe_field)
[2\.1\.2\. The nBackfill field](#the_nbackfill_field)
[2\.1\.3\. WAL Locks](#wal_locks)
[2\.2\. WAL\-Index Hash Tables](#wal_index_hash_tables)
[2\.3\. Locking Matrix](#locking_matrix)
[2\.3\.1\. How the various locks are used](#how_the_various_locks_are_used)
[2\.3\.2\. Operations that require locks and which locks those operations use](#operations_that_require_locks_and_which_locks_those_operations_use)
[3\. Recovery](#recovery)




This document describes low\-level details on how [WAL mode](wal.html) is
implemented on unix and windows.



The separate [file format](fileformat2.html) description provides details on the
structure of a database file and of the write\-head log file used in
[WAL mode](wal.html). But details of the locking protocol and of the format
of the WAL\-index are deliberately omitted since those details
are left to discretion of individual [VFS](vfs.html) implementations. This
document fills in those missing details for the unix and windows [VFSes](vfs.html).



For completeness, some of the higher level formatting information
contains in the [file format](fileformat2.html) document and elsewhere is replicated here,
when it pertains to WAL mode processing.



