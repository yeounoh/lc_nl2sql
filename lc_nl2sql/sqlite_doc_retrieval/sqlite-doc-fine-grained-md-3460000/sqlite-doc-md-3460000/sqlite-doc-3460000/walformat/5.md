## 1\.4\. File Lifecycles


When a WAL mode database is in active use, all three of the above
files usually exist. Except, the Wal\-Index file is omitted if
[exclusive locking mode](pragma.html#pragma_locking_mode) is set.



If the last client using the database shuts down cleanly by
calling [sqlite3\_close()](c3ref/close.html), then a [checkpoint](wal.html#ckpt) is run automatically
in order to transfer all information from the wal file
over into the main database, and both the shm file
and the wal file are unlinked. Thus, when the database is not in
use by any client, it is usually the case that only the main
database file exists on disk.
However, if the last client did not call [sqlite3\_close()](c3ref/close.html) before it
shut down, or if the last client to disconnect was a read\-only client,
then the final cleanup operation does not occur and the
shm and wal files may still exist on disk even when the database is
not in use.



