## 2\.1\. The WAL\-Index Header


The first 136 bytes of the shm file are a header. The shm header has
three main divisions as follows:




*WAL\-Index Header Divisions*  



| Bytes | Description |
| --- | --- |
| 0\..47 | First copy of the WAL Index Information |
| 48\..95 | Second copy of the WAL Index Information |
| 96\..135 | Checkpoint Information and Locks |



Individual fields of the shm header, except for the
salt values copied from the WAL header, are unsigned integers
in the native byte\-order of the host machine. The salt values
are exact copies from the WAL header and are in whatever byte
order is used by the WAL file.
The size of integers may be 8, 16, 32, or 64 bits.
A detailed breakout of the individual fields of the shm header
follows:




*WAL\-Index Header Details*  



| Bytes | Name | Meaning |
| --- | --- | --- |
| 0\..3 | iVersion | The WAL\-index format version number. Always 3007000\. |
| 4\..7 |  | Unused padding space. Must be zero. |
| 8\..11 | iChange | Unsigned integer counter, incremented with each transaction |
| 12 | isInit | The "isInit" flag. 1 when the shm file has been initialized. |
| 13 | bigEndCksum | True if the WAL file uses big\-ending checksums. 0 if the WAL  uses little\-endian checksums. |
| 14\..15 | szPage | The database page size in bytes, or 1 if the page size is 65536\. |
| 16\..19 | mxFrame | Number of valid and committed frames in the WAL file. |
| 20\..23 | nPage | Size of the database file in pages. |
| 24\..31 | aFrameCksum | Checksum of the last frame in the WAL file. |
| 32\..39 | aSalt | The two salt value copied from the WAL file header. These values are in the byte\-order of the WAL file, which might be different from the native byte\-order of the machine. |
| 40\..47 | aCksum | A checksum over bytes 0 through 39 of this header. |
| 48\..95 |  | A copy of bytes 0 through 47 of this header. |
| 96\..99 | nBackfill | Number of WAL frames that have already been backfilled into the database  by prior checkpoints |
| 100\..119 | read\-mark\[0\..4] | Five "read marks". Each read mark is a 32\-bit unsigned integer (4 bytes). |
| 120\..127 |  | Unused space set aside for 8 file locks. |
| 128\..132 | nBackfillAttempted | Number of WAL frames that have attempted to be backfilled but which might  not have been backfilled successfully. |
| 132\..136 |  | Unused space reserved for further expansion. |




