### 2\.1\.2\. The nBackfill field


The 32\-bit unsigned integer at offset 128 in the WAL\-index header
is called the "nBackfill".
this field holds the number of frames in the WAL file which
have been copied back into the main database.



The nBackfill number is never greater than [mxFrame](walformat.html#mxframe).
When nBackfill equals [mxFrame](walformat.html#mxframe), that means that the WAL content
has been completely written back into the database and it is
ok to [reset the WAL](fileformat2.html#walreset) if there are no locks held on any of WAL\_READ\_LOCK(N)
for N\>0\.



The nBackfill can only be increased while holding the
WAL\_CKPT\_LOCK. However, nBackfill is changed to zero
during a [WAL reset](fileformat2.html#walreset), and this happens while holding
the WAL\_WRITE\_LOCK.




