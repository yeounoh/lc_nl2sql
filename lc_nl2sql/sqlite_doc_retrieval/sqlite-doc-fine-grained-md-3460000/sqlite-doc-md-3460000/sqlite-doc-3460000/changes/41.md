### 2020\-12\-01 (3\.34\.0\)

1. Added the [sqlite3\_txn\_state()](c3ref/txn_state.html) interface for reporting on the current
 transaction state of the database connection.
- Enhance [recursive common table expressions](lang_with.html#recursivecte) to support two or more
 recursive terms as is done by SQL Server, since this helps make
 [queries against graphs](lang_with.html#rcex3) easier to write and faster to execute.
- Improved error messages on [CHECK constraint](lang_createtable.html#ckconst) failures.
- [CLI](cli.html) enhancements:
	1. The [.read](cli.html#dotread) dot\-command now accepts a pipeline in addition to
	 a filename.
	 - Added options \-\-data\-only and \-\-nosys to the [.dump](cli.html#dump) dot\-command.
	 - Added the \-\-nosys option to the [.schema](cli.html#dschema) dot\-command.
	 - Table name quoting works correctly for the [.import](cli.html#csv) dot\-command.
	 - The [generate\_series(START,END,STEP)](series.html) table\-valued function
	 extension is now built into the CLI.
	 - The [.databases](cli.html#dotdatabases) dot\-command now shows the status of each database
	 file as determined by [sqlite3\_db\_readonly()](c3ref/db_readonly.html) and
	 [sqlite3\_txn\_state()](c3ref/txn_state.html).
	 - Added the \-\-tabs command\-line option that sets
	 [.mode tabs](cli.html#dotmode).
	 - The \-\-init option reports an error if the file named as its argument
	 cannot be opened. The \-\-init option also now honors the \-\-bail option.- Query planner improvements:
	1. Improved estimates for the cost of running a DISTINCT operator.
	 - When doing an UPDATE or DELETE using a multi\-column index where
	 only a few of the earlier columns of the index are useful for the
	 index lookup, postpone doing the main table seek until after all
	 WHERE clause constraints have been evaluated, in case those
	 constraints can be covered by unused later terms of the index,
	 thus avoiding unnecessary main table seeks.
	 - The new OP\_SeekScan opcode is used to improve performance of
	 multi\-column index look\-ups when later columns are constrained
	 by an IN operator.- The [BEGIN IMMEDIATE](lang_transaction.html#immediate) and [BEGIN EXCLUSIVE](lang_transaction.html#immediate) commands now work even
 if one or more attached database files are read\-only.
- Enhanced [FTS5](fts5.html) to support [trigram indexes](fts5.html#trigramidx).
- Improved performance of [WAL mode](wal.html) locking primitives in cases where
 there are hundreds of connections all accessing the same database file
 at once.
- Enhanced the [carray() table\-valued function](carray.html) to include a single\-argument
 form that is bound using the auxiliary [sqlite3\_carray\_bind()](carray.html#onearg) interface.
- The [substr() SQL function](lang_corefunc.html#substr) can now also be called "substring()" for
 compatibility with SQL Server.
- The [syntax diagrams](syntaxdiagrams.html) are now implemented as
 [Pikchr](https://pikchr.org/) scripts and rendered
 as SVG for improved legibility and ease of maintenance.
**Hashes:**
- SQLITE\_SOURCE\_ID: 2020\-12\-01 16:14:00 a26b6597e3ae272231b96f9982c3bcc17ddec2f2b6eb4df06a224b91089fed5b
- SHA3\-256 for sqlite3\.c: fbd895b0655a337b2cd657675f314188a4e9fe614444cc63dfeb3f066f674514




