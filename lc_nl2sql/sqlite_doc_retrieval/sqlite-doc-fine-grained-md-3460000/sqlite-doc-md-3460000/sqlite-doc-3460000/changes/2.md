### 2024\-05\-23 (3\.46\.0\)

1. Enhance [PRAGMA optimize](pragma.html#pragma_optimize) in multiple ways, to make it
 [simpler to use](lang_analyze.html#pragopt):
	1. PRAGMA optimize automatically implements a temporary
	 [analysis limit](pragma.html#pragma_analysis_limit) to prevent excess runtime
	 on large databases.
	 - Added the new 0x10000 bitmask option to check for updates on all tables.
	 - Automatically re\-analyze tables that do not have sqlite\_stat1 entries.- Enhancements to the [date and time functions](lang_datefunc.html):
	1. The [strftime() SQL function](lang_datefunc.html#strftm) now supports %G, %g, %U, and %V.
	 - New modifiers 'ceiling' and 'floor' control the algorithm used to
	 resolve [ambiguous dates](lang_datefunc.html#dtambg) when shifting a date by an integer number
	 of months and/or years.
	 - The ['utc' and 'localtime' modifiers](lang_datefunc.html#localtime) are now no\-ops if SQLite knows
	 that the time is already in UTC or in the localtime, respectively.- Add support for underscore ("\_") characters between digits in
 [numeric literals](lang_expr.html#litvalue).
- Add the [json\_pretty()](json1.html#jpretty) SQL function.
- Query planner improvements:
	1. The "VALUES\-as\-coroutine" optimization enables INSERT statements with 
	 thousands of rows in the VALUES clause to parse and run in about half
	 the time and using about half as much memory.
	 - Allow the use of an index for queries like "SELECT count(DISTINCT col) FROM ...",
	 even if the index records are not smaller than the table records.
	 - Improved recognition of cases where the value of an SQL function is
	 constant because all its arguments are constant.
	 - Enhance the [WHERE\-clause push\-down optimization](optoverview.html#pushdown) so that it is able to
	 push down WHERE clause terms containing uncorrelated subqueries.- Allocate additional memory from the heap for the SQL parser stack if
 that stack overflows, rather than reporting a "parser stack overflow" error.
- JSON changes:
	1. Allow ASCII control characters within JSON5 string literals.
	 - Fix [the \-\> and \-\>\> operators](json1.html#jptr) so that when the right\-hand side operand is a string
	 that looks like an integer it is still treated as a string, because that is what
	 PostgreSQL does.- Allow large hexadecimal literals to be used as the DEFAULT value to a table column.
**Hashes:**
- SQLITE\_SOURCE\_ID: 2024\-05\-23 13:25:27 96c92aba00c8375bc32fafcdf12429c58bd8aabfcadab6683e35bbb9cdebf19e
- SHA3\-256 for sqlite3\.c: 094429ea827fcd32275e767134bc6c7b9ea394a2c5a9e653dd0a0690b2c11358




