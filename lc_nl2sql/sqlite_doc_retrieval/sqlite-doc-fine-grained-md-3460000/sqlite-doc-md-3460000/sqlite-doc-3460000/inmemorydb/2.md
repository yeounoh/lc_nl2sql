## In\-memory Databases And Shared Cache


In\-memory databases are allowed to use [shared cache](sharedcache.html) if they are
opened using a [URI filename](uri.html). If the unadorned ":memory:" name is used
to specify the in\-memory database, then that database always has a private
cache and is only visible to the database connection that originally
opened it. However, the same in\-memory database can be opened by two or
more database connections as follows:


> ```
> 
> rc = sqlite3_open("file::memory:?cache=shared", &db);
> 
> ```



Or,


> ```
> 
> ATTACH DATABASE 'file::memory:?cache=shared' AS aux1;
> 
> ```


This allows separate database connections to share the same
in\-memory database. Of course, all database connections sharing the
in\-memory database need to be in the same process. The database is
automatically deleted and memory is reclaimed when the last connection
to the database closes.

If two or more distinct but shareable in\-memory databases are needed
in a single process, then the [mode\=memory](uri.html#coreqp) query parameter can
be used with a [URI filename](uri.html) to create a named in\-memory database:


> ```
> 
> rc = sqlite3_open("file:memdb1?mode=memory&cache=shared", &db);
> 
> ```



Or,


> ```
> 
> ATTACH DATABASE 'file:memdb1?mode=memory&cache=shared' AS aux1;
> 
> ```


When an in\-memory database is named in this way, it will only share its
cache with another connection that uses exactly the same name.




