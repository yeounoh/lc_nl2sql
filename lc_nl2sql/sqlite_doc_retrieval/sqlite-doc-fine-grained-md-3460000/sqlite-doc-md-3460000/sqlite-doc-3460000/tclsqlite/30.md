### The "wal\_hook" method


This method registers a callback routine that is invoked after transaction
commit when the database is in [WAL mode](wal.html). Two arguments are appended to the
callback command before it is invoked:


* The name of the database on which the transaction was committed
* The number of entries in the write\-ahead log (WAL) file for that database


This method might decide to run a [checkpoint](wal.html#ckpt) either itself or as a
subsequent idle callback. Note that SQLite only allows a single WAL hook.
By default this single WAL hook is used for the auto\-checkpointing. If you
set up an explicit WAL hook, then that one WAL hook must ensure that checkpoints
are occurring since the auto\-checkpointing mechanism will be disabled.


This method should return an integer value that is equivalent to an
SQLite error code (usually 0 for SQLITE\_OK in the case of success or 1 for
SQLITE\_ERROR if some error occurs). As in [sqlite3\_wal\_hook()](c3ref/wal_hook.html), the results of
returning an integer that does not correspond to an SQLite error code are
undefined. If the value returned by the script cannot be interpreted as an
integer value, or if the script throws a Tcl exception, no error is returned to
SQLite but a Tcl background\-error is raised.

