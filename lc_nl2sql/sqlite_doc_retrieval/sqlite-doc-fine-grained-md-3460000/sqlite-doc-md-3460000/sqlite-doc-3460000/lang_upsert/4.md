## 2\.2\. Parsing Ambiguity


When the [INSERT](lang_insert.html) statement to which the UPSERT is attached
takes its values from a [SELECT](lang_select.html) statement, there is a potential
parsing ambiguity. The parser might not be able to tell if the
"ON" keyword is introducing the UPSERT or if it is the ON clause
of a join. To work around this, the SELECT statement should always
include a WHERE clause, even if that WHERE clause is just
"WHERE true".



Ambiguous use of ON:




> ```
> 
> INSERT INTO t1 SELECT * FROM t2
> ON CONFLICT(x) DO UPDATE SET y=excluded.y;
> 
> ```


Ambiguity resolved using a WHERE clause:




> ```
> 
> INSERT INTO t1 SELECT * FROM t2 WHERE true
> ON CONFLICT(x) DO UPDATE SET y=excluded.y;
> 
> ```


