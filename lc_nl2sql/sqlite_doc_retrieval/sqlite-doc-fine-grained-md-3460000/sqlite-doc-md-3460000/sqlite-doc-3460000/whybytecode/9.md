## 2\.3\. Bytecode Can Be Run Incrementally



SQL statements written in bytecode can be evaluated incrementally.
For example, a statement can be run until it generates just its first
row of output. The statement then pauses until it is stepped again.
It is not necessary to run the statement to completion before examining
the first row of output.




This is more difficult to achieve in a tree\-of\-objects design. When
the prepared statement is a tree\-of\-objects, execution is normally
accomplished by walking the tree. To pause the statement in the middle
of a computation means unwinding the stack back up to the caller, all
the while saving enough state to resume evaluation where it last left
off. This is not impossible to do, but is sufficiently difficult that
I have never seen it actually done.




Most SQL database engines do not really need to do incremental
execution of prepared statements because most SQL database engines
are client/server. In client/server engines, a single SQL statement is sent
to the server, then the complete reply comes back over the wire
all at once. Thus each statement runs to completion in a single go.
But SQLite is not client/server. SQLite is a library
that runs in the same address space and using the same stack as the
application. Being able to easily and reliably perform incremental
execution of an SQL statement is important to SQLite.



