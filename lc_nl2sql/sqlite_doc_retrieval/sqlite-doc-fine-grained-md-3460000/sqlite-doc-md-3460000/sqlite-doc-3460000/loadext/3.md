# 3\. Compiling A Loadable Extension


Loadable extensions are C\-code. To compile them on
most unix\-like operating
systems, the usual command is something like this:



> ```
> 
> gcc -g -fPIC -shared YourCode.c -o YourCode.so
> 
> ```


Macs are unix\-like, but they do not follow the usual shared library
conventions. To compile a shared library on a Mac, use a command like
this:



> ```
> 
> gcc -g -fPIC -dynamiclib YourCode.c -o YourCode.dylib
> 
> ```


If when you try to load your library you get back an error message
that says "mach\-o, but wrong architecture" then you might need to add
command\-line options "\-arch i386" or "arch x86\_64" to gcc, depending
on how your application is built.


To compile on Windows using MSVC, a command similar to the following
will usually work:



> ```
> 
> cl YourCode.c -link -dll -out:YourCode.dll
> 
> ```


To compile for Windows using MinGW, the command line is just like it
is for unix except that the output file suffix is changed to ".dll" and
the \-fPIC argument is omitted:



> ```
> 
> gcc -g -shared YourCode.c -o YourCode.dll
> 
> ```



