### New File Format



The format used by SQLite database files has been completely revised.
The old version 2\.1 format and the new 3\.0 format are incompatible with
one another. Version 2\.8 of SQLite will not read a version 3\.0 database
files and version 3\.0 of SQLite will not read a version 2\.8 database file.




To convert an SQLite 2\.8 database into an SQLite 3\.0 database, have
ready the command\-line shells for both version 2\.8 and 3\.0\. Then
enter a command like the following:




> ```
> 
> sqlite OLD.DB .dump | sqlite3 NEW.DB
> 
> ```



The new database file format uses B\+trees for tables. In a B\+tree, all
data is stored in the leaves of the tree instead of in both the leaves and
the intermediate branch nodes. The use of B\+trees for tables allows for
better scalability and the storage of larger data fields without the use of
overflow pages. Traditional B\-trees are still used for indices.



The new file format also supports variable pages sizes between 512 and
65536 bytes. The size of a page is stored in the file header so the
same library can read databases with different pages sizes, in theory,
though this feature has not yet been implemented in practice.




The new file format omits unused fields from its disk images. For example,
indices use only the key part of a B\-tree record and not the data. So
for indices, the field that records the length of the data is omitted.
Integer values such as the length of key and data are stored using
a variable\-length encoding so that only one or two bytes are required to
store the most common cases but up to 64\-bits of information can be encoded
if needed. 
Integer and floating point data is stored on the disk in binary rather
than being converted into ASCII as in SQLite version 2\.8\.
These changes taken together result in database files that are typically
25% to 35% smaller than the equivalent files in SQLite version 2\.8\.




Details of the low\-level B\-tree format used in SQLite version 3\.0 can
be found in header comments to the 
[btreeInt.h](https://www.sqlite.org/src/finfo?name=src/btreeInt.h)
source file and in the [file format](fileformat2.html) documentation.



