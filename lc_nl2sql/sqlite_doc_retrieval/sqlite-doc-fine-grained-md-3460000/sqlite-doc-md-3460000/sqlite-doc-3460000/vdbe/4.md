## Tracing VDBE Program Execution


If the SQLite library is compiled without the NDEBUG preprocessor 
macro, then the PRAGMA [vdbe\_trace](pragma.html#pragma_vdbe_trace) causes the VDBE to trace the execution of programs. Though this 
feature was originally intended for testing and debugging, it can also 
be useful in learning about how the VDBE operates. 
Use "PRAGMA vdbe\_trace\=ON;" to turn tracing on and 
"PRAGMA vdbe\_trace\=OFF" to turn tracing back off. 
Like this:



> sqlite\> **PRAGMA vdbe\_trace\=ON;**  
> 
>    0 Halt            0    0  
> 
> sqlite\> **INSERT INTO examp VALUES('Hello, World!',99\);**  
> 
>    0 Transaction     0    0  
> 
>    1 VerifyCookie    0   81  
> 
>    2 Transaction     1    0  
> 
>    3 Integer         0    0  
> 
> Stack: i:0  
> 
>    4 OpenWrite       0    3 examp  
> 
>    5 NewRecno        0    0  
> 
> Stack: i:2  
> 
>    6 String          0    0 Hello, World!  
> 
> Stack: t\[Hello,.World!] i:2  
> 
>    7 Integer        99    0 99  
> 
> Stack: si:99 t\[Hello,.World!] i:2  
> 
>    8 MakeRecord      2    0  
> 
> Stack: s\[...Hello,.World!.99] i:2  
> 
>    9 PutIntKey       0    1  
> 
>   10 Close           0    0  
> 
>   11 Commit          0    0  
> 
>   12 Halt            0    0


With tracing mode on, the VDBE prints each instruction prior
to executing it. After the instruction is executed, the top few
entries in the stack are displayed. The stack display is omitted
if the stack is empty.


On the stack display, most entries are shown with a prefix
that tells the datatype of that stack entry. Integers begin
with "i:". Floating point values begin with "r:".
(The "r" stands for "real\-number".) Strings begin with either
"s:", "t:", "e:" or "z:". 
The difference among the string prefixes is caused by how their 
memory is allocated. The z: strings are stored in memory obtained
from **malloc()**. The t: strings are statically allocated. 
The e: strings are ephemeral. All other strings have the s: prefix. 
This doesn't make any difference to you,
the observer, but it is vitally important to the VDBE since the
z: strings need to be passed to **free()** when they are
popped to avoid a memory leak. Note that only the first 10
characters of string values are displayed and that binary
values (such as the result of the MakeRecord instruction) are
treated as strings. The only other datatype that can be stored
on the VDBE stack is a NULL, which is display without prefix
as simply "NULL". If an integer has been placed on the 
stack as both an integer and a string, its prefix is "si:".



