## 4\.2\.  Hot Rollback Journals


![](images/ac/rollback-1.gif)
The first time that any SQLite process attempts to access
the database file, it obtains a shared lock as described in
[section 3\.2](#section_3_2) above.
But then it notices that there is a
rollback journal file present. SQLite then checks to see if
the rollback journal is a "hot journal". A hot journal is
a rollback journal that needs to be played back in order to
restore the database to a sane state. A hot journal only
exists when an earlier process was in the middle of committing
a transaction when it crashed or lost power.


A rollback journal is a "hot" journal if all of the following
are true:


* The rollback journal exists.
* The rollback journal is not an empty file.
* There is no reserved lock on the main database file.
* The header of the rollback journal is well\-formed and in particular
 has not been zeroed out.
* The rollback journal does not
contain the name of a super\-journal file (see
[section 5\.5](#section_5_5) below) or if does
contain the name of a super\-journal, then that super\-journal
file exists.


The presence of a hot journal is our indication
that a previous process was trying to commit a transaction but
it aborted for some reason prior to the completion of the
commit. A hot journal means that
the database file is in an inconsistent state and needs to
be repaired (by rollback) prior to being used.


  


