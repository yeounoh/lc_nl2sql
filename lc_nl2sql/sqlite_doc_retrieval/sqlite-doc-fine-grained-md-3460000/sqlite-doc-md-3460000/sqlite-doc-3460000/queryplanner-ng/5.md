# 3\.  A Difficult Case



"TPC\-H Q8" is a test query from the
[Transaction Processing Performance
Council](http://www.tpc.org/tpch/). The query planners in SQLite versions 3\.7\.17 and earlier
do not choose good plans for TPC\-H Q8\. And it has been determined that
no amount
of tweaking of the legacy query planner will fix that. In order to find
a good solution to the TPC\-H Q8 query, and to continue improving the
quality of SQLite's query planner, it became necessary to redesign the
query planner. This section tries to explain why this redesign was
necessary and how the NGQP is different and addresses the TPC\-H Q8 problem.



