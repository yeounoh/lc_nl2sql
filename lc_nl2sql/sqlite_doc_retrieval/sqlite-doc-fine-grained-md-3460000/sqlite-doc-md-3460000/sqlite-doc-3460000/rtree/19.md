## 7\.1\. Shadow Tables


The content of an R\*Tree index is actually stored in three ordinary
SQLite tables with names derived from the name of the R\*Tree. These
three tables are called "[shadow tables](vtab.html#xshadowname)". This is their schema:




```
CREATE TABLE %_node(nodeno INTEGER PRIMARY KEY, data)
CREATE TABLE %_parent(nodeno INTEGER PRIMARY KEY, parentnode)
CREATE TABLE %_rowid(rowid INTEGER PRIMARY KEY, nodeno)

```

The "%" in the name of each shadow table is replaced by the name of the
R\*Tree virtual table. So, if the name of the R\*Tree table is "xyz" then
the three shadow tables would be "xyz\_node", "xyz\_parent", and "xyz\_rowid".



There is one entry in the %\_node table for each R\*Tree node. An
R\*Tree node consists of one or more entries that are proximate to one another.
The nodes of an R\*Tree for a tree. All nodes other than the root have an
entry in the %\_parent shadow table that identifies the parent node.
Each entry in an R\*Tree has a rowid. The %\_rowid shadow table maps entry
rowids to the node that contains that entry.



Extra columns appended to the %\_rowid table hold the
content of [auxiliary columns](rtree.html#auxcol). The names of these extra
%\_rowid columns are probably not the same as the
actual auxiliary column names.




