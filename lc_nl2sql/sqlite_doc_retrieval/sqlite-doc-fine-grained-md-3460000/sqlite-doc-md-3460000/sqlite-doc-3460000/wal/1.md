# 1\. Overview


The default method by which SQLite implements
[atomic commit and rollback](atomiccommit.html) is a [rollback journal](lockingv3.html#rollback).
Beginning with [version 3\.7\.0](releaselog/3_7_0.html) (2010\-07\-21\), a new "Write\-Ahead Log" option
(hereafter referred to as "WAL") is available.


There are advantages and disadvantages to using WAL instead of
a rollback journal. Advantages include:



1. WAL is significantly faster in most scenarios.
2. WAL provides more concurrency as readers do not block writers and 
 a writer does not block readers. Reading and writing can proceed 
 concurrently.
3. Disk I/O operations tends to be more sequential using WAL.
4. WAL uses many fewer fsync() operations and is thus less vulnerable to
 problems on systems where the fsync() system call is broken.


But there are also disadvantages:


1. WAL normally requires that the [VFS](vfs.html) 
 support shared\-memory primitives.
 (Exception: [WAL without shared memory](wal.html#noshm))
 The built\-in unix and windows VFSes
 support this but third\-party extension VFSes for custom operating
 systems might not.
2. All processes using a database must be on the same host computer;
 WAL does not work over a network filesystem.
3. Transactions that involve changes against multiple [ATTACHed](lang_attach.html)
 databases are atomic for each individual database, but are not
 atomic across all databases as a set.
4. It is not possible to change the [page\_size](pragma.html#pragma_page_size) after entering WAL
 mode, either on an empty database or by using [VACUUM](lang_vacuum.html) or by restoring
 from a backup using the [backup API](backup.html). You must be in a rollback journal
 mode to change the page size.
5. ~~It is not possible to open [read\-only WAL databases](wal.html#readonly).
 The opening process must have write privileges for "\-shm"
 [wal\-index](walformat.html#shm) shared memory file associated with the database, if that
 file exists, or else write access on the directory containing
 the database file if the "\-shm" file does not exist.~~
 Beginning with [version 3\.22\.0](releaselog/3_22_0.html) (2018\-01\-22\), a read\-only 
 WAL\-mode database file can be opened if
 the \-shm and \-wal files
 already exists or those files can be created or the
 [database is immutable](uri.html#uriimmutable).
6. WAL might be very slightly slower (perhaps 1% or 2% slower)
 than the traditional rollback\-journal approach
 in applications that do mostly reads and seldom write.
7. There is an additional quasi\-persistent "\-wal" file and
 "\-shm" shared memory file associated with each
 database, which can make SQLite less appealing for use as an 
 [application file\-format](appfileformat.html).
8. There is the extra operation of [checkpointing](wal.html#ckpt) which, though automatic
 by default, is still something that application developers need to
 be mindful of.
9. ~~WAL works best with smaller transactions. WAL does
 not work well for very large transactions. For transactions larger than
 about 100 megabytes, traditional rollback journal modes will likely
 be faster. For transactions in excess of a gigabyte, WAL mode may 
 fail with an I/O or disk\-full error.
 It is recommended that one of the rollback journal modes be used for
 transactions larger than a few dozen megabytes.~~
 Beginning with [version 3\.11\.0](releaselog/3_11_0.html) (2016\-02\-15\), 
 WAL mode works as efficiently with
 large transactions as does rollback mode.


