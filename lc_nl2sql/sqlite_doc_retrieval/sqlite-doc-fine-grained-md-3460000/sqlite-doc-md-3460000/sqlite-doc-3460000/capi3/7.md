#### 2\.4 User\-defined collating sequences



The following routines are used to implement user\-defined
collating sequences:




> ```
> 
>    sqlite3_create_collation(sqlite3*, const char *zName, int eTextRep, void*,
>       int(*xCompare)(void*,int,const void*,int,const void*));
>    sqlite3_create_collation16(sqlite3*, const void *zName, int eTextRep, void*,
>       int(*xCompare)(void*,int,const void*,int,const void*));
>    sqlite3_collation_needed(sqlite3*, void*, 
>       void(*)(void*,sqlite3*,int eTextRep,const char*));
>    sqlite3_collation_needed16(sqlite3*, void*,
>       void(*)(void*,sqlite3*,int eTextRep,const void*));
> 
> ```



The sqlite3\_create\_collation() function specifies a collating sequence name
and a comparison function to implement that collating sequence. The
comparison function is only used for comparing text values. The eTextRep
parameter is one of SQLITE\_UTF8, SQLITE\_UTF16LE, SQLITE\_UTF16BE, or
SQLITE\_ANY to specify which text representation the comparison function works
with. Separate comparison functions can exist for the same collating
sequence for each of the UTF\-8, UTF\-16LE and UTF\-16BE text representations.
The sqlite3\_create\_collation16() works like sqlite3\_create\_collation() except
that the collation name is specified in UTF\-16 host byte order instead of
in UTF\-8\.




The sqlite3\_collation\_needed() routine registers a callback which the
database engine will invoke if it encounters an unknown collating sequence.
The callback can lookup an appropriate comparison function and invoke
sqlite\_3\_create\_collation() as needed. The fourth parameter to the callback
is the name of the collating sequence in UTF\-8\. For sqlite3\_collation\_need16()
the callback sends the collating sequence name in UTF\-16 host byte order.



*This page last modified on [2022\-01\-08 05:02:57](https://sqlite.org/docsrc/honeypot) UTC* 


