### 7\.1\.2\. Manual Control of Query Plans using CROSS JOIN



 Programmers can force SQLite to use a particular loop nesting order
 for a join by using the CROSS JOIN operator instead of just JOIN, 
 INNER JOIN, NATURAL JOIN, or a "," join. Though CROSS JOINs are
 commutative in theory, SQLite chooses to never reorder the tables in
 a CROSS JOIN. Hence, the left table of a CROSS JOIN will always be
 in an outer loop relative to the right table.




 In the following query, the optimizer is free to reorder the 
 tables of FROM clause any way it sees fit:




```
SELECT *
  FROM node AS n1,
       edge AS e,
       node AS n2
 WHERE n1.name = 'alice'
   AND n2.name = 'bob'
   AND e.orig = n1.id
   AND e.dest = n2.id;

```


 In the following logically equivalent formulation of the same query,
 the substitution of "CROSS JOIN" for the "," means that the order
 of tables must be N1, E, N2\.




```
SELECT *
  FROM node AS n1 CROSS JOIN
       edge AS e CROSS JOIN
       node AS n2
 WHERE n1.name = 'alice'
   AND n2.name = 'bob'
   AND e.orig = n1.id
   AND e.dest = n2.id;

```


 In the latter query, the query plan must be 
 [option 2](#option2). Note that
 you must use the keyword "CROSS" in order to disable the table reordering
 optimization; INNER JOIN, NATURAL JOIN, JOIN, and other similar
 combinations work just like a comma join in that the optimizer is
 free to reorder tables as it sees fit. (Table reordering is also
 disabled on an outer join, but that is because outer joins are not
 associative or commutative. Reordering tables in OUTER JOIN changes
 the result.)




 See "[The Fossil NGQP Upgrade Case Study](queryplanner-ng.html#fossilcasestudy)" for another real\-world example
 of using CROSS JOIN to manually control the nesting order of a join.
 The [query planner checklist](queryplanner-ng.html#howtofix) found later in the same document provides
 further guidance on manual control of the query planner.




