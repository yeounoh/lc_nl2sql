# 17\. The Omit OUTER JOIN Optimization



 Sometimes a LEFT or RIGHT JOIN can be completely omitted from a query without
 changing the result. This can happen if all of the following are
 true:






1. The query is not an aggregate
2. Either the query is DISTINCT or else the ON or USING clause
 on the OUTER JOIN constrains the join such that it matches
 only a single row
3. The right\-hand table of the LEFT JOIN or the left\-hand table of
 a RIGHT JOIN is not be used anywhere
 in the query outside of its own USING or ON clause.



 OUTER JOIN elimination often comes up when OUTER JOINs are used
 inside of views, and then the view is used in such as way that
 none of the columns on the right\-hand table of the LEFT JOIN or
 on the left\-hand table of a RIGHT JOIN are referenced.




 Here is a simple example of omitting a LEFT JOIN:




```
CREATE TABLE t1(ipk INTEGER PRIMARY KEY, v1);
CREATE TABLE t2(ipk INTEGER PRIMARY KEY, v2);
CREATE TABLE t3(ipk INTEGER PRIMARY KEY, v3);

SELECT v1, v3 FROM t1 
  LEFT JOIN t2 ON (t1.ipk=t2.ipk)
  LEFT JOIN t3 ON (t1.ipk=t3.ipk)

```


 The t2 table is completely unused in the query above, and so the
 query planner is able to implement the query as if it were written:




```
SELECT v1, v3 FROM t1 
  LEFT JOIN t3 ON (t1.ipk=t3.ipk)

```


 As of this writing, only LEFT JOINs are eliminated. This optimize
 has not yet been generalized to work with RIGHT JOINs as RIGHT JOIN
 is a relatively new addition to SQLite. That asymmetry will probably
 be corrected in a future release.





