## 2\.1\. Unique Partial Indexes


A partial index definition may include the UNIQUE keyword. If it
does, then SQLite requires every entry *in the index* to be unique.
This provides a mechanism for enforcing uniqueness across some subset of
the rows in a table.


For example, suppose you have a database of the members of a large
organization where each person is assigned to a particular "team". 
Each team has a "leader" who is also a member of that team. The
table might look something like this:



```
CREATE TABLE person(
  person_id       INTEGER PRIMARY KEY,
  team_id         INTEGER REFERENCES team,
  is_team_leader  BOOLEAN,
  -- other fields elided
);

```

The team\_id field cannot be unique because there are usually multiple people
on the same team. One cannot make the combination of team\_id and is\_team\_leader
unique since there are usually multiple non\-leaders on each team. The
solution to enforcing one leader per team is to create a unique index
on team\_id but restricted to those entries for which is\_team\_leader is
true:



```
CREATE UNIQUE INDEX team_leader ON person(team_id) WHERE is_team_leader;

```

Coincidentally, that same index is useful for locating the team leader
of a particular team:



```
SELECT person_id FROM person WHERE is_team_leader AND team_id=?1;

```

