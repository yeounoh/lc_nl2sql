# 2\. Compiling The Command\-Line Interface


A build of the [command\-line interface](cli.html) requires three source
files:


* **sqlite3\.c**: The SQLite amalgamation source file
* **sqlite3\.h**: The header files that accompanies sqlite3\.c and
defines the C\-language interfaces to SQLite.
* **shell.c**: The command\-line interface program itself.
This is the C source code file that contains the definition of
the **main()** routine and the loop that prompts for user input
and passes that input into the SQLite database engine for processing.


All three of the above source files are contained in the
[amalgamation tarball](download.html) available on the [download page](download.html).


To build the CLI, simply put these three files in the same directory
and compile them together. Using MSVC:




> ```
> 
> cl shell.c sqlite3.c -Fesqlite3.exe
> 
> ```


On Unix systems (or on Windows using cygwin or mingw\+msys)
the command typically looks something like this:



> ```
> 
> gcc shell.c sqlite3.c -lpthread -ldl -lm -o sqlite3
> 
> ```


The pthreads library is needed to make SQLite threadsafe. But
since the CLI is single threaded, we could instruct SQLite to build
in a non\-threadsafe mode and thereby omit the pthreads library:



> ```
> 
> gcc -DSQLITE_THREADSAFE=0 shell.c sqlite3.c -ldl -lm -o sqlite3
> 
> ```


The \-ldl library is needed to support dynamic loading, the
[sqlite3\_load\_extension()](c3ref/load_extension.html) interface and the
[load\_extension() SQL function](lang_corefunc.html#load_extension). If these features are not required,
then they can be omitted using [SQLITE\_OMIT\_LOAD\_EXTENSION](compile.html#omit_load_extension) compile\-time
option:



> ```
> 
> gcc -DSQLITE_THREADSAFE=0 -DSQLITE_OMIT_LOAD_EXTENSION shell.c sqlite3.c -o sqlite3
> 
> ```


One might want to provide other [compile\-time options](compile.html) such as


* [\-DSQLITE\_ENABLE\_FTS4](compile.html#enable_fts4) or [\-DSQLITE\_ENABLE\_FTS5](compile.html#enable_fts5) for full\-text search,
* [\-DSQLITE\_ENABLE\_RTREE](compile.html#enable_rtree) for the R\*Tree search engine extension,
* [\-DSQLITE\_ENABLE\_DBSTAT\_VTAB](compile.html#enable_dbstat_vtab) for the [dbstat virtual table](dbstat.html), or
* [\-DSQLITE\_ENABLE\_MATH\_FUNCTIONS](compile.html#enable_math_functions) for extended math functions.


In order to see extra commentary in [EXPLAIN](lang_explain.html) listings, add the
[\-DSQLITE\_ENABLE\_EXPLAIN\_COMMENTS](compile.html#enable_explain_comments) option. Add \-DHAVE\_READLINE and
the \-lreadline and \-lncurses libraries to get command\-line editing
support. One might also want to specify some compiler optimization
switches. (The precompiled CLI available for download from the SQLite
website uses "\-Os".) There are countless possible variations here. A
command to compile a full\-featured shell might look something like
this:



> ```
> 
> gcc -Os -I. -DSQLITE_THREADSAFE=0 -DSQLITE_ENABLE_FTS4 \
>    -DSQLITE_ENABLE_FTS5 -DSQLITE_ENABLE_JSON1 \
>    -DSQLITE_ENABLE_RTREE -DSQLITE_ENABLE_EXPLAIN_COMMENTS \
>    -DHAVE_READLINE \
>    shell.c sqlite3.c -ldl -lm -lreadline -lncurses -o sqlite3
> 
> ```


The key point is this: Building the CLI consists of compiling
together two C\-language files. The **shell.c** file contains the
definition of the entry point and the user input loop and the
SQLite amalgamation **sqlite3\.c** contains the complete implementation
of the SQLite library.



