# 3\. Compiling The TCL Interface


The TCL interface for SQLite is a small module that is added into
the regular amalgamation. The result is a new amalgamated source
file called "**tclsqlite3\.c**". This single source file is all that
is needed to generate a shared library that can be loaded into a
standard
[tclsh](http://wiki.tcl-lang.org/2541) or
[wish](http://wiki.tcl-lang.org/2364) using the
[TCL load command](http://wiki.tcl-lang.org/9830), or to generate a
standalone tclsh that comes with SQLite built in.
A copy of the tcl amalgamation
is included on the [download page](download.html) as a file in the [TEA tarball](download.html).


To generate a TCL\-loadable library for SQLite on Linux, the following
command will suffice:



> ```
> 
> gcc -o libtclsqlite3.so -shared tclsqlite3.c -lpthread -ldl -ltcl
> 
> ```


Building shared libraries for Mac OS X and Windows is not nearly so simple,
unfortunately. For those platforms it is best to use the configure script
and makefile that is included with the [TEA tarball](download.html).


To generate a standalone tclsh that is statically linked with SQLite,
use this compiler invocation:



> ```
> 
> gcc -DTCLSH=1 tclsqlite3.c -ltcl -lpthread -ldl -lz -lm
> 
> ```


The trick here is the \-DTCLSH\=1 option. The TCL interface module for
SQLite includes a **main()** procedure that initializes a TCL interpreter
and enters a command\-line loop when it is compiled with \-DTCLSH\=1\. The
command above works on both Linux and Mac OS X, though one may need to adjust
the library options depending on the platform and which version of TCL one
is linking against.



