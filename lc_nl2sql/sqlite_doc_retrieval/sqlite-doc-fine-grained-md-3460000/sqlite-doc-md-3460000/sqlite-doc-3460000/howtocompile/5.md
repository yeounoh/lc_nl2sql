# 4\. Building The Amalgamation


The versions of the SQLite amalgamation that are supplied on the
[download page](download.html) are normally adequate for most users. However, some
projects may want or need to build their own amalgamations. A common
reason for building a custom amalgamation is in order to use certain
[compile\-time options](compile.html) to customize the SQLite library. Recall that
the SQLite amalgamation contains a lot of C\-code that is generated by
auxiliary programs and scripts. Many of the compile\-time
options effect this generated code and must be supplied to the code
generators before the amalgamation is assembled. The set of
compile\-time options that must be passed into the code generators can
vary from one release of SQLite to the next, but at the time of this
writing (circa SQLite 3\.6\.20, 2009\-11\-04\) the set of options that must
be known by the code generators includes:


* [SQLITE\_ENABLE\_UPDATE\_DELETE\_LIMIT](compile.html#enable_update_delete_limit)
* [SQLITE\_OMIT\_ALTERTABLE](compile.html#omit_altertable)
* [SQLITE\_OMIT\_ANALYZE](compile.html#omit_analyze)
* [SQLITE\_OMIT\_ATTACH](compile.html#omit_attach)
* [SQLITE\_OMIT\_AUTOINCREMENT](compile.html#omit_autoincrement)
* [SQLITE\_OMIT\_CAST](compile.html#omit_cast)
* [SQLITE\_OMIT\_COMPOUND\_SELECT](compile.html#omit_compound_select)
* [SQLITE\_OMIT\_EXPLAIN](compile.html#omit_explain)
* [SQLITE\_OMIT\_FOREIGN\_KEY](compile.html#omit_foreign_key)
* [SQLITE\_OMIT\_PRAGMA](compile.html#omit_pragma)
* [SQLITE\_OMIT\_REINDEX](compile.html#omit_reindex)
* [SQLITE\_OMIT\_SUBQUERY](compile.html#omit_subquery)
* [SQLITE\_OMIT\_TEMPDB](compile.html#omit_tempdb)
* [SQLITE\_OMIT\_TRIGGER](compile.html#omit_trigger)
* [SQLITE\_OMIT\_VACUUM](compile.html#omit_vacuum)
* [SQLITE\_OMIT\_VIEW](compile.html#omit_view)
* [SQLITE\_OMIT\_VIRTUALTABLE](compile.html#omit_virtualtable)


To build a custom amalgamation, first download the original individual
source files onto a Unix or Unix\-like development platform.
Be sure to get the original source
files not the "preprocessed source files". One can obtain the complete
set of original source files either from the [download page](download.html) or directly
from the [configuration management system](https://www.sqlite.org/src).


Suppose the SQLite source tree is stored in a directory named "sqlite".
Plan to construct the amalgamation in a parallel directory named (for
example) "bld". First construct an appropriate Makefile by either
running the configure script at the top of the SQLite source tree, or by
making a copy of one of the template Makefiles at the top of the source tree.
Then hand edit this Makefile to include the desired compile\-time options.
Finally run:



> ```
> 
> make sqlite3.c
> 
> ```


Or on Windows with MSVC:




> ```
> 
> nmake /f Makefile.msc sqlite3.c
> 
> ```


The "sqlite3\.c" make target will automatically construct the regular
"**sqlite3\.c**" amalgamation source file, its header file
"**sqlite3\.h**", and the "**tclsqlite3\.c**" amalgamation source
file that includes the TCL interface.
Afterwards, the needed files can be copied into project directories and
compiled according to the procedures outlined above.



