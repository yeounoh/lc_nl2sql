## 9\.3\. Document Sizes Table (%\_docsize table)



```
CREATE TABLE %_docsize(
    id INTEGER PRIMARY KEY,   -- id of FTS5 row this record pertains to
    sz BLOB                   -- blob containing nCol packed varints
);

```

Many common search result ranking functions require as an input the size
in tokens of the result document (as a search term hit in a short document is
considered more significant than one in a long document). To provide fast
access to this information, for each row in the FTS5 table there exists a
corresponding record (with the same rowid) in the %\_docsize shadow table
that contains the size of each column value in the row, in tokens.



The column value sizes are stored in a blob containing one packed varint for
each column of the FTS5 table, from left to right. The varint contains, of
course, the total number of tokens in the corresponding column value. Unindexed
columns are included in this vector of varints; for them the value is always
set to zero.



This table is used by the [xColumnSize](#xColumnSize) API. It can
be omitted altogether by specifying the
[columnsize\=0](#the_columnsize_option) option. In that case the
xColumnSize API is still available to auxiliary functions, but runs much more
slowly.



