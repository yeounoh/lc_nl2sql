# 1\. Overview of FTS5


FTS5 is an SQLite [virtual table module](c3ref/module.html) that provides
[full\-text search](https://en.wikipedia.org/wiki/Full_text_search)
functionality to database applications. In their most elementary form,
full\-text search engines allow the user to efficiently search a large
collection of documents for the subset that contain one or more instances of a
search term. The search functionality provided to world wide web users by
[Google](https://www.google.com/) is, among other things, a full\-text search
engine, as it allows users to search for all documents on the web that contain,
for example, the term "fts5".



To use FTS5, the user creates an FTS5 virtual table with one or more
columns. For example:




```
CREATE VIRTUAL TABLE email USING fts5(sender, title, body);

```

It is an error to add types, constraints or [PRIMARY KEY](lang_createtable.html#primkeyconst) declarations to
a CREATE VIRTUAL TABLE statement used to create an FTS5 table. Once created,
an FTS5 table may be populated using [INSERT](lang_insert.html), [UPDATE](lang_update.html) or [DELETE](lang_delete.html) statements
like any other table. Like any other table with no PRIMARY KEY declaration, an
FTS5 table has an implicit INTEGER PRIMARY KEY field named rowid.



Not shown in the example above is that there are also
[various options](fts5.html#fts5_table_creation_and_initialization) that may be provided to FTS5 as
part of the CREATE VIRTUAL TABLE statement to configure various aspects of the
new table. These may be used to modify the way in which the FTS5 table extracts
terms from documents and queries, to create extra indexes on disk to speed up
prefix queries, or to create an FTS5 table that acts as an index on content
stored elsewhere.



Once populated, there are three ways to execute a full\-text query against
the contents of an FTS5 table:



* Using a MATCH operator in the WHERE clause of a SELECT statement, or
* Using an equals ("\=") operator in the WHERE clause of a SELECT statement, or
* using the [table\-valued function](vtab.html#tabfunc2) syntax.


If using the MATCH or \= operators, the expression to the left of the MATCH
 operator is usually the name of the FTS5 table (the exception is when
 [specifying a column\-filter](fts5.html#fts5_column_filters)). The expression on the right
 must be a text value specifying the term to search for. For the table\-valued
 function syntax, the term to search for is specified as the first table argument.
 For example:




```
-- Query for all rows that contain at least once instance of the term
-- "fts5" (in any column). The following three queries are equivalent.
SELECT * FROM email WHERE email MATCH 'fts5';
SELECT * FROM email WHERE email = 'fts5';
SELECT * FROM email('fts5');

```

 By default, FTS5 full\-text searches are case\-independent. Like any other
SQL query that does not contain an ORDER BY clause, the example above returns
results in an arbitrary order. To sort results by relevance (most to least
relevant), an ORDER BY may be added to a full\-text query as follows:




```
-- Query for all rows that contain at least once instance of the term
-- "fts5" (in any column). Return results in order from best to worst
-- match.  
SELECT * FROM email WHERE email MATCH 'fts5' ORDER BY rank;

```

 As well as the column values and rowid of a matching row, an application
may use [FTS5 auxiliary functions](fts5.html#_auxiliary_functions_) to retrieve extra information regarding
the matched row. For example, an auxiliary function may be used to retrieve
a copy of a column value for a matched row with all instances of the matched
term surrounded by html \<b\>\</b\> tags. Auxiliary functions are
invoked in the same way as SQLite [scalar functions](lang_corefunc.html), except that the name
of the FTS5 table is specified as the first argument. For example:




```
-- Query for rows that match "fts5". Return a copy of the "body" column
-- of each row with the matches surrounded by <b></b> tags.
SELECT highlight(email, 2, '<b>', '</b>') FROM email('fts5');

```

A description of the available auxiliary functions, and more details
regarding configuration of the special "rank" column, are
[available below](fts5.html#_auxiliary_functions_). [Custom auxiliary functions](fts5.html#custom_auxiliary_functions) may also be implemented in C and registered with
FTS5, just as custom SQL functions may be registered with the SQLite core.



 As well as searching for all rows that contain a term, FTS5 allows
the user to search for rows that contain:



* any terms that begin with a specified prefix,
* "phrases" \- sequences of terms or prefix terms that must feature in a
 document for it to match the query,
* sets of terms, prefix terms or phrases that appear within a specified
 proximity of each other (these are called "NEAR queries"), or
* boolean combinations of any of the above.


 Such advanced searches are requested by providing a more complicated
FTS5 query string as the text to the right of the MATCH operator (or \=
operator, or as the first argument to a table\-valued function syntax). The
full query syntax is [described here](fts5.html#full_text_query_syntax).




