## 6\.12\. The 'secure\-delete' Configuration Option


 This command is used to set the persistent boolean "secure\-delete" option.
For example:




```
INSERT INTO ft(ft, rank) VALUES('secure-delete', 1);

```

 Normally, when an entry in an fts5 table is updated or deleted, instead
of removing entries from the full\-text index, delete\-keys are added to the [new b\-tree](#the_automerge_configuration_option) created by the
transaction. This is efficient, but it means that the old full\-text index
entries remain in the database file until they are eventually removed
by merge operations on the full\-text index. Anyone with access to the
database can use these entries to trivially reconstruct the contents of
deleted FTS5 table rows. However, if the 'secure\-delete' option is set
to 1, then full\-text entries are actually removed from the database when
existing FTS5 table rows are updated or deleted. This is slower, but
it prevents old full\-text entries from being used to reconstruct deleted
table rows.



 This option ensures that old full\-text entries are not available to
attackers with SQL access to the database. To also ensure that they may
not be recovered by attackers with access to the SQLite database file 
itself, the application must also enable the SQLite core secure\-delete
option with a command like ["PRAGMA secure\_delete \= 1"](pragma.html#pragma_secure_delete).



 **Warning:** Once one or more table rows have been updated or
deleted with this option set, the FTS5 table may no longer be read or
written by any version of FTS5 earlier than 3\.42\.0 (the first version
in which this option was available). Attempting to do so results in
an error, with an error message like "invalid fts5 file format (found 5,
expected 4\) \- run 'rebuild'". The FTS5 file format may be reverted, so
that it may be read by earlier versions of FTS5, by running the 
['rebuild' command](#the_rebuild_command) on the table using 
version 3\.42\.0 or later.



The default value of the secure\-delete option is 0\.




