## 4\.5\. The Columnsize Option


Normally, FTS5 maintains a special backing table within the database that
stores the size of each column value in tokens inserted into the main FTS5
table in a separate table. This backing table is used by the
[xColumnSize](#xColumnSize)API function, which is in turn used by
the built\-in [bm25 ranking function](fts5.html#the_bm25_function) (and is likely to be useful
to other ranking functions as well).

In order to save space, this backing table may be omitted by setting the
columnsize option to zero. For example:




```
-- A table without the xColumnSize() values stored on disk:
CREATE VIRTUAL TABLE ft USING fts5(a, b, c, columnsize=0);

-- Three equivalent ways of creating a table that does store the
-- xColumnSize() values on disk:
CREATE VIRTUAL TABLE ft USING fts5(a, b, c);
CREATE VIRTUAL TABLE ft USING fts5(a, b, c, columnsize=1);
CREATE VIRTUAL TABLE ft USING fts5(a, b, columnsize='1', c);

```

 It is an error to set the columnsize option to any value other than
0 or 1\.



 If an FTS5 table is configured with columnsize\=0 but is not a
[contentless table](fts5.html#contentless_tables), the xColumnSize API function
still works, but runs much more slowly. In this case, instead of reading
the value to return directly from the database, it reads the text value
itself and count the tokens within it on demand.



Or, if the table is also a [contentless table](fts5.html#contentless_tables),
then the following apply:



* The xColumnSize API always returns \-1\. There is no way to determine
 the number of tokens in a value stored within a contentless FTS5 table
 configured with columnsize\=0\.
* Each inserted row must be accompanied by an explicitly specified rowid
 value. If a contentless table is configured with columnsize\=0,
 attempting to insert a NULL value into the rowid is an SQLITE\_MISMATCH
 error.
* All queries on the table must be full\-text queries. In other words,
 they must use the MATCH or \= operator with the table\-name column as the
 left\-hand operand, or else use the table\-valued function syntax. Any
 query that is not a full\-text query results in an error.


 The name of the table in which the xColumnSize values are stored
(unless columnsize\=0 is specified) is "\<name\>\_docsize", where
\<name\> is the name of the FTS5 table itself. The
[sqlite3\_analyzer](https://www.sqlite.org/download.html)
tool may be used on an existing database in order to determine how much
space might be saved by recreating an FTS5 table using columnsize\=0\.




