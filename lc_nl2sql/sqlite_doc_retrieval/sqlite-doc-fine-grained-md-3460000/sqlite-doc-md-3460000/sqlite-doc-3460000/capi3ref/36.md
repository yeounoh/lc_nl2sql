## Write Data Into A BLOB Incrementally




> ```
> 
> int sqlite3_blob_write(sqlite3_blob *, const void *z, int n, int iOffset);
> 
> ```



This function is used to write data into an open [BLOB handle](#sqlite3_blob) from a
caller\-supplied buffer. N bytes of data are copied from the buffer Z
into the open BLOB, starting at offset iOffset.


On success, sqlite3\_blob\_write() returns SQLITE\_OK.
Otherwise, an [error code](rescode.html) or an [extended error code](rescode.html#extrc) is returned.
Unless SQLITE\_MISUSE is returned, this function sets the
[database connection](#sqlite3) error code and message accessible via
[sqlite3\_errcode()](#sqlite3_errcode) and [sqlite3\_errmsg()](#sqlite3_errcode) and related functions.


If the [BLOB handle](#sqlite3_blob) passed as the first argument was not opened for
writing (the flags parameter to [sqlite3\_blob\_open()](#sqlite3_blob_open) was zero),
this function returns [SQLITE\_READONLY](#SQLITE_ABORT).


This function may only modify the contents of the BLOB; it is
not possible to increase the size of a BLOB using this API.
If offset iOffset is less than N bytes from the end of the BLOB,
[SQLITE\_ERROR](#SQLITE_ABORT) is returned and no data is written. The size of the
BLOB (and hence the maximum value of N\+iOffset) can be determined
using the [sqlite3\_blob\_bytes()](#sqlite3_blob_bytes) interface. If N or iOffset are less
than zero [SQLITE\_ERROR](#SQLITE_ABORT) is returned and no data is written.


An attempt to write to an expired [BLOB handle](#sqlite3_blob) fails with an
error code of [SQLITE\_ABORT](#SQLITE_ABORT). Writes to the BLOB that occurred
before the [BLOB handle](#sqlite3_blob) expired are not rolled back by the
expiration of the handle, though of course those changes might
have been overwritten by the statement that expired the BLOB handle
or by other independent statements.


This routine only works on a [BLOB handle](#sqlite3_blob) which has been created
by a prior successful call to [sqlite3\_blob\_open()](#sqlite3_blob_open) and which has not
been closed by [sqlite3\_blob\_close()](#sqlite3_blob_close). Passing any other pointer in
to this routine results in undefined and probably undesirable behavior.


See also: [sqlite3\_blob\_read()](#sqlite3_blob_read).




---


