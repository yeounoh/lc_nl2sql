## Constraint values in xBestIndex()




> ```
> 
> int sqlite3_vtab_rhs_value(sqlite3_index_info*, int, sqlite3_value **ppVal);
> 
> ```



This API may only be used from within the [xBestIndex method](vtab.html#xbestindex)
of a [virtual table](vtab.html) implementation. The result of calling this interface
from outside of an xBestIndex method are undefined and probably harmful.


When the sqlite3\_vtab\_rhs\_value(P,J,V) interface is invoked from within
the [xBestIndex](vtab.html#xbestindex) method of a [virtual table](vtab.html) implementation, with P being
a copy of the [sqlite3\_index\_info](#sqlite3_index_info) object pointer passed into xBestIndex and
J being a 0\-based index into P\-\>aConstraint\[], then this routine
attempts to set \*V to the value of the right\-hand operand of
that constraint if the right\-hand operand is known. If the
right\-hand operand is not known, then \*V is set to a NULL pointer.
The sqlite3\_vtab\_rhs\_value(P,J,V) interface returns SQLITE\_OK if
and only if \*V is set to a value. The sqlite3\_vtab\_rhs\_value(P,J,V)
inteface returns SQLITE\_NOTFOUND if the right\-hand side of the J\-th
constraint is not available. The sqlite3\_vtab\_rhs\_value() interface
can return an result code other than SQLITE\_OK or SQLITE\_NOTFOUND if
something goes wrong.


The sqlite3\_vtab\_rhs\_value() interface is usually only successful if
the right\-hand operand of a constraint is a literal value in the original
SQL statement. If the right\-hand operand is an expression or a reference
to some other column or a [host parameter](#sqlite3_bind_blob), then sqlite3\_vtab\_rhs\_value()
will probably return [SQLITE\_NOTFOUND](#SQLITE_ABORT).


Some constraints, such as [SQLITE\_INDEX\_CONSTRAINT\_ISNULL](#SQLITE_INDEX_CONSTRAINT_EQ) and
[SQLITE\_INDEX\_CONSTRAINT\_ISNOTNULL](#SQLITE_INDEX_CONSTRAINT_EQ), have no right\-hand operand. For such
constraints, sqlite3\_vtab\_rhs\_value() always returns SQLITE\_NOTFOUND.


The [sqlite3\_value](#sqlite3_value) object returned in \*V is a protected sqlite3\_value
and remains valid for the duration of the xBestIndex method call.
When xBestIndex returns, the sqlite3\_value object returned by
sqlite3\_vtab\_rhs\_value() is automatically deallocated.


The "\_rhs\_" in the name of this routine is an abbreviation for
"Right\-Hand Side".




---


