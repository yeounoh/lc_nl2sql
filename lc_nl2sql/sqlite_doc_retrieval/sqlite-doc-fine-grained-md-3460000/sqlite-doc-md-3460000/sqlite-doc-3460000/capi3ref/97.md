## Test To See If The Library Is Threadsafe




> ```
> 
> int sqlite3_threadsafe(void);
> 
> ```



The sqlite3\_threadsafe() function returns zero if and only if
SQLite was compiled with mutexing code omitted due to the
[SQLITE\_THREADSAFE](compile.html#threadsafe) compile\-time option being set to 0\.


SQLite can be compiled with or without mutexes. When
the [SQLITE\_THREADSAFE](compile.html#threadsafe) C preprocessor macro is 1 or 2, mutexes
are enabled and SQLite is threadsafe. When the
[SQLITE\_THREADSAFE](compile.html#threadsafe) macro is 0,
the mutexes are omitted. Without the mutexes, it is not safe
to use SQLite concurrently from more than one thread.


Enabling mutexes incurs a measurable performance penalty.
So if speed is of utmost importance, it makes sense to disable
the mutexes. But for maximum safety, mutexes should be enabled.
The default behavior is for mutexes to be enabled.


This interface can be used by an application to make sure that the
version of SQLite that it is linking against was compiled with
the desired setting of the [SQLITE\_THREADSAFE](compile.html#threadsafe) macro.


This interface only reports on the compile\-time mutex setting
of the [SQLITE\_THREADSAFE](compile.html#threadsafe) flag. If SQLite is compiled with
SQLITE\_THREADSAFE\=1 or \=2 then mutexes are enabled by default but
can be fully or partially disabled using a call to [sqlite3\_config()](#sqlite3_config)
with the verbs [SQLITE\_CONFIG\_SINGLETHREAD](#sqliteconfigsinglethread), [SQLITE\_CONFIG\_MULTITHREAD](#sqliteconfigmultithread),
or [SQLITE\_CONFIG\_SERIALIZED](#sqliteconfigserialized). The return value of the
sqlite3\_threadsafe() function shows only the compile\-time setting of
thread safety, not any run\-time changes to that setting made by
sqlite3\_config(). In other words, the return value from sqlite3\_threadsafe()
is unchanged by calls to sqlite3\_config().


See the [threading mode](threadsafe.html) documentation for additional information.




---


