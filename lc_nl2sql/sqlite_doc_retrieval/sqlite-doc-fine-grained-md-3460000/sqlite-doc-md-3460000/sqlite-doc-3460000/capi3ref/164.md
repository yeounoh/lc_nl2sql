## Closing A Database Connection




> ```
> 
> int sqlite3_close(sqlite3*);
> int sqlite3_close_v2(sqlite3*);
> 
> ```



The sqlite3\_close() and sqlite3\_close\_v2() routines are destructors
for the [sqlite3](#sqlite3) object.
Calls to sqlite3\_close() and sqlite3\_close\_v2() return [SQLITE\_OK](#SQLITE_ABORT) if
the [sqlite3](#sqlite3) object is successfully destroyed and all associated
resources are deallocated.


Ideally, applications should [finalize](#sqlite3_finalize) all
[prepared statements](#sqlite3_stmt), [close](#sqlite3_blob_close) all [BLOB handles](#sqlite3_blob), and
[finish](#sqlite3backupfinish) all [sqlite3\_backup](#sqlite3_backup) objects associated
with the [sqlite3](#sqlite3) object prior to attempting to close the object.
If the database connection is associated with unfinalized prepared
statements, BLOB handlers, and/or unfinished sqlite3\_backup objects then
sqlite3\_close() will leave the database connection open and return
[SQLITE\_BUSY](#SQLITE_ABORT). If sqlite3\_close\_v2() is called with unfinalized prepared
statements, unclosed BLOB handlers, and/or unfinished sqlite3\_backups,
it returns [SQLITE\_OK](#SQLITE_ABORT) regardless, but instead of deallocating the database
connection immediately, it marks the database connection as an unusable
"zombie" and makes arrangements to automatically deallocate the database
connection after all prepared statements are finalized, all BLOB handles
are closed, and all backups have finished. The sqlite3\_close\_v2() interface
is intended for use with host languages that are garbage collected, and
where the order in which destructors are called is arbitrary.


If an [sqlite3](#sqlite3) object is destroyed while a transaction is open,
the transaction is automatically rolled back.


The C parameter to [sqlite3\_close(C)](#sqlite3_close) and [sqlite3\_close\_v2(C)](#sqlite3_close)
must be either a NULL
pointer or an [sqlite3](#sqlite3) object pointer obtained
from [sqlite3\_open()](#sqlite3_open), [sqlite3\_open16()](#sqlite3_open), or
[sqlite3\_open\_v2()](#sqlite3_open), and not previously closed.
Calling sqlite3\_close() or sqlite3\_close\_v2() with a NULL pointer
argument is a harmless no\-op.




---


