## Create and Destroy VFS Filenames




> ```
> 
> sqlite3_filename sqlite3_create_filename(
>   const char *zDatabase,
>   const char *zJournal,
>   const char *zWal,
>   int nParam,
>   const char **azParam
> );
> void sqlite3_free_filename(sqlite3_filename);
> 
> ```



These interfaces are provided for use by [VFS shim](vfs.html#shim) implementations and
are not useful outside of that context.


The sqlite3\_create\_filename(D,J,W,N,P) allocates memory to hold a version of
database filename D with corresponding journal file J and WAL file W and
with N URI parameters key/values pairs in the array P. The result from
sqlite3\_create\_filename(D,J,W,N,P) is a pointer to a database filename that
is safe to pass to routines like:
* [sqlite3\_uri\_parameter()](#sqlite3_uri_boolean),
* [sqlite3\_uri\_boolean()](#sqlite3_uri_boolean),
* [sqlite3\_uri\_int64()](#sqlite3_uri_boolean),
* [sqlite3\_uri\_key()](#sqlite3_uri_boolean),
* [sqlite3\_filename\_database()](#sqlite3_filename_database),
* [sqlite3\_filename\_journal()](#sqlite3_filename_database), or
* [sqlite3\_filename\_wal()](#sqlite3_filename_database).


If a memory allocation error occurs, sqlite3\_create\_filename() might
return a NULL pointer. The memory obtained from sqlite3\_create\_filename(X)
must be released by a corresponding call to sqlite3\_free\_filename(Y).


The P parameter in sqlite3\_create\_filename(D,J,W,N,P) should be an array
of 2\*N pointers to strings. Each pair of pointers in this array corresponds
to a key and value for a query parameter. The P parameter may be a NULL
pointer if N is zero. None of the 2\*N pointers in the P array may be
NULL pointers and key pointers should not be empty strings.
None of the D, J, or W parameters to sqlite3\_create\_filename(D,J,W,N,P) may
be NULL pointers, though they can be empty strings.


The sqlite3\_free\_filename(Y) routine releases a memory allocation
previously obtained from sqlite3\_create\_filename(). Invoking
sqlite3\_free\_filename(Y) where Y is a NULL pointer is a harmless no\-op.


If the Y parameter to sqlite3\_free\_filename(Y) is anything other
than a NULL pointer or a pointer previously acquired from
sqlite3\_create\_filename(), then bad things such as heap
corruption or segfaults may occur. The value Y should not be
used again after sqlite3\_free\_filename(Y) has been called. This means
that if the [sqlite3\_vfs.xOpen()](#sqlite3vfsxopen) method of a VFS has been called using Y,
then the corresponding \[sqlite3\_module.xClose() method should also be
invoked prior to calling sqlite3\_free\_filename(Y).




---


