# 1\. Overview


This spellfix1 [virtual table](vtab.html) can be used to search
a large vocabulary for close matches. For example, spellfix1
can be used to suggest corrections to misspelled words. Or,
it could be used with [FTS4](fts3.html#fts4) to do full\-text search using potentially
misspelled words.



The implementation for the spellfix1 virtual table is held in the
SQLite source tree in the miscellaneous extensions folder and in
particular in the file 
[ext/misc/spellfix1\.c](https://www.sqlite.org/src/finfo?name=ext/misc/spellfix.c).
The spellfix1 virtual table is not included in the SQLite [amalgamation](amalgamation.html)
and is not a part of any standard SQLite build. It is a [loadable extension](loadext.html).



Once the spellfix1 extension is loaded, an instance of the spellfix1 
virtual table is created like this:




> ```
> 
> CREATE VIRTUAL TABLE demo USING spellfix1;
> 
> ```


The "spellfix1" term is the name of the spellfix module and must be 
entered as shown. The "demo" term is the
name of the virtual table you will be creating and can be altered
to suit the needs of your application. The virtual table is initially
empty. In order for the virtual table to be useful, you will need to
populate it with your vocabulary. Suppose you
have a list of words in a table named "big\_vocabulary". Then do this:




> ```
> 
> INSERT INTO demo(word) SELECT word FROM big_vocabulary;
> 
> ```


If you intend to use this virtual table in cooperation with an [FTS4](fts3.html#fts4)
table (for spelling correction of search terms) then you might extract
the vocabulary using an [fts4aux](fts3.html#fts4aux) table:




> ```
> 
> INSERT INTO demo(word) SELECT term FROM search_aux WHERE col='*';
> 
> ```


You can also provide the virtual table with a "rank" for each word.
The "rank" is an estimate of how common the word is. Larger numbers
mean the word is more common. If you omit the rank when populating
the table, then a rank of 1 is assumed. But if you have rank 
information, you can supply it and the virtual table will show a
slight preference for selecting more commonly used terms. To
populate the rank from an fts4aux table "search\_aux" do something
like this:




> ```
> 
> INSERT INTO demo(word,rank)
>    SELECT term, documents FROM search_aux WHERE col='*';
> 
> ```


To query the virtual table, include a MATCH operator in the WHERE
clause. For example:




> ```
> 
> SELECT word FROM demo WHERE word MATCH 'kennasaw';
> 
> ```


Using a dataset of American place names (derived from
<http://geonames.usgs.gov/domestic/download_data.htm>) the query above
returns 20 results beginning with:




> ```
> 
> kennesaw
> kenosha
> kenesaw
> kenaga
> keanak
> 
> ```


If you append the character '\*' to the end of the pattern, then
a prefix search is performed. For example:




> ```
> 
> SELECT word FROM demo WHERE word MATCH 'kennes*';
> 
> ```


Yields 20 results beginning with:




> ```
> 
> kennesaw
> kennestone
> kenneson
> kenneys
> keanes
> keenes
> 
> ```


