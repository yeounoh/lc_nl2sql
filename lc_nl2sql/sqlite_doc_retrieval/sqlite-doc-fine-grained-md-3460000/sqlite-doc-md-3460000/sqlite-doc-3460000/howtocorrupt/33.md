## 8\.6\.  Race condition in recovery on Windows systems


SQLite version 3\.7\.16\.2 fixes a subtle race condition in the locking
logic on Windows systems. When a database file is in need
of recovery because the previous process writing to it crashed in the
middle of a transaction and two or more processes try to open the 
that database at the same time, then the race condition might cause
one of those processes to get a false indication that the recovery 
has already completed, allowing that process to continue using the
database file without running recovery first. If that process writes
to the file, then the file might go corrupt. This race condition
had apparently existed in all prior versions of SQLite for Windows going
back to 2004\. But the race was very tight. Practically speaking, you
need a fast multi\-core machine in which you launch two processes to run
recovery at the same moment on two separate cores. This defect was
on Windows systems only and did not affect the posix OS interface.



