## 8\.3\.  I/O error while obtaining a lock leads to corruption


If the operating system returns an I/O error while attempting to obtain
a certain lock on shared memory in [WAL mode](wal.html) then SQLite might fail 
to reset its cache,
which could lead to database corruption if subsequent writes are attempted.


Note that this problem only occurs if the attempt to acquire the lock
resulted in an I/O error. If the lock is simply not granted (because some
other thread or process is already holding a conflicting lock) then no
corruption will ever occur. We are not aware of any operating systems that
will fail with an I/O error while attempting to get a file lock on shared
memory. So this is a theoretical problem rather than a real problem.
Needless to say, this problem has never been observed in the wild. The
problem was discovered while doing stress testing of SQLite in a test
harness that simulates I/O errors.


This problem was fixed on 2010\-09\-20 for SQLite version 3\.7\.3\.


