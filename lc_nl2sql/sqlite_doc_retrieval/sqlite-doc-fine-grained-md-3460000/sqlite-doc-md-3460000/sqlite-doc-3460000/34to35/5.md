#### 2\.1\.1 Registering New VFS Objects


 Standard builds of SQLite for Unix or Windows come with a single
 VFS named "unix" or "win32", as appropriate. This one VFS is also 
 the default. So if you are using the legacy open functions, everything
 will continue to operate as it has before. The change is that an application
 now has the flexibility of adding new VFS modules to implement a
 customized OS layer. The [sqlite3\_vfs\_register()](c3ref/vfs_find.html) API can be used
 to tell SQLite about one or more application\-defined VFS modules:




> ```
> 
> int sqlite3_vfs_register(sqlite3_vfs*, int makeDflt);
> 
> ```


 Applications can call sqlite3\_vfs\_register() at any time, though of course
 a VFS needs to be registered before it can be used. The first argument
 is a pointer to a customized VFS object that the application has prepared.
 The second argument is true to make the new VFS the default VFS so that
 it will be used by the legacy [sqlite3\_open()](c3ref/open.html) and [sqlite3\_open16()](c3ref/open.html) APIs.
 If the new VFS is not the default, then you will probably have to use
 the new [sqlite3\_open\_v2()](c3ref/open.html) API to use it. Note, however, that if
 a new VFS is the only VFS known to SQLite (if SQLite was compiled without
 its usual default VFS or if the precompiled default VFS was removed
 using [sqlite3\_vfs\_unregister()](c3ref/vfs_find.html)) then the new VFS automatically becomes the
 default VFS regardless of the makeDflt argument to [sqlite3\_vfs\_register()](c3ref/vfs_find.html).




 Standard builds include the default "unix" or "win32" VFSes.
 But if you use the \-DOS\_OTHER\=1 compile\-time option, then SQLite is
 built without a default VFS. In that case, the application must
 register at least one VFS prior to calling [sqlite3\_open()](c3ref/open.html).
 This is the approach that embedded applications should use.
 Rather than modifying the SQLite source to insert an alternative
 OS layer as was done in prior releases of SQLite, instead compile
 an unmodified SQLite source file (preferably the amalgamation)
 with the \-DOS\_OTHER\=1 option, then invoke [sqlite3\_vfs\_register()](c3ref/vfs_find.html)
 to define the interface to the underlying filesystem prior to
 creating any database connections.



