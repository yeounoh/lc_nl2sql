## Initialize The SQLite Library




> ```
> 
> int sqlite3_initialize(void);
> int sqlite3_shutdown(void);
> int sqlite3_os_init(void);
> int sqlite3_os_end(void);
> 
> ```



The sqlite3\_initialize() routine initializes the
SQLite library. The sqlite3\_shutdown() routine
deallocates any resources that were allocated by sqlite3\_initialize().
These routines are designed to aid in process initialization and
shutdown on embedded systems. Workstation applications using
SQLite normally do not need to invoke either of these routines.


A call to sqlite3\_initialize() is an "effective" call if it is
the first time sqlite3\_initialize() is invoked during the lifetime of
the process, or if it is the first time sqlite3\_initialize() is invoked
following a call to sqlite3\_shutdown(). Only an effective call
of sqlite3\_initialize() does any initialization. All other calls
are harmless no\-ops.


A call to sqlite3\_shutdown() is an "effective" call if it is the first
call to sqlite3\_shutdown() since the last sqlite3\_initialize(). Only
an effective call to sqlite3\_shutdown() does any deinitialization.
All other valid calls to sqlite3\_shutdown() are harmless no\-ops.


The sqlite3\_initialize() interface is threadsafe, but sqlite3\_shutdown()
is not. The sqlite3\_shutdown() interface must only be called from a
single thread. All open [database connections](../c3ref/sqlite3.html) must be closed and all
other SQLite resources must be deallocated prior to invoking
sqlite3\_shutdown().


Among other things, sqlite3\_initialize() will invoke
sqlite3\_os\_init(). Similarly, sqlite3\_shutdown()
will invoke sqlite3\_os\_end().


The sqlite3\_initialize() routine returns [SQLITE\_OK](../rescode.html#ok) on success.
If for some reason, sqlite3\_initialize() is unable to initialize
the library (perhaps it is unable to allocate a needed resource such
as a mutex) it returns an [error code](../rescode.html) other than [SQLITE\_OK](../rescode.html#ok).


The sqlite3\_initialize() routine is called internally by many other
SQLite interfaces so that an application usually does not need to
invoke sqlite3\_initialize() directly. For example, [sqlite3\_open()](../c3ref/open.html)
calls sqlite3\_initialize() so the SQLite library will be automatically
initialized when [sqlite3\_open()](../c3ref/open.html) is called if it has not be initialized
already. However, if SQLite is compiled with the [SQLITE\_OMIT\_AUTOINIT](../compile.html#omit_autoinit)
compile\-time option, then the automatic calls to sqlite3\_initialize()
are omitted and the application must call sqlite3\_initialize() directly
prior to using any other SQLite interface. For maximum portability,
it is recommended that applications always invoke sqlite3\_initialize()
directly prior to using any other SQLite interface. Future releases
of SQLite may require this. In other words, the behavior exhibited
when SQLite is compiled with [SQLITE\_OMIT\_AUTOINIT](../compile.html#omit_autoinit) might become the
default behavior in some future release of SQLite.


The sqlite3\_os\_init() routine does operating\-system specific
initialization of the SQLite library. The sqlite3\_os\_end()
routine undoes the effect of sqlite3\_os\_init(). Typical tasks
performed by these routines include allocation or deallocation
of static resources, initialization of global variables,
setting up a default [sqlite3\_vfs](../c3ref/vfs.html) module, or setting up
a default configuration using [sqlite3\_config()](../c3ref/config.html).


The application should never invoke either sqlite3\_os\_init()
or sqlite3\_os\_end() directly. The application should only invoke
sqlite3\_initialize() and sqlite3\_shutdown(). The sqlite3\_os\_init()
interface is called automatically by sqlite3\_initialize() and
sqlite3\_os\_end() is called by sqlite3\_shutdown(). Appropriate
implementations for sqlite3\_os\_init() and sqlite3\_os\_end()
are built into SQLite when it is compiled for Unix, Windows, or OS/2\.
When [built for other platforms](../custombuild.html)
(using the [SQLITE\_OS\_OTHER\=1](../compile.html#os_other) compile\-time
option) the application must supply a suitable implementation for
sqlite3\_os\_init() and sqlite3\_os\_end(). An application\-supplied
implementation of sqlite3\_os\_init() or sqlite3\_os\_end()
must return [SQLITE\_OK](../rescode.html#ok) on success and some other [error code](../rescode.html) upon
failure.


See also lists of
 [Objects](../c3ref/objlist.html),
 [Constants](../c3ref/constlist.html), and
 [Functions](../c3ref/funclist.html).


