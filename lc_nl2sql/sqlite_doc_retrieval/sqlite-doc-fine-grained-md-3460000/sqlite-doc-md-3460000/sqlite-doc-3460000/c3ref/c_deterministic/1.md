## Function Flags




> ```
> 
> #define SQLITE_DETERMINISTIC    0x000000800
> #define SQLITE_DIRECTONLY       0x000080000
> #define SQLITE_SUBTYPE          0x000100000
> #define SQLITE_INNOCUOUS        0x000200000
> #define SQLITE_RESULT_SUBTYPE   0x001000000
> 
> ```



These constants may be ORed together with the
[preferred text encoding](../c3ref/c_any.html) as the fourth argument
to [sqlite3\_create\_function()](../c3ref/create_function.html), [sqlite3\_create\_function16()](../c3ref/create_function.html), or
[sqlite3\_create\_function\_v2()](../c3ref/create_function.html).




SQLITE\_DETERMINISTIC
The SQLITE\_DETERMINISTIC flag means that the new function always gives
the same output when the input parameters are the same.
The [abs() function](../lang_corefunc.html#abs) is deterministic, for example, but
[randomblob()](../lang_corefunc.html#randomblob) is not. Functions must
be deterministic in order to be used in certain contexts such as
with the WHERE clause of [partial indexes](../partialindex.html) or in [generated columns](../gencol.html).
SQLite might also optimize deterministic functions by factoring them
out of inner loops.




SQLITE\_DIRECTONLY
The SQLITE\_DIRECTONLY flag means that the function may only be invoked
from top\-level SQL, and cannot be used in VIEWs or TRIGGERs nor in
schema structures such as [CHECK constraints](../lang_createtable.html#ckconst), [DEFAULT clauses](../lang_createtable.html#dfltval),
[expression indexes](../expridx.html), [partial indexes](../partialindex.html), or [generated columns](../gencol.html).

The SQLITE\_DIRECTONLY flag is recommended for any
[application\-defined SQL function](../appfunc.html)
that has side\-effects or that could potentially leak sensitive information.
This will prevent attacks in which an application is tricked
into using a database file that has had its schema surreptitiously
modified to invoke the application\-defined function in ways that are
harmful.

Some people say it is good practice to set SQLITE\_DIRECTONLY on all
[application\-defined SQL functions](../appfunc.html), regardless of whether or not they
are security sensitive, as doing so prevents those functions from being used
inside of the database schema, and thus ensures that the database
can be inspected and modified using generic tools (such as the [CLI](../cli.html))
that do not have access to the application\-defined functions.








SQLITE\_INNOCUOUS
The SQLITE\_INNOCUOUS flag means that the function is unlikely
to cause problems even if misused. An innocuous function should have
no side effects and should not depend on any values other than its
input parameters. The [abs() function](../lang_corefunc.html#abs) is an example of an
innocuous function.
The [load\_extension() SQL function](../lang_corefunc.html#load_extension) is not innocuous because of its
side effects.
 SQLITE\_INNOCUOUS is similar to SQLITE\_DETERMINISTIC, but is not
exactly the same. The [random() function](../lang_corefunc.html#random) is an example of a
function that is innocuous but not deterministic.
Some heightened security settings
([SQLITE\_DBCONFIG\_TRUSTED\_SCHEMA](../c3ref/c_dbconfig_defensive.html#sqlitedbconfigtrustedschema) and [PRAGMA trusted\_schema\=OFF](../pragma.html#pragma_trusted_schema))
disable the use of SQL functions inside views and triggers and in
schema structures such as [CHECK constraints](../lang_createtable.html#ckconst), [DEFAULT clauses](../lang_createtable.html#dfltval),
[expression indexes](../expridx.html), [partial indexes](../partialindex.html), and [generated columns](../gencol.html) unless
the function is tagged with SQLITE\_INNOCUOUS. Most built\-in functions
are innocuous. Developers are advised to avoid using the
SQLITE\_INNOCUOUS flag for application\-defined functions unless the
function has been carefully audited and found to be free of potentially
security\-adverse side\-effects and information\-leaks.








SQLITE\_SUBTYPE
The SQLITE\_SUBTYPE flag indicates to SQLite that a function might call
[sqlite3\_value\_subtype()](../c3ref/value_subtype.html) to inspect the sub\-types of its arguments.
This flag instructs SQLite to omit some corner\-case optimizations that
might disrupt the operation of the [sqlite3\_value\_subtype()](../c3ref/value_subtype.html) function,
causing it to return zero rather than the correct subtype().
SQL functions that invokes [sqlite3\_value\_subtype()](../c3ref/value_subtype.html) should have this
property. If the SQLITE\_SUBTYPE property is omitted, then the return
value from [sqlite3\_value\_subtype()](../c3ref/value_subtype.html) might sometimes be zero even though
a non\-zero subtype was specified by the function argument expression.



SQLITE\_RESULT\_SUBTYPE
The SQLITE\_RESULT\_SUBTYPE flag indicates to SQLite that a function might call
[sqlite3\_result\_subtype()](../c3ref/result_subtype.html) to cause a sub\-type to be associated with its
result.
Every function that invokes [sqlite3\_result\_subtype()](../c3ref/result_subtype.html) should have this
property. If it does not, then the call to [sqlite3\_result\_subtype()](../c3ref/result_subtype.html)
might become a no\-op if the function is used as term in an
[expression index](../expridx.html). On the other hand, SQL functions that never invoke
[sqlite3\_result\_subtype()](../c3ref/result_subtype.html) should avoid setting this property, as the
purpose of this property is to disable certain optimizations that are
incompatible with subtypes.




See also lists of
 [Objects](../c3ref/objlist.html),
 [Constants](../c3ref/constlist.html), and
 [Functions](../c3ref/funclist.html).


