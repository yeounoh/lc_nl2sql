## SQL Trace Hook




> ```
> 
> int sqlite3_trace_v2(
>   sqlite3*,
>   unsigned uMask,
>   int(*xCallback)(unsigned,void*,void*,void*),
>   void *pCtx
> );
> 
> ```



The sqlite3\_trace\_v2(D,M,X,P) interface registers a trace callback
function X against [database connection](../c3ref/sqlite3.html) D, using property mask M
and context pointer P. If the X callback is
NULL or if the M mask is zero, then tracing is disabled. The
M argument should be the bitwise OR\-ed combination of
zero or more [SQLITE\_TRACE](../c3ref/c_trace.html) constants.


Each call to either sqlite3\_trace(D,X,P) or sqlite3\_trace\_v2(D,M,X,P)
overrides (cancels) all prior calls to sqlite3\_trace(D,X,P) or
sqlite3\_trace\_v2(D,M,X,P) for the [database connection](../c3ref/sqlite3.html) D. Each
database connection may have at most one trace callback.


The X callback is invoked whenever any of the events identified by
mask M occur. The integer return value from the callback is currently
ignored, though this may change in future releases. Callback
implementations should return zero to ensure future compatibility.


A trace callback is invoked with four arguments: callback(T,C,P,X).
The T argument is one of the [SQLITE\_TRACE](../c3ref/c_trace.html)
constants to indicate why the callback was invoked.
The C argument is a copy of the context pointer.
The P and X arguments are pointers whose meanings depend on T.


The sqlite3\_trace\_v2() interface is intended to replace the legacy
interfaces [sqlite3\_trace()](../c3ref/profile.html) and [sqlite3\_profile()](../c3ref/profile.html), both of which
are deprecated.


See also lists of
 [Objects](../c3ref/objlist.html),
 [Constants](../c3ref/constlist.html), and
 [Functions](../c3ref/funclist.html).


