## Retrieving Statement SQL




> ```
> 
> const char *sqlite3_sql(sqlite3_stmt *pStmt);
> char *sqlite3_expanded_sql(sqlite3_stmt *pStmt);
> #ifdef SQLITE_ENABLE_NORMALIZE
> const char *sqlite3_normalized_sql(sqlite3_stmt *pStmt);
> #endif
> 
> ```



The sqlite3\_sql(P) interface returns a pointer to a copy of the UTF\-8
SQL text used to create [prepared statement](../c3ref/stmt.html) P if P was
created by [sqlite3\_prepare\_v2()](../c3ref/prepare.html), [sqlite3\_prepare\_v3()](../c3ref/prepare.html),
[sqlite3\_prepare16\_v2()](../c3ref/prepare.html), or [sqlite3\_prepare16\_v3()](../c3ref/prepare.html).
The sqlite3\_expanded\_sql(P) interface returns a pointer to a UTF\-8
string containing the SQL text of prepared statement P with
[bound parameters](../lang_expr.html#varparam) expanded.
The sqlite3\_normalized\_sql(P) interface returns a pointer to a UTF\-8
string containing the normalized SQL text of prepared statement P. The
semantics used to normalize a SQL statement are unspecified and subject
to change. At a minimum, literal values will be replaced with suitable
placeholders.


For example, if a prepared statement is created using the SQL
text "SELECT $abc,:xyz" and if parameter $abc is bound to integer 2345
and parameter :xyz is unbound, then sqlite3\_sql() will return
the original string, "SELECT $abc,:xyz" but sqlite3\_expanded\_sql()
will return "SELECT 2345,NULL".


The sqlite3\_expanded\_sql() interface returns NULL if insufficient memory
is available to hold the result, or if the result would exceed the
the maximum string length determined by the [SQLITE\_LIMIT\_LENGTH](../c3ref/c_limit_attached.html#sqlitelimitlength).


The [SQLITE\_TRACE\_SIZE\_LIMIT](../compile.html#trace_size_limit) compile\-time option limits the size of
bound parameter expansions. The [SQLITE\_OMIT\_TRACE](../compile.html#omit_trace) compile\-time
option causes sqlite3\_expanded\_sql() to always return NULL.


The strings returned by sqlite3\_sql(P) and sqlite3\_normalized\_sql(P)
are managed by SQLite and are automatically freed when the prepared
statement is finalized.
The string returned by sqlite3\_expanded\_sql(P), on the other hand,
is obtained from [sqlite3\_malloc()](../c3ref/free.html) and must be freed by the application
by passing it to [sqlite3\_free()](../c3ref/free.html).


The sqlite3\_normalized\_sql() interface is only available if
the [SQLITE\_ENABLE\_NORMALIZE](../compile.html#enable_normalize) compile\-time option is defined.


See also lists of
 [Objects](../c3ref/objlist.html),
 [Constants](../c3ref/constlist.html), and
 [Functions](../c3ref/funclist.html).


