## 4\.1\. Binary Encoding of Polygons



Geopoly stores all polygons internally using a binary format. A binary
polygon consists of a 4\-byte header following by an array of coordinate
pairs in which each dimension of each coordinate is a 32\-bit floating point
number.




The first byte of the header is a flag byte. The least significant bit
of the flag byte determines whether the coordinate pairs that follow the
header are stored big\-endian or little\-endian. A value of 0 for the least
significant bit means big\-endian and a value of 1 means little endian.
Other bits of the first byte in the header are reserved for future expansion.




The next three bytes in the header record the number of vertexes in the polygon
as a big\-endian integer. Thus there is an upper bound of about 16 million
vertexes per polygon.




Following the header is the array of coordinate pairs. Each coordinate is
a 32\-bit floating point number. The use of 32\-bit floating point values for
coordinates means that any point on the earth's surface can be mapped with
a resolution of approximately 2\.5 meters. Higher resolutions are of course
possible if the map is restricted to a single continent or country.
Note that the resolution of coordinates in the geopoly module is similar
in magnitude to daily movement of points on the earth's surface due to
tidal forces.




The list of coordinates in the binary format contains no redundancy. 
The last coordinate is not a repeat of the first as it is with GeoJSON. 
Hence, there is always one fewer coordinate pair in the binary representation of
a polygon compared to the GeoJSON representation.



