## 2\.20\. The xSavepoint, xRelease, and xRollbackTo Methods



```
int (*xSavepoint)(sqlite3_vtab *pVtab, int);
int (*xRelease)(sqlite3_vtab *pVtab, int);
int (*xRollbackTo)(sqlite3_vtab *pVtab, int);

```


These methods provide the virtual table implementation an opportunity to
implement nested transactions. They are always optional and will only be
called in SQLite [version 3\.7\.7](releaselog/3_7_7.html) (2011\-06\-23\) and later.




When xSavepoint(X,N) is invoked, that is a signal to the virtual table X
that it should save its current state as savepoint N. 
A subsequent call
to xRollbackTo(X,R) means that the state of the virtual table should return
to what it was when xSavepoint(X,R) was last called. 
The call
to xRollbackTo(X,R) will invalidate all savepoints with N\>R; none of the
invalided savepoints will be rolled back or released without first
being reinitialized by a call to xSavepoint(). 
A call to xRelease(X,M) invalidates all savepoints where N\>\=M.




None of the xSavepoint(), xRelease(), or xRollbackTo() methods will ever
be called except in between calls to xBegin() and 
either xCommit() or xRollback().




