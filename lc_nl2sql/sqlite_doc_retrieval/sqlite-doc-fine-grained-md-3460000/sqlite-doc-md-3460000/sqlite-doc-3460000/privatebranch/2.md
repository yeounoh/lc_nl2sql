# 2\.  The Basic Idea


We propose to use the
[fossil software configuration management](http://www.fossil-scm.org)
system to set up two branches. One branch (the "public branch" or "trunk")
contains the published SQLite sources and the other branch is the 
private branch which contains the code that is customized for the project.
Whenever a new public release of SQLite is made, that release is added to
the public branch and then the changes are merged into the private branch.


This document proposes to use
[fossil](http://www.fossil-scm.org/),
but any other distributed software configuration management system such as
[monotone](http://www.monotone.ca/) or
[mercurial](http://www.selenic.com/mercurial/wiki/) (a.k.a. "hg"), or
[git](http://www.git-scm.org/) could serve just as well.
The concept will be the same, 
though the specifics of the procedure will vary.


The diagram at the right illustrates the concept.
One begins with a standard SQLite release. For the
sake of example, suppose that one intends to create a
private branch off of SQLite version 3\.6\.15\. In the
diagram this is version (1\). The
maintainer makes an exact copy of the baseline
SQLite into the branch space, shown as version (2\).
Note that (1\) and (2\) are exactly the same. Then
the maintainer applies the private changes to 
version (2\) resulting in version (3\). In other words,
version (3\) is SQLite version 3\.6\.15 plus edits.


Later, SQLite version 3\.6\.16 is released, as shown 
by circle (4\) in the diagram. At the point, the private
branch maintainer does a merge which takes all of the
changes going from (1\) to (4\) and applies those changes to
(3\). The result is version (5\), which is SQLite 3\.6\.16
plus edits.


There might be merge conflicts. In other words, it might
be that the changes from (2\) to (3\) are incompatible with the
changes from (1\) to (4\). In that case, the maintainer will
have to manually resolve the conflicts. Hopefully conflicts
will not come up that often. Conflicts are less likely to
occur when the private edits are kept to a minimum.


The cycle above can be repeated many times. The
diagram shows a third SQLite release, 3\.6\.17 in
circle (6\). The private branch maintainer can do
another merge in order to incorporate the changes
moving from (4\) to (6\) into the private branch, resulting
in version (7\).


