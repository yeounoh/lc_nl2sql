## 3\.2\.  Searching And Sorting With A Covering Index



A [covering index](queryplanner.html#covidx) can also be used to search and sort at the same time.
Consider the following:





| ```  SELECT * FROM fruitforsale WHERE fruit='Orange' ORDER BY state  ``` |
| --- |




![figure 21](images/qp/fruitobstate.gif)  

Figure 21: Search And Sort By Covering Index




As before, SQLite does single binary search
for the range of rows in the covering
index that satisfy the WHERE clause, the scans that range from top to 
bottom to get the desired results. 
The rows that satisfy the WHERE clause are guaranteed to be adjacent
since the WHERE clause is an equality constraint on the left\-most
column of the index. And by scanning the matching index rows from
top to bottom, the output is guaranteed to be ordered by state since the
state column is the very next column to the right of the fruit column.
And so the resulting query is very efficient.




SQLite can pull a similar trick for a descending ORDER BY:





| ```  SELECT * FROM fruitforsale WHERE fruit='Orange' ORDER BY state DESC  ``` |
| --- |



The same basic algorithm is followed, except this time the matching rows
of the index are scanned from bottom to top instead of from top to bottom,
so that the states will appear in descending order.




