## 2\.1\. Manually Created Imposter Tables



One way to create an imposter table is to directly edit the sqlite\_schema
table to insert a new row that describes the table.
For example, suppose the schema is like this:




```
CREATE TABLE t1(a INTEGER PRIMARY KEY,b TEXT,c INT, d INT);
CREATE INDEX t1bc ON t1(b,c);

```


The WITHOUT ROWID table that has the same structure as the t1bc index
would look like this:




```
CREATE TABLE t2(b TEXT,c INT,a INT, PRIMARY KEY(b,c,a)) WITHOUT ROWID;

```


To create a permanent imposter table "t2" against index "t1bc" one
should first enable editing of the sqlite\_schema table by running
"[PRAGMA writable\_schema\=ON](pragma.html#pragma_writable_schema)".
(Be careful to observe the warnings that accompany this PRAGMA.
A mistake can cause severe database corruption.)
Then insert a new entry into the sqlite\_schema table like this:




```
INSERT INTO sqlite_schema(type,name,tbl_name,rootpage,sql)
 SELECT 'table','t2','t2',rootpage,
   'CREATE TABLE t2(b,c,a,PRIMARY KEY(b,c,a))WITHOUT ROWID'
   FROM sqlite_schema
  WHERE name='t1bc';

```


The INSERT statement above adds a new row to the sqlite\_schema table that
defines a table "t2" having the same on\-disk format as index "t1bc" and 
pointing to the same b\-tree.
After adding this sqlite\_schema table entry, it is necessary to close and
reopen the database in order to get SQLite to reread the schema.
Then the "t2" table can be queried to see the content of the "t1bc" index.



