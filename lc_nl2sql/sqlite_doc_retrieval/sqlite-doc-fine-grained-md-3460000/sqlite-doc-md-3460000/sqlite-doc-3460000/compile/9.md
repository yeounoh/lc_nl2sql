# 9\.  Options To Omit Features


The following options can be used to
[reduce the size of the compiled library](footprint.html)
by omitting unused features. This is probably only useful
in embedded systems where space is especially tight, as even with all
features included the SQLite library is relatively small. Don't forget
to tell your compiler to optimize for binary size! (the \-Os option if
using GCC). Telling your compiler to optimize for size usually has
a much larger impact on library footprint than employing any of these
compile\-time options. You should also verify that
[debugging options](#debugoptions) are disabled.


The macros in this section do not require values. The following
compilation switches all have the same effect:  

\-DSQLITE\_OMIT\_ALTERTABLE  

\-DSQLITE\_OMIT\_ALTERTABLE\=1  

\-DSQLITE\_OMIT\_ALTERTABLE\=0



If any of these options are defined, then the same set of SQLITE\_OMIT\_\*
options must also be defined when using the [Lemon parser generator](lemon.html)
tool to generate the
parse.c file and when compiling the 'mkkeywordhash' tool which generates
the keywordhash.h file.
Because of this, these options may only be used when the library is built
from canonical source, not from the [amalgamation](amalgamation.html).
Some SQLITE\_OMIT\_\* options might work, or appear to work, when used with
the [amalgamation](amalgamation.html). But this is not guaranteed. In general, always compile
from canonical sources in order to take advantage of SQLITE\_OMIT\_\* options.




> ***Important Note:** The SQLITE\_OMIT\_\* options may not work with the
> [amalgamation](amalgamation.html). SQLITE\_OMIT\_\* compile\-time
> options usually work correctly only when SQLite is built from canonical
> source files.*


Special versions of the SQLite amalgamation that do work with a
predetermined set of SQLITE\_OMIT\_\* options can be generated. To do so,
make a copy of the Makefile.linux\-gcc makefile template in the canonical
source code distribution. Change the name of your copy to simply "Makefile".
Then edit "Makefile" to set up appropriate compile\-time options. Then
type:



```
make clean; make sqlite3.c

```

The resulting "sqlite3\.c" amalgamation code file (and its associated
header file "sqlite3\.h") can then be moved to a non\-unix platform
for final compilation using a native compiler.


The SQLITE\_OMIT\_\* options are unsupported. By this we mean that
an SQLITE\_OMIT\_\* option that omits code from the build in the current
release might become a no\-op in the next release. Or the other way around:
an SQLITE\_OMIT\_\* that is a no\-op in the current release might cause code
to be excluded in the next release. Also, not all SQLITE\_OMIT\_\* options
are tested. Some SQLITE\_OMIT\_\* options might cause SQLite to malfunction
and/or provide incorrect answers.




> ***Important Note:**
> The SQLITE\_OMIT\_\* compile\-time options are mostly unsupported.*


The following are the available OMIT options:


**SQLITE\_OMIT\_ALTERTABLE**


> When this option is defined, the
>  [ALTER TABLE](lang_altertable.html) command is not included in the
>  library. Executing an [ALTER TABLE](lang_altertable.html) statement causes a parse error.


**SQLITE\_OMIT\_ANALYZE**


> When this option is defined, the [ANALYZE](lang_analyze.html) command is omitted from
>  the build.


**SQLITE\_OMIT\_ATTACH**


> When this option is defined, the [ATTACH](lang_attach.html) and [DETACH](lang_detach.html) commands are
>  omitted from the build.


**SQLITE\_OMIT\_AUTHORIZATION**


> Defining this option omits the authorization callback feature from the
>  library. The [sqlite3\_set\_authorizer()](c3ref/set_authorizer.html) API function is not present
>  in the library.


**SQLITE\_OMIT\_AUTOINCREMENT**


> This option is omits the [AUTOINCREMENT](autoinc.html) feature.
>  When this is macro is defined, columns declared as
>  "[INTEGER PRIMARY KEY](lang_createtable.html#rowid) AUTOINCREMENT"
>  behave in the same way as columns declared as "[INTEGER PRIMARY KEY](lang_createtable.html#rowid)" when a
>  NULL is inserted. The sqlite\_sequence system table is neither created, nor
>  respected if it already exists.


**SQLITE\_OMIT\_AUTOINIT**


> For backwards compatibility with older versions of SQLite that lack
>  the [sqlite3\_initialize()](c3ref/initialize.html) interface, the [sqlite3\_initialize()](c3ref/initialize.html) interface
>  is called automatically upon entry to certain key interfaces such as
>  [sqlite3\_open()](c3ref/open.html), [sqlite3\_vfs\_register()](c3ref/vfs_find.html), and [sqlite3\_mprintf()](c3ref/mprintf.html).
>  The overhead of invoking [sqlite3\_initialize()](c3ref/initialize.html) automatically in this
>  way may be omitted by building SQLite with the SQLITE\_OMIT\_AUTOINIT
>  C\-preprocessor macro. When built using SQLITE\_OMIT\_AUTOINIT, SQLite
>  will not automatically initialize itself and the application is required
>  to invoke [sqlite3\_initialize()](c3ref/initialize.html) directly prior to beginning use of the
>  SQLite library.


**SQLITE\_OMIT\_AUTOMATIC\_INDEX**


> This option is used to omit the
>  [automatic indexing](optoverview.html#autoindex) functionality.
>  See also: [SQLITE\_DEFAULT\_AUTOMATIC\_INDEX](compile.html#default_automatic_index).


**SQLITE\_OMIT\_AUTORESET**


> By default, the [sqlite3\_step()](c3ref/step.html) interface will automatically invoke
>  [sqlite3\_reset()](c3ref/reset.html) to reset the [prepared statement](c3ref/stmt.html) if necessary. This
>  compile\-time option changes that behavior so that [sqlite3\_step()](c3ref/step.html) will
>  return [SQLITE\_MISUSE](rescode.html#misuse) if it called again after returning anything other
>  than [SQLITE\_ROW](rescode.html#row), [SQLITE\_BUSY](rescode.html#busy), or [SQLITE\_LOCKED](rescode.html#locked) unless there was an
>  intervening call to [sqlite3\_reset()](c3ref/reset.html).
> 
> 
>  In SQLite [version 3\.6\.23\.1](releaselog/3_6_23_1.html) (2010\-03\-26\)
>  and earlier, [sqlite3\_step()](c3ref/step.html) used to always
>  return [SQLITE\_MISUSE](rescode.html#misuse) if it was invoked again after returning anything
>  other than [SQLITE\_ROW](rescode.html#row) without an intervening call to [sqlite3\_reset()](c3ref/reset.html).
>  This caused problems on some poorly written smartphone applications which
>  did not correctly handle the [SQLITE\_LOCKED](rescode.html#locked) and [SQLITE\_BUSY](rescode.html#busy) error
>  returns. Rather than fix the many defective smartphone applications,
>  the behavior of SQLite was changed in 3\.6\.23\.2 to automatically reset
>  the prepared statement. But that changed caused issues in other
>  improperly implemented applications that were actually looking
>  for an [SQLITE\_MISUSE](rescode.html#misuse) return to terminate their query loops. (Anytime
>  an application gets an SQLITE\_MISUSE error code from SQLite, that means the
>  application is misusing the SQLite interface and is thus incorrectly
>  implemented.) The SQLITE\_OMIT\_AUTORESET interface was added to SQLite
>  [version 3\.7\.5](releaselog/3_7_5.html) (2011\-02\-01\) in an effort to get all of the (broken)
>  applications to work again without having to actually fix the applications.


**SQLITE\_OMIT\_AUTOVACUUM**


> If this option is defined, the library cannot create or write to
>  databases that support [auto\_vacuum](pragma.html#pragma_auto_vacuum).
>  Executing a [PRAGMA auto\_vacuum](pragma.html#pragma_auto_vacuum) statement is not an error
>  (since unknown PRAGMAs are silently ignored), but does not return a value
>  or modify the auto\-vacuum flag in the database file. If a database that
>  supports auto\-vacuum is opened by a library compiled with this option, it
>  is automatically opened in read\-only mode.


**SQLITE\_OMIT\_BETWEEN\_OPTIMIZATION**


> This option disables the use of indices with WHERE clause terms
>  that employ the BETWEEN operator.


**SQLITE\_OMIT\_BLOB\_LITERAL**


> When this option is defined, it is not possible to specify a blob in
>  an SQL statement using the X'ABCD' syntax.


**SQLITE\_OMIT\_BTREECOUNT**


> This option is no longer used for anything. It is a no\-op.


**SQLITE\_OMIT\_BUILTIN\_TEST**


> This compile\-time option has been renamed to [SQLITE\_UNTESTABLE](compile.html#untestable).


**SQLITE\_OMIT\_CASE\_SENSITIVE\_LIKE\_PRAGMA**


> This compile\-time option disables the [PRAGMA case\_sensitive\_like](pragma.html#pragma_case_sensitive_like)
>  command.


**SQLITE\_OMIT\_CAST**


> This option causes SQLite to omit support for the CAST operator.


**SQLITE\_OMIT\_CHECK**


> This option causes SQLite to omit support for CHECK constraints.
>  The parser will still accept CHECK constraints in SQL statements,
>  they will just not be enforced.


**SQLITE\_OMIT\_COMPILEOPTION\_DIAGS**


> This option is used to omit the compile\-time option diagnostics available
>  in SQLite, including the [sqlite3\_compileoption\_used()](c3ref/compileoption_get.html) and
>  [sqlite3\_compileoption\_get()](c3ref/compileoption_get.html) C/C\+\+ functions, the
>  [sqlite\_compileoption\_used()](lang_corefunc.html#sqlite_compileoption_used) and [sqlite\_compileoption\_get()](lang_corefunc.html#sqlite_compileoption_get) SQL functions,
>  and the [compile\_options pragma](pragma.html#pragma_compile_options).


**SQLITE\_OMIT\_COMPLETE**


> This option causes the [sqlite3\_complete()](c3ref/complete.html) and [sqlite3\_complete16()](c3ref/complete.html)
>  interfaces to be omitted.


**SQLITE\_OMIT\_COMPOUND\_SELECT**


> This option is used to omit the compound [SELECT](lang_select.html) functionality.
>  [SELECT](lang_select.html) statements that use the
>  UNION, UNION ALL, INTERSECT or EXCEPT compound SELECT operators will
>  cause a parse error.
> 
> 
>  An [INSERT](lang_insert.html) statement with multiple values in the VALUES clause is
>  implemented internally as a compound SELECT. Hence, this option also
>  disables the ability to insert more than a single row using an
>  INSERT INTO ... VALUES ... statement.


**SQLITE\_OMIT\_CTE**


> This option causes support for [common table expressions](lang_with.html) to be omitted.


**SQLITE\_OMIT\_DATETIME\_FUNCS**


> If this option is defined, SQLite's built\-in date and time manipulation
>  functions are omitted. Specifically, the SQL functions julianday(), date(),
>  time(), datetime() and strftime() are not available. The default column
>  values CURRENT\_TIME, CURRENT\_DATE and CURRENT\_TIMESTAMP are still available.


**SQLITE\_OMIT\_DECLTYPE**


> This option causes SQLite to omit support for the
>  [sqlite3\_column\_decltype()](c3ref/column_decltype.html) and [sqlite3\_column\_decltype16()](c3ref/column_decltype.html)
>  interfaces.


**SQLITE\_OMIT\_DEPRECATED**


> This option causes SQLite to omit support for interfaces
>  marked as deprecated. This includes
>  [sqlite3\_aggregate\_count()](c3ref/aggregate_count.html),
>  [sqlite3\_expired()](c3ref/aggregate_count.html),
>  [sqlite3\_transfer\_bindings()](c3ref/aggregate_count.html),
>  [sqlite3\_global\_recover()](c3ref/aggregate_count.html),
>  [sqlite3\_thread\_cleanup()](c3ref/aggregate_count.html) and
>  [sqlite3\_memory\_alarm()](c3ref/aggregate_count.html) interfaces and
>  [PRAGMA](pragma.html#syntax) statements [PRAGMA count\_changes](pragma.html#pragma_count_changes),
>  [PRAGMA data\_store\_directory](pragma.html#pragma_data_store_directory),
>  [PRAGMA default\_cache\_size](pragma.html#pragma_default_cache_size),
>  [PRAGMA empty\_result\_callbacks](pragma.html#pragma_empty_result_callbacks),
>  [PRAGMA full\_column\_names](pragma.html#pragma_full_column_names),
>  [PRAGMA short\_column\_names](pragma.html#pragma_short_column_names), and
>  [PRAGMA temp\_store\_directory](pragma.html#pragma_temp_store_directory).


**SQLITE\_OMIT\_DESERIALIZE**


> This option causes the
>  [sqlite3\_serialize()](c3ref/serialize.html) and [sqlite3\_deserialize()](c3ref/deserialize.html)
>  interfaces to be omitted from the build.


**SQLITE\_OMIT\_DISKIO**


> This option omits all support for writing to the disk and forces
>  databases to exist in memory only. This option has not been
>  maintained and probably does not work with newer versions of SQLite.


**SQLITE\_OMIT\_EXPLAIN**


> Defining this option causes the [EXPLAIN](lang_explain.html) command to be omitted from the
>  library. Attempting to execute an [EXPLAIN](lang_explain.html) statement will cause a parse
>  error.


**SQLITE\_OMIT\_FLAG\_PRAGMAS**


> This option omits support for a subset of [PRAGMA](pragma.html#syntax) commands that
>  query and set boolean properties.


**SQLITE\_OMIT\_FLOATING\_POINT**


> This option is used to omit floating\-point number support from the SQLite
>  library. When specified, specifying a floating point number as a literal
>  (i.e. "1\.01") results in a parse error.
> 
> 
>  In the future, this option may also disable other floating point
>  functionality, for example the [sqlite3\_result\_double()](c3ref/result_blob.html),
>  [sqlite3\_bind\_double()](c3ref/bind_blob.html), [sqlite3\_value\_double()](c3ref/value_blob.html) and
>  [sqlite3\_column\_double()](c3ref/column_blob.html) API functions.


**SQLITE\_OMIT\_FOREIGN\_KEY**


> If this option is defined, then [foreign key constraint](foreignkeys.html) syntax is
>  not recognized.


**SQLITE\_OMIT\_GENERATED\_COLUMNS**


> If this option is defined, then [generated column](gencol.html) syntax is
>  not recognized.


**SQLITE\_OMIT\_GET\_TABLE**


> This option causes support for [sqlite3\_get\_table()](c3ref/free_table.html) and
>  [sqlite3\_free\_table()](c3ref/free_table.html) to be omitted.


**SQLITE\_OMIT\_HEX\_INTEGER**


> This option omits support for [hexadecimal integer literals](lang_expr.html#hexint).


**SQLITE\_OMIT\_INCRBLOB**


> This option causes support for [incremental BLOB I/O](c3ref/blob.html)
>  to be omitted.


**SQLITE\_OMIT\_INTEGRITY\_CHECK**


> This option omits support for the [integrity\_check pragma](pragma.html#pragma_integrity_check).


**SQLITE\_OMIT\_INTROSPECTION\_PRAGMAS**


> This option omits support for
>  [PRAGMA function\_list](pragma.html#pragma_function_list), [PRAGMA module\_list](pragma.html#pragma_module_list), and
>  [PRAGMA pragma\_list](pragma.html#pragma_pragma_list).


**SQLITE\_OMIT\_JSON**


> This option omits the [JSON SQL functions](json1.html) from the build.


**SQLITE\_OMIT\_LIKE\_OPTIMIZATION**


> This option disables the ability of SQLite to use indices to help
>  resolve [LIKE](lang_expr.html#like) and [GLOB](lang_expr.html#glob) operators in a WHERE clause.


**SQLITE\_OMIT\_LOAD\_EXTENSION**


> This option omits the entire extension loading mechanism from
>  SQLite, including [sqlite3\_enable\_load\_extension()](c3ref/enable_load_extension.html) and
>  [sqlite3\_load\_extension()](c3ref/load_extension.html) interfaces.


**SQLITE\_OMIT\_LOCALTIME**


> This option omits the "localtime" modifier from the date and time
>  functions. This option is sometimes useful when trying to compile
>  the date and time functions on a platform that does not support the
>  concept of local time.


**SQLITE\_OMIT\_LOOKASIDE**


> This option omits the [lookaside memory allocator](malloc.html#lookaside).


**SQLITE\_OMIT\_MEMORYDB**


> When this is defined, the library does not respect the special database
>  name ":memory:" (normally used to create an [in\-memory database](inmemorydb.html)). If
>  ":memory:" is passed to [sqlite3\_open()](c3ref/open.html), [sqlite3\_open16()](c3ref/open.html), or
>  [sqlite3\_open\_v2()](c3ref/open.html), a file with this name will be
>  opened or created.


**SQLITE\_OMIT\_OR\_OPTIMIZATION**


> This option disables the ability of SQLite to use an index together
>  with terms of a WHERE clause connected by the OR operator.


**SQLITE\_OMIT\_PAGER\_PRAGMAS**


> Defining this option omits pragmas related to the pager subsystem from
>  the build.


**SQLITE\_OMIT\_PRAGMA**


> This option is used to omit the [PRAGMA](pragma.html#syntax) command
>  from the library. Note that it is useful to define the macros that omit
>  specific pragmas in addition to this, as they may also remove supporting code
>  in other sub\-systems. This macro removes the [PRAGMA](pragma.html#syntax) command only.


**SQLITE\_OMIT\_PROGRESS\_CALLBACK**


> This option may be defined to omit the capability to issue "progress"
>  callbacks during long\-running SQL statements. The
>  [sqlite3\_progress\_handler()](c3ref/progress_handler.html)
>  API function is not present in the library.


**SQLITE\_OMIT\_QUICKBALANCE**


> This option omits an alternative, faster B\-Tree balancing routine.
>  Using this option makes SQLite slightly smaller at the expense of
>  making it run slightly slower.


**SQLITE\_OMIT\_REINDEX**


> When this option is defined, the [REINDEX](lang_reindex.html)
>  command is not included in the library.
>  Executing a [REINDEX](lang_reindex.html) statement causes
>  a parse error.


**SQLITE\_OMIT\_SCHEMA\_PRAGMAS**


> Defining this option omits pragmas for querying the database schema from
>  the build.


**SQLITE\_OMIT\_SCHEMA\_VERSION\_PRAGMAS**


> Defining this option omits pragmas for querying and modifying the
>  database schema version and user version from the build. Specifically, the
>  [schema\_version](pragma.html#pragma_schema_version) and [user\_version](pragma.html#pragma_user_version) PRAGMAs are omitted.


**SQLITE\_OMIT\_SHARED\_CACHE**


> This option builds SQLite without support for [shared cache mode](sharedcache.html).
>  The [sqlite3\_enable\_shared\_cache()](c3ref/enable_shared_cache.html) is omitted along with a fair
>  amount of logic within the B\-Tree subsystem associated with shared
>  cache management.
> 
> 
>  This compile\-time option is recommended most applications as it
>  results in improved performance and reduced library footprint.


**SQLITE\_OMIT\_SUBQUERY**


> If defined, support for sub\-selects and the IN() operator are omitted.


**SQLITE\_OMIT\_TCL\_VARIABLE**


> If this macro is defined, then the special "$" syntax
>  used to automatically bind SQL variables to TCL variables is omitted.


**SQLITE\_OMIT\_TEMPDB**


> This option omits support for TEMP or TEMPORARY tables.


**SQLITE\_OMIT\_TRACE**


> This option omits support for the [sqlite3\_profile()](c3ref/profile.html) and
>  [sqlite3\_trace()](c3ref/profile.html) interfaces and their associated logic.


**SQLITE\_OMIT\_TRIGGER**


> Defining this option omits support for TRIGGER objects. Neither the
>  [CREATE TRIGGER](lang_createtrigger.html) or [DROP TRIGGER](lang_droptrigger.html)
>  commands are available in this case, and attempting to execute
>  either will result in a parse error.
>  This option also disables enforcement of [foreign key constraints](foreignkeys.html),
>  since the code that implements triggers and which is omitted by this
>  option is also used to implement [foreign key actions](foreignkeys.html#fk_actions).


**SQLITE\_OMIT\_TRUNCATE\_OPTIMIZATION**


> A default build of SQLite, if a [DELETE](lang_delete.html) statement has no WHERE clause
>  and operates on a table with no triggers, an optimization occurs that
>  causes the DELETE to occur by dropping and recreating the table.
>  Dropping and recreating a table is usually much faster than deleting
>  the table content row by row. This is the "truncate optimization".


**SQLITE\_OMIT\_UTF16**


> This macro is used to omit support for UTF16 text encoding. When this is
>  defined all API functions that return or accept UTF16 encoded text are
>  unavailable. These functions can be identified by the fact that they end
>  with '16', for example [sqlite3\_prepare16()](c3ref/prepare.html), [sqlite3\_column\_text16()](c3ref/column_blob.html) and
>  [sqlite3\_bind\_text16()](c3ref/bind_blob.html).


**SQLITE\_OMIT\_VACUUM**


> When this option is defined, the [VACUUM](lang_vacuum.html)
>  command is not included in the library.
>  Executing a [VACUUM](lang_vacuum.html) statement causes
>  a parse error.


**SQLITE\_OMIT\_VIEW**


> Defining this option omits support for VIEW objects. Neither the
>  [CREATE VIEW](lang_createview.html) nor the [DROP VIEW](lang_dropview.html)
>  commands are available in this case, and
>  attempting to execute either will result in a parse error.
> 
> 
>  WARNING: If this macro is defined, it will not be possible to open a database
>  for which the schema contains VIEW objects.


**SQLITE\_OMIT\_VIRTUALTABLE**


> This option omits support for the [Virtual Table](c3ref/vtab.html)
>  mechanism in SQLite.


**SQLITE\_OMIT\_WAL**


> This option omits the "[write\-ahead log](wal.html)" (a.k.a. "[WAL](wal.html)") capability.


**SQLITE\_OMIT\_WINDOWFUNC**


> This option omits [window functions](windowfunctions.html) from the build.


**SQLITE\_OMIT\_WSD**


> This option builds a version of the SQLite library that contains no
>  Writable Static Data (WSD). WSD is global variables and/or static
>  variables. Some platforms do not support WSD, and this option is necessary
>  in order for SQLite to work those platforms.
> 
> 
>  Unlike other OMIT options which make the SQLite library smaller,
>  this option actually increases the size of SQLite and makes it run
>  a little slower. Only use this option if SQLite is being built for an
>  embedded target that does not support WSD.


**SQLITE\_OMIT\_XFER\_OPT**


> This option omits support for optimizations that help statements
>  of the form "INSERT INTO ... SELECT ..." run faster.


**SQLITE\_UNTESTABLE**


> A standard SQLite build includes a small amount of logic associated
>  with [sqlite3\_test\_control()](c3ref/test_control.html) to exercise
>  parts of the SQLite core that are otherwise difficult to validate.
>  This compile\-time option omits that extra testing logic. This
>  compile\-time option was called "SQLITE\_OMIT\_BUILTIN\_TEST" prior
>  to SQLite version 3\.16\.0 (2017\-01\-02\). The name was changed
>  to better describe the implications of using it.
>  
>  Setting this compile\-time option prevents SQLite from being fully
>  testable. Branch test coverage drops from 100% down to about 95%.
>  
>  SQLite developers follow the NASA principle of
>  "fly what you test and test what you fly". This principle is violated
>  if this option is enabled for delivery but disabled for testing.
>  But if this option is enabled during testing, not all branches are
>  reachable. Therefore, the use of this compile\-time option is discouraged.


**SQLITE\_ZERO\_MALLOC**


> This option omits both the [default memory allocator](malloc.html#defaultalloc) and the
>  [debugging memory allocator](malloc.html#memdebug) from the build and substitutes a stub
>  memory allocator that always fails. SQLite will not run with this
>  stub memory allocator since it will be unable to allocate memory. But
>  this stub can be replaced at start\-time using
>  [sqlite3\_config](c3ref/config.html)([SQLITE\_CONFIG\_MALLOC](c3ref/c_config_covering_index_scan.html#sqliteconfigmalloc),...) or
>  [sqlite3\_config](c3ref/config.html)([SQLITE\_CONFIG\_HEAP](c3ref/c_config_covering_index_scan.html#sqliteconfigheap),...).
>  So the net effect of this compile\-time option is that it allows SQLite
>  to be compiled and linked against a system library that does not support
>  malloc(), free(), and/or realloc().





