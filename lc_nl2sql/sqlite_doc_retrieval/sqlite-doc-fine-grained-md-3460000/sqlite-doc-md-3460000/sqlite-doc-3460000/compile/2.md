# 2\. Recommended Compile\-time Options


The following compile\-time options are recommended for applications that
are able to use them, in order to minimized the number of CPU cycles and
the bytes of memory used by SQLite.
Not all of these compile\-time options are usable by every application.
For example, the SQLITE\_THREADSAFE\=0 option is only usable by applications
that never access SQLite from more than one thread at a time. And the
SQLITE\_OMIT\_PROGRESS\_CALLBACK option is only usable by applications that
do not use the [sqlite3\_progress\_handler()](c3ref/progress_handler.html) interface. And so forth.



It is impossible to test every possible combination of compile\-time
options for SQLite. But the following set of compile\-time options is
one configuration that is always fully tested.



1. **[SQLITE\_DQS\=0](compile.html#dqs)**.
This setting disables the [double\-quoted string literal](quirks.html#dblquote) misfeature.
2. **[SQLITE\_THREADSAFE\=0](compile.html#threadsafe)**.
Setting \-DSQLITE\_THREADSAFE\=0 causes all of the mutex and thread\-safety logic
in SQLite to be omitted. This is the single compile\-time option causes SQLite
to run about 2% faster and also reduces the size of the library by about 2%.
But the downside is that using the compile\-time option means that SQLite can never
be used by more than a single thread at a time, even if each thread has its own
database connection.
3. **[SQLITE\_DEFAULT\_MEMSTATUS\=0](compile.html#default_memstatus)**.
This setting causes the [sqlite3\_status()](c3ref/status.html) interfaces that track memory usage
to be disabled. This helps the [sqlite3\_malloc()](c3ref/free.html) routines run much faster,
and since SQLite uses [sqlite3\_malloc()](c3ref/free.html) internally, this helps to make the
entire library faster.
4. **[SQLITE\_DEFAULT\_WAL\_SYNCHRONOUS\=1](compile.html#default_wal_synchronous)**.
For maximum database safety following a power loss, the setting of
[PRAGMA synchronous\=FULL](pragma.html#pragma_synchronous) is recommended. However, in [WAL mode](wal.html), complete
database integrity is guaranteed with [PRAGMA synchronous\=NORMAL](pragma.html#pragma_synchronous). With
[PRAGMA synchronous\=NORMAL](pragma.html#pragma_synchronous) in [WAL mode](wal.html), recent changes to the database might
be rolled back by a power loss, but the database will not be corrupted.
Furthermore, transaction commit is much faster in WAL mode using
synchronous\=NORMAL than with the default synchronous\=FULL. For these
reasons, it is recommended that the synchronous setting be changed from
FULL to NORMAL when switching to WAL mode. This compile\-time option will
accomplish that.
5. **[SQLITE\_LIKE\_DOESNT\_MATCH\_BLOBS](compile.html#like_doesnt_match_blobs)**.
Historically, SQLite has allowed BLOB operands to the [LIKE](lang_expr.html#like) and [GLOB](lang_expr.html#glob)
operators. But having a BLOB as an operand of [LIKE](lang_expr.html#like) or [GLOB](lang_expr.html#glob) complicates
and slows the [LIKE optimization](optoverview.html#like_opt). When this option is set, it means that
the LIKE and GLOB operators always return FALSE if either operand is a BLOB.
That simplifies the implementation of the [LIKE optimization](optoverview.html#like_opt) and allows
queries that use the [LIKE optimization](optoverview.html#like_opt) to run faster.
6. **[SQLITE\_MAX\_EXPR\_DEPTH\=0](limits.html#max_expr_depth)**.
Setting the maximum expression parse\-tree depth to zero disables all checking
of the expression parse\-tree depth, which simplifies the code resulting in
faster execution, and helps the parse tree to use less memory.
7. **[SQLITE\_OMIT\_DECLTYPE](compile.html#omit_decltype)**.
By omitting the (seldom\-needed) ability to return the declared type of
columns from the result set of query, [prepared statements](c3ref/stmt.html) can be made
to consume less memory.
8. **[SQLITE\_OMIT\_DEPRECATED](compile.html#omit_deprecated)**.
Omitting deprecated interfaces and features will not help SQLite to
run any faster. It will reduce the library footprint, however. And
it is the right thing to do.
9. **[SQLITE\_OMIT\_PROGRESS\_CALLBACK](compile.html#omit_progress_callback)**.
The progress handler callback counter must be checked in the inner loop
of the [bytecode engine](opcode.html). By omitting this interface, a single conditional
is removed from the inner loop of the [bytecode engine](opcode.html), helping SQL statements
to run slightly faster.
10. **[SQLITE\_OMIT\_SHARED\_CACHE](compile.html#omit_shared_cache)**.
Omitting the possibility of using [shared cache](sharedcache.html) allows many conditionals
in performance\-critical sections of the code to be eliminated. This can
give a noticeable improvement in performance.
11. **[SQLITE\_USE\_ALLOCA](compile.html#use_alloca)**.
Make use of alloca() for dynamically allocating temporary stack space for
use within a single function, on systems that support alloca(). Without
this option, temporary space is allocated from the heap.
12. **[SQLITE\_OMIT\_AUTOINIT](compile.html#omit_autoinit)**.
The SQLite library needs to be initialized using a call to
[sqlite3\_initialize()](c3ref/initialize.html) before certain interfaces are used.
This initialization normally happens automatically the first time
it is needed. However, with the SQLITE\_OMIT\_AUTOINIT option, the automatic
initialization is omitted. This helps many API calls to run a little faster
(since they do not have to check to see if initialization has already occurred
and then run initialization if it has not previously been invoked) but it
also means that the application must call [sqlite3\_initialize()](c3ref/initialize.html) manually.
If SQLite is compiled with \-DSQLITE\_OMIT\_AUTOINIT and a routine like
[sqlite3\_malloc()](c3ref/free.html) or [sqlite3\_vfs\_find()](c3ref/vfs_find.html) or [sqlite3\_open()](c3ref/open.html) is invoked
without first calling [sqlite3\_initialize()](c3ref/initialize.html), the likely result will be
a segfault.
13. **[SQLITE\_STRICT\_SUBTYPE\=1](compile.html#strict_subtype)**.
This option causes an error to be raised if an application defined
function that does not have the [SQLITE\_RESULT\_SUBTYPE](c3ref/c_deterministic.html#sqliteresultsubtype) property
invokes the [sqlite3\_result\_subtype()](c3ref/result_subtype.html) interface. The sqlite3\_result\_subtype()
interface does not work reliably unless the function is registered
with the SQLITE\_RESULT\_SUBTYPE property. This compile\-time option
is designed to bring this problem to the attention of developers
early.


When all of the recommended compile\-time options above are used,
the SQLite library will be approximately 3% smaller and use about 5% fewer
CPU cycles. So these options do not make a huge difference. But in
some design situations, every little bit helps.



Library\-level configuration options, such as those listed above,
may optionally be defined in a client\-side header file. Defining
SQLITE\_CUSTOM\_INCLUDE\=myconfig.h (with no quotes) will cause sqlite3\.c
to include myconfig.h early on in the compilation process, enabling
the client to customize the flags without having to explicitly pass
all of them to the compiler.




