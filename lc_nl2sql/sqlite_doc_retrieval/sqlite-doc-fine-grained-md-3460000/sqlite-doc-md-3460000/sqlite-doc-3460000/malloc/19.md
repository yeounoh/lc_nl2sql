## 3\.5\.  Setting memory usage limits


The [sqlite3\_soft\_heap\_limit64()](c3ref/hard_heap_limit64.html) interface can be used to set an
upper bound on the total amount of outstanding memory that the
general\-purpose memory allocator for SQLite will allow to be outstanding
at one time. If attempts are made to allocate more memory than specified
by the soft heap limit, then SQLite will first attempt to free cache
memory before continuing with the allocation request. The soft heap
limit mechanism only works if [memory statistics](malloc.html#memstatus) are enabled and
it works best
if the SQLite library is compiled with the [SQLITE\_ENABLE\_MEMORY\_MANAGEMENT](compile.html#enable_memory_management)
compile\-time option.


The soft heap limit is "soft" in this sense: If SQLite is not able
to free up enough auxiliary memory to stay below the limit, it goes
ahead and allocates the extra memory and exceeds its limit. This occurs
under the theory that it is better to use additional memory than to fail
outright.


As of SQLite [version 3\.6\.1](releaselog/3_6_1.html) (2008\-08\-06\), 
the soft heap limit only applies to the
general\-purpose memory allocator. The soft heap limit does not know
about or interact with
the [pagecache memory allocator](malloc.html#pagecache) or the [lookaside memory allocator](malloc.html#lookaside).
This deficiency will likely be addressed in a future release.



