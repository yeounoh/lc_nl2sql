# 3\. Core Objects And Interfaces



 The principal task of an SQL database engine is to evaluate SQL statements
 of SQL. To accomplish this, the developer needs two objects:



* The [database connection](c3ref/sqlite3.html) object: sqlite3
* The [prepared statement](c3ref/stmt.html) object: sqlite3\_stmt



 Strictly speaking, the [prepared statement](c3ref/stmt.html) object is not required since
 the convenience wrapper interfaces, [sqlite3\_exec](c3ref/exec.html) or
 [sqlite3\_get\_table](c3ref/free_table.html), can be used and these convenience wrappers
 encapsulate and hide the [prepared statement](c3ref/stmt.html) object.
 Nevertheless, an understanding of
 [prepared statements](c3ref/stmt.html) is needed to make full use of SQLite.




 The [database connection](c3ref/sqlite3.html) and [prepared statement](c3ref/stmt.html) objects are controlled
 by a small set of C/C\+\+ interface routine listed below.



* [sqlite3\_open()](c3ref/open.html)
* [sqlite3\_prepare()](c3ref/prepare.html)
* [sqlite3\_step()](c3ref/step.html)
* [sqlite3\_column()](c3ref/column_blob.html)
* [sqlite3\_finalize()](c3ref/finalize.html)
* [sqlite3\_close()](c3ref/close.html)



 Note that the list of routines above is conceptual rather than actual.
 Many of these routines come in multiple versions.
 For example, the list above shows a single routine
 named [sqlite3\_open()](c3ref/open.html) when in fact there are three separate routines
 that accomplish the same thing in slightly different ways:
 [sqlite3\_open()](c3ref/open.html), [sqlite3\_open16()](c3ref/open.html) and [sqlite3\_open\_v2()](c3ref/open.html).
 The list mentions [sqlite3\_column()](c3ref/column_blob.html)
 when in fact no such routine exists.
 The "sqlite3\_column()" shown in the list is a placeholder for
 an entire family of routines that extract column
 data in various datatypes.




 Here is a summary of what the core interfaces do:



* **[sqlite3\_open()](c3ref/open.html)**



 This routine
 opens a connection to an SQLite database file and returns a
 [database connection](c3ref/sqlite3.html) object. This is often the first SQLite API
 call that an application makes and is a prerequisite for most other
 SQLite APIs. Many SQLite interfaces require a pointer to
 the [database connection](c3ref/sqlite3.html) object as their first parameter and can
 be thought of as methods on the [database connection](c3ref/sqlite3.html) object.
 This routine is the constructor for the [database connection](c3ref/sqlite3.html) object.
* **[sqlite3\_prepare()](c3ref/prepare.html)**



 This routine
 converts SQL text into a [prepared statement](c3ref/stmt.html) object and returns a pointer
 to that object. This interface requires a [database connection](c3ref/sqlite3.html) pointer
 created by a prior call to [sqlite3\_open()](c3ref/open.html) and a text string containing
 the SQL statement to be prepared. This API does not actually evaluate
 the SQL statement. It merely prepares the SQL statement for evaluation.

 

Think of each SQL statement as a small computer program. The purpose
 of [sqlite3\_prepare()](c3ref/prepare.html) is to compile that program into object code.
 The [prepared statement](c3ref/stmt.html) is the object code. The [sqlite3\_step()](c3ref/step.html) interface
 then runs the object code to get a result.

 

New applications should always invoke [sqlite3\_prepare\_v2()](c3ref/prepare.html) instead
 of [sqlite3\_prepare()](c3ref/prepare.html). The older [sqlite3\_prepare()](c3ref/prepare.html) is retained for
 backwards compatibility. But [sqlite3\_prepare\_v2()](c3ref/prepare.html) provides a much
 better interface.
* **[sqlite3\_step()](c3ref/step.html)**



 This routine is used to evaluate a [prepared statement](c3ref/stmt.html) that has been
 previously created by the [sqlite3\_prepare()](c3ref/prepare.html) interface. The statement
 is evaluated up to the point where the first row of results are available.
 To advance to the second row of results, invoke [sqlite3\_step()](c3ref/step.html) again.
 Continue invoking [sqlite3\_step()](c3ref/step.html) until the statement is complete.
 Statements that do not return results (ex: INSERT, UPDATE, or DELETE
 statements) run to completion on a single call to [sqlite3\_step()](c3ref/step.html).
* **[sqlite3\_column()](c3ref/column_blob.html)**



 This routine returns a single column from the current row of a result
 set for a [prepared statement](c3ref/stmt.html) that is being evaluated by [sqlite3\_step()](c3ref/step.html).
 Each time [sqlite3\_step()](c3ref/step.html) stops with a new result set row, this routine
 can be called multiple times to find the values of all columns in that row.

 

As noted above, there really is no such thing as a "sqlite3\_column()"
 function in the SQLite API. Instead, what we here call "sqlite3\_column()"
 is a place\-holder for an entire family of functions that return
 a value from the result set in various data types. There are also routines
 in this family that return the size of the result (if it is a string or
 BLOB) and the number of columns in the result set.

 


	+ [sqlite3\_column\_blob()](c3ref/column_blob.html)
	+ [sqlite3\_column\_bytes()](c3ref/column_blob.html)
	+ [sqlite3\_column\_bytes16()](c3ref/column_blob.html)
	+ [sqlite3\_column\_count()](c3ref/column_count.html)
	+ [sqlite3\_column\_double()](c3ref/column_blob.html)
	+ [sqlite3\_column\_int()](c3ref/column_blob.html)
	+ [sqlite3\_column\_int64()](c3ref/column_blob.html)
	+ [sqlite3\_column\_text()](c3ref/column_blob.html)
	+ [sqlite3\_column\_text16()](c3ref/column_blob.html)
	+ [sqlite3\_column\_type()](c3ref/column_blob.html)
	+ [sqlite3\_column\_value()](c3ref/column_blob.html)
* **[sqlite3\_finalize()](c3ref/finalize.html)**



 This routine destroys a [prepared statement](c3ref/stmt.html) created by a prior call
 to [sqlite3\_prepare()](c3ref/prepare.html). Every prepared statement must be destroyed using
 a call to this routine in order to avoid memory leaks.
* **[sqlite3\_close()](c3ref/close.html)**



 This routine closes a [database connection](c3ref/sqlite3.html) previously opened by a call
 to [sqlite3\_open()](c3ref/open.html). All [prepared statements](c3ref/stmt.html) associated with the
 connection should be [finalized](c3ref/finalize.html) prior to closing the
 connection.


