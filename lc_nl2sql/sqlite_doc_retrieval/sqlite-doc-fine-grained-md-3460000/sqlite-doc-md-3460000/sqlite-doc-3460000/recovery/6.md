## 3\.2\. How To Implement Recovery


These are the basic steps needed to recover content from a corrupt
Database:



1. Creates an sqlite3\_recover handle by calling either
sqlite3\_recover\_init() or sqlite3\_recover\_init\_sql().
Use sqlite3\_recover\_init() to store the recovered content
in a separate database and use sqlite3\_recover\_init\_sql()
to generate SQL text that will reconstruct the database.
2. Make zero or more calls to sqlite3\_recover\_config() to set
options on the new sqlite3\_recovery handle.
3. Invoke sqlite3\_recover\_step() repeatedly
until it returns something other than SQLITE\_OK. If it
returns SQLITE\_DONE, then the recovery operation completed without 
error. If it returns some other non\-SQLITE\_OK value, then an error 
has occurred. The sqlite3\_recover\_run() interface is also
available as a convenience wrapper that simply invokes
sqlite3\_recover\_step() repeatedly until it returns something other
than SQLITE\_DONE.
4. Retrieves any error code and English language error message using the
sqlite3\_recover\_errcode() and sqlite3\_recover\_errmsg() interfaces,
respectively.
5. Invoke sqlite3\_recover\_finish() to destroy the sqlite3\_recover object.



Details of the interface are described in comments in the
[sqlite3\_recover.h header file](https://sqlite.org/src/file/ext/recover/sqlite3recover.h).



