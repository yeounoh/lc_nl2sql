# Using the SQLite Online Backup API



 Historically, backups (copies) of SQLite databases have been created
 using the following method:

1. Establish a shared lock on the database file using the SQLite API (i.e.
 the shell tool).
 - Copy the database file using an external tool (for example the unix 'cp'
 utility or the DOS 'copy' command).
 - Relinquish the shared lock on the database file obtained in step 1\.



 This procedure works well in many scenarios and is usually very
 fast. However, this technique has the following shortcomings:

* Any database clients wishing to write to the database file while a
 backup is being created must wait until the shared lock is
 relinquished.

 * It cannot be used to copy data to or from in\-memory databases.

 * If a power failure or operating system failure occurs while copying
 the database file the backup database may be corrupted following
 system recovery.



 The [Online Backup API](c3ref/backup_finish.html#sqlite3backupinit) was created to 
 address these concerns. The online backup API allows the contents of
 one database to be copied into another database file, replacing any 
 original contents of the target database. The copy operation may be 
 done incrementally, in which case the source database does not need
 to be locked for the duration of the copy, only for the brief periods
 of time when it is actually being read from. This allows other database
 users to continue without excessive delays while a backup of an online
 database is made.

 The effect of completing the backup call sequence is to make the
 destination a bit\-wise identical copy of the source database as it
 was when the copying commenced. (The destination becomes a "snapshot.")


 The online backup API is [documented here](c3ref/backup_finish.html#sqlite3backupinit).
 The remainder of this page contains two C language examples illustrating 
 common uses of the API and discussions thereof. Reading these examples
 is no substitute for reading the API documentation!


 Update: The [VACUUM INTO](lang_vacuum.html#vacuuminto) command introduced in 
 SQLite version 3\.27\.0 (2019\-02\-07\) can serve as an
 alternative to the backup API.

