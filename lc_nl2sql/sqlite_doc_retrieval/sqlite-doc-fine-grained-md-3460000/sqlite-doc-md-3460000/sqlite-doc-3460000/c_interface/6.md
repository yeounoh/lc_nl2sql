#### 1\.4 Error Codes



The **sqlite\_exec** function normally returns SQLITE\_OK. But
if something goes wrong it can return a different value to indicate
the type of error. Here is a complete list of the return codes:




> ```
> 
> #define SQLITE_OK           0   /* Successful result */
> #define SQLITE_ERROR        1   /* SQL error or missing database */
> #define SQLITE_INTERNAL     2   /* An internal logic error in SQLite */
> #define SQLITE_PERM         3   /* Access permission denied */
> #define SQLITE_ABORT        4   /* Callback routine requested an abort */
> #define SQLITE_BUSY         5   /* The database file is locked */
> #define SQLITE_LOCKED       6   /* A table in the database is locked */
> #define SQLITE_NOMEM        7   /* A malloc() failed */
> #define SQLITE_READONLY     8   /* Attempt to write a readonly database */
> #define SQLITE_INTERRUPT    9   /* Operation terminated by sqlite_interrupt() */
> #define SQLITE_IOERR       10   /* Some kind of disk I/O error occurred */
> #define SQLITE_CORRUPT     11   /* The database disk image is malformed */
> #define SQLITE_NOTFOUND    12   /* (Internal Only) Table or record not found */
> #define SQLITE_FULL        13   /* Insertion failed because database is full */
> #define SQLITE_CANTOPEN    14   /* Unable to open the database file */
> #define SQLITE_PROTOCOL    15   /* Database lock protocol error */
> #define SQLITE_EMPTY       16   /* (Internal Only) Database table is empty */
> #define SQLITE_SCHEMA      17   /* The database schema changed */
> #define SQLITE_TOOBIG      18   /* Too much data for one row of a table */
> #define SQLITE_CONSTRAINT  19   /* Abort due to constraint violation */
> #define SQLITE_MISMATCH    20   /* Data type mismatch */
> #define SQLITE_MISUSE      21   /* Library used incorrectly */
> #define SQLITE_NOLFS       22   /* Uses OS features not supported on host */
> #define SQLITE_AUTH        23   /* Authorization denied */
> #define SQLITE_ROW         100  /* sqlite_step() has another row ready */
> #define SQLITE_DONE        101  /* sqlite_step() has finished executing */
> 
> ```



The meanings of these various return values are as follows:




> SQLITE\_OK
> This value is returned if everything worked and there were no errors.
> 
> 
> 
> SQLITE\_INTERNAL
> This value indicates that an internal consistency check within
> the SQLite library failed. This can only happen if there is a bug in
> the SQLite library. If you ever get an SQLITE\_INTERNAL reply from
> an **sqlite\_exec** call, please report the problem on the SQLite
> mailing list.
> 
> 
> 
> SQLITE\_ERROR
> This return value indicates that there was an error in the SQL
> that was passed into the **sqlite\_exec**.
> 
> 
> 
> SQLITE\_PERM
> This return value says that the access permissions on the database
> file are such that the file cannot be opened.
> 
> 
> 
> SQLITE\_ABORT
> This value is returned if the callback function returns non\-zero.
> 
> 
> 
> SQLITE\_BUSY
> This return code indicates that another program or thread has
> the database locked. SQLite allows two or more threads to read the
> database at the same time, but only one thread can have the database
> open for writing at the same time. Locking in SQLite is on the
> entire database.




SQLITE\_LOCKED
This return code is similar to SQLITE\_BUSY in that it indicates
that the database is locked. But the source of the lock is a recursive
call to **sqlite\_exec**. This return can only occur if you attempt
to invoke sqlite\_exec from within a callback routine of a query
from a prior invocation of sqlite\_exec. Recursive calls to
sqlite\_exec are allowed as long as they do
not attempt to write the same table.



SQLITE\_NOMEM
This value is returned if a call to **malloc** fails.



SQLITE\_READONLY
This return code indicates that an attempt was made to write to
a database file that is opened for reading only.



SQLITE\_INTERRUPT
This value is returned if a call to **sqlite\_interrupt**
interrupts a database operation in progress.



SQLITE\_IOERR
This value is returned if the operating system informs SQLite
that it is unable to perform some disk I/O operation. This could mean
that there is no more space left on the disk.



SQLITE\_CORRUPT
This value is returned if SQLite detects that the database it is
working on has become corrupted. Corruption might occur due to a rogue
process writing to the database file or it might happen due to a
previously undetected logic error in of SQLite. This value is also
returned if a disk I/O error occurs in such a way that SQLite is forced
to leave the database file in a corrupted state. The latter should only
happen due to a hardware or operating system malfunction.



SQLITE\_FULL
This value is returned if an insertion failed because there is
no space left on the disk, or the database is too big to hold any
more information. The latter case should only occur for databases
that are larger than 2GB in size.



SQLITE\_CANTOPEN
This value is returned if the database file could not be opened
for some reason.



SQLITE\_PROTOCOL
This value is returned if some other process is messing with
file locks and has violated the file locking protocol that SQLite uses
on its rollback journal files.



SQLITE\_SCHEMA
When the database first opened, SQLite reads the database schema
into memory and uses that schema to parse new SQL statements. If another
process changes the schema, the command currently being processed will
abort because the virtual machine code generated assumed the old
schema. This is the return code for such cases. Retrying the
command usually will clear the problem.



SQLITE\_TOOBIG
SQLite will not store more than about 1 megabyte of data in a single
row of a single table. If you attempt to store more than 1 megabyte
in a single row, this is the return code you get.



SQLITE\_CONSTRAINT
This constant is returned if the SQL statement would have violated
a database constraint.



SQLITE\_MISMATCH
This error occurs when there is an attempt to insert non\-integer
data into a column labeled INTEGER PRIMARY KEY. For most columns, SQLite
ignores the data type and allows any kind of data to be stored. But
an INTEGER PRIMARY KEY column is only allowed to store integer data.



SQLITE\_MISUSE
This error might occur if one or more of the SQLite API routines
is used incorrectly. Examples of incorrect usage include calling
**sqlite\_exec** after the database has been closed using
**sqlite\_close** or 
calling **sqlite\_exec** with the same
database pointer simultaneously from two separate threads.



SQLITE\_NOLFS
This error means that you have attempts to create or access a file
database file that is larger that 2GB on a legacy Unix machine that
lacks large file support.



SQLITE\_AUTH
This error indicates that the authorizer callback
has disallowed the SQL you are attempting to execute.



SQLITE\_ROW
This is one of the return codes from the
**sqlite\_step** routine which is part of the non\-callback API.
It indicates that another row of result data is available.



SQLITE\_DONE
This is one of the return codes from the
**sqlite\_step** routine which is part of the non\-callback API.
It indicates that the SQL statement has been completely executed and
the **sqlite\_finalize** routine is ready to be called.





