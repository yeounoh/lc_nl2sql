#### 1\.3 Executing SQL statements


The **sqlite\_exec** function is used to process SQL statements
and queries. This function requires 5 parameters as follows:


1. A pointer to the sqlite structure obtained from a prior call
 to **sqlite\_open**.
2. A zero\-terminated string containing the text of one or more
 SQL statements and/or queries to be processed.
3. A pointer to a callback function which is invoked once for each
 row in the result of a query. This argument may be NULL, in which
 case no callbacks will ever be invoked.
4. A pointer that is forwarded to become the first argument
 to the callback function.
5. A pointer to an error string. Error messages are written to space
 obtained from malloc() and the error string is made to point to
 the malloced space. The calling function is responsible for freeing
 this space when it has finished with it.
 This argument may be NULL, in which case error messages are not
 reported back to the calling function.



The callback function is used to receive the results of a query. A
prototype for the callback function is as follows:



> ```
> 
> int Callback(void *pArg, int argc, char **argv, char **columnNames){
>   return 0;
> }
> 
> ```



The first argument to the callback is just a copy of the fourth argument
to **sqlite\_exec** This parameter can be used to pass arbitrary
information through to the callback function from client code.
The second argument is the number of columns in the query result.
The third argument is an array of pointers to strings where each string
is a single column of the result for that record. Note that the
callback function reports a NULL value in the database as a NULL pointer,
which is very different from an empty string. If the i\-th parameter
is an empty string, we will get:



> ```
> 
> argv[i][0] == 0
> 
> ```


But if the i\-th parameter is NULL we will get:



> ```
> 
> argv[i] == 0
> 
> ```


The names of the columns are contained in first *argc*
entries of the fourth argument.
If the [SHOW\_DATATYPES](pragma.html) pragma
is on (it is off by default) then
the second *argc* entries in the 4th argument are the datatypes
for the corresponding columns.



If the [EMPTY\_RESULT\_CALLBACKS](pragma.html#pragma_empty_result_callbacks) pragma is set to ON and the result of
a query is an empty set, then the callback is invoked once with the
third parameter (argv) set to 0\. In other words

> ```
> 
> argv == 0
> 
> ```


The second parameter (argc)
and the fourth parameter (columnNames) are still valid
and can be used to determine the number and names of the result
columns if there had been a result.
The default behavior is not to invoke the callback at all if the
result set is empty.



The callback function should normally return 0\. If the callback
function returns non\-zero, the query is immediately aborted and 
**sqlite\_exec** will return SQLITE\_ABORT.


