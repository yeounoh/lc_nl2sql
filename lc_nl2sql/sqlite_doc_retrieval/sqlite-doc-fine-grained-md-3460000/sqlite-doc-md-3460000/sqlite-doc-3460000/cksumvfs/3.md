# 3\. Loading


To load this extension as a shared library, you first have to
bring up a dummy SQLite database connection to use as the argument
to the [sqlite3\_load\_extension()](c3ref/load_extension.html) API call. Then you invoke the
[sqlite3\_load\_extension()](c3ref/load_extension.html) API and shutdown the dummy database
connection. All subsequent database connections that are opened
will include this extension. For example:




```
sqlite3 *db;
sqlite3_open(":memory:", &db);
sqlite3_load_extension(db, "./cksumvfs");
sqlite3_close(db);

```

If this extension is compiled with \-DSQLITE\_CKSUMVFS\_STATIC and
statically linked against the application, initialize it using
a single API call as follows:




```
sqlite3_cksumvfs_init();

```

Cksumvfs is a [VFS shim](vfs.html#shim). When loaded, "cksmvfs" becomes the new
default VFS, and it uses the prior default VFS as the next VFS
down in the stack. This is normally what you want. However, in
complex situations where multiple VFS shims are being loaded,
it might be important to ensure that cksumvfs is loaded in the
correct order so that it sequences itself into the default VFS
Shim stack in the right order.



