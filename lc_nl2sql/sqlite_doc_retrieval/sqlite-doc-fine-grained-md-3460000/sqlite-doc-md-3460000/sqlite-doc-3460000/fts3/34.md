## 8\.2\. Querying Tokenizers


The "fts3tokenize" virtual table can be used to directly access any
 tokenizer. The following SQL demonstrates how to create an instance
 of the fts3tokenize virtual table:




```
CREATE VIRTUAL TABLE tok1 USING fts3tokenize('porter');

```

The name of the desired tokenizer should be substituted in place of
 'porter' in the example, of course. If the tokenizer requires one or
 more arguments, they should be separated by commas in the fts3tokenize
 declaration (even though they are separated by spaces in declarations
 of regular fts4 tables). The following creates fts4 and fts3tokenize
 tables that use the same tokenizer:



```
CREATE VIRTUAL TABLE text1 USING fts4(tokenize=icu en_AU);
CREATE VIRTUAL TABLE tokens1 USING fts3tokenize(icu, en_AU);

CREATE VIRTUAL TABLE text2 USING fts4(tokenize=unicode61 "tokenchars=@." "separators=123");
CREATE VIRTUAL TABLE tokens2 USING fts3tokenize(unicode61, "tokenchars=@.", "separators=123");

```


 Once the virtual table is created, it can be queried as follows:




```
SELECT token, start, end, position
  FROM tok1
 WHERE input='This is a test sentence.';

```

The virtual table will return one row of output for each token in the
 input string. The "token" column is the text of the token. The "start"
 and "end" columns are the byte offset to the beginning and end of the
 token in the original input string.
 The "position" column is the sequence number
 of the token in the original input string. There is also an "input"
 column which is simply a copy of the input string that is specified in
 the WHERE clause. Note that a constraint of the form "input\=?" must
 appear in the WHERE clause or else the virtual table will have no input
 to tokenize and will return no rows. The example above generates
 the following output:




```
thi|0|4|0
is|5|7|1
a|8|9|2
test|10|14|3
sentenc|15|23|4

```

Notice that the tokens in the result set from the fts3tokenize virtual
 table have been transformed according to the rules of the tokenizer.
 Since this example used the "porter" tokenizer, the "This" token was
 converted into "thi". If the original text of the token is desired,
 it can be retrieved using the "start" and "end" columns with the
 [substr()](lang_corefunc.html#substr) function. For example:




```
SELECT substr(input, start+1, end-start), token, position
  FROM tok1
 WHERE input='This is a test sentence.';

```

The fts3tokenize virtual table can be used on any tokenizer, regardless
 of whether or not there exists an FTS3 or FTS4 table that actually uses
 that tokenizer.





