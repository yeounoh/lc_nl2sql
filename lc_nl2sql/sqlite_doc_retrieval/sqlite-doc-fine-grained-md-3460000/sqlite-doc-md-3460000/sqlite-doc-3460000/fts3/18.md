## 6\.1\. The compress\= and uncompress\= options



 The compress and uncompress options allow FTS4 content to be stored in
 the database in a compressed form. Both options should be set to the name
 of an SQL scalar function registered using [sqlite3\_create\_function()](c3ref/create_function.html)
 that accepts a single argument.




 The compress function should return a compressed version of the value
 passed to it as an argument. Each time data is written to the FTS4 table,
 each column value is passed to the compress function and the result value
 stored in the database. The compress function may return any type of SQLite
 value (blob, text, real, integer or null).




 The uncompress function should uncompress data previously compressed by
 the compress function. In other words, for all SQLite values X, it should
 be true that uncompress(compress(X)) equals X. When data that has been
 compressed by the compress function is read from the database by FTS4, it
 is passed to the uncompress function before it is used.




 If the specified compress or uncompress functions do not exist, the table
 may still be created. An error is not returned until the FTS4 table is
 read (if the uncompress function does not exist) or written (if it is the
 compress function that does not exist).




```
-- Create an FTS4 table that stores data in compressed form. This
-- assumes that the scalar functions zip() and unzip() have been (or
-- will be) added to the database handle.
CREATE VIRTUAL TABLE papers USING fts4(author, document, compress=zip, uncompress=unzip);

```


 When implementing the compress and uncompress functions it is important to
 pay attention to data types. Specifically, when a user reads a value from
 a compressed FTS table, the value returned by FTS is exactly the same
 as the value returned by the uncompress function, including the data type.
 If that data type is not the same as the data type of the original value as
 passed to the compress function (for example if the uncompress function is
 returning BLOB when compress was originally passed TEXT), then the users
 query may not function as expected.





