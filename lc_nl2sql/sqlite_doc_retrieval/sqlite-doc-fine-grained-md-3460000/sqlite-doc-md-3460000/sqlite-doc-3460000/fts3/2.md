# 1\. Introduction to FTS3 and FTS4



 The FTS3 and FTS4 extension modules allows users to create special tables with a
 built\-in full\-text index (hereafter "FTS tables"). The full\-text index
 allows the user to efficiently query the database for all rows that contain
 one or more words (hereafter "tokens"), even if the table
 contains many large documents.




 For example, if each of the 517430 documents in the
 "[Enron E\-Mail Dataset](http://www.cs.cmu.edu/~enron/)"
 is inserted into both an FTS table and an ordinary SQLite table
 created using the following SQL script:




```
CREATE VIRTUAL TABLE enrondata1 USING fts3(content TEXT);     /* FTS3 table */
CREATE TABLE enrondata2(content TEXT);                        /* Ordinary table */

```


 Then either of the two queries below may be executed to find the number of
 documents in the database that contain the word "linux" (351\). Using one
 desktop PC hardware configuration, the query on the FTS3 table returns in
 approximately 0\.03 seconds, versus 22\.5 for querying the ordinary table.




```
SELECT count(*) FROM enrondata1 WHERE content MATCH 'linux';  /* 0.03 seconds */
SELECT count(*) FROM enrondata2 WHERE content LIKE '%linux%'; /* 22.5 seconds */

```


 Of course, the two queries above are not entirely equivalent. For example
 the LIKE query matches rows that contain terms such as "linuxophobe"
 or "EnterpriseLinux" (as it happens, the Enron E\-Mail Dataset does not
 actually contain any such terms), whereas the MATCH query on the FTS3 table
 selects only those rows that contain "linux" as a discrete token. Both
 searches are case\-insensitive. The FTS3 table consumes around 2006 MB on
 disk compared to just 1453 MB for the ordinary table. Using the same
 hardware configuration used to perform the SELECT queries above, the FTS3
 table took just under 31 minutes to populate, versus 25 for the ordinary
 table.



