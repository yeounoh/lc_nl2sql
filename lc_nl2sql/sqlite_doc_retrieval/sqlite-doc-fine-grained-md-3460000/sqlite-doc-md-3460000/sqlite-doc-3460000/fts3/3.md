## 1\.1\. Differences between FTS3 and FTS4




 FTS3 and FTS4 are nearly identical. They share most of their code in common,
 and their interfaces are the same. The differences are:



* FTS4 contains query performance optimizations that may significantly
 improve the performance of full\-text queries that contain terms that are
 very common (present in a large percentage of table rows).
* FTS4 supports some additional options that may used with the [matchinfo()](fts3.html#matchinfo)
 function.
* Because it stores extra information on disk in two new
 [shadow tables](fts3.html#*shadowtab) in order to support the performance
 optimizations and extra matchinfo() options, FTS4 tables may consume more
 disk space than the equivalent table created using FTS3\. Usually the overhead
 is 1\-2% or less, but may be as high as 10% if the documents stored in the
 FTS table are very small. The overhead may be reduced by specifying the
 directive ["matchinfo\=fts3"](fts3.html#fts4matchinfo) as part of the FTS4 table
 declaration, but this comes at the expense of sacrificing some of the
 extra supported matchinfo() options.
* FTS4 provides hooks (the compress and uncompress
 [options](fts3.html#fts4_options)) allowing data to be stored in a compressed
 form, reducing disk usage and IO.



 FTS4 is an enhancement to FTS3\.
 FTS3 has been available since SQLite [version 3\.5\.0](releaselog/3_5_0.html) (2007\-09\-04\)
 The enhancements for FTS4 were added with SQLite [version 3\.7\.4](releaselog/3_7_4.html)
 (2010\-12\-07\).




 Which module, FTS3 or FTS4, should you use in your application? FTS4 is
 sometimes significantly faster than FTS3, even orders of magnitude faster
 depending on the query, though in the common case the performance of the two
 modules is similar. FTS4 also offers the enhanced [matchinfo()](fts3.html#matchinfo) outputs which
 can be useful in ranking the results of a [MATCH](fts3.html#full_text_index_queries) operation. On the
 other hand, in the absence of a [matchinfo\=fts3](fts3.html#fts4matchinfo) directive FTS4 requires a little
 more disk space than FTS3, though only a percent of two in most cases.




 For newer applications, FTS4 is recommended; though if compatibility with older
 versions of SQLite is important, then FTS3 will usually serve just as well.



