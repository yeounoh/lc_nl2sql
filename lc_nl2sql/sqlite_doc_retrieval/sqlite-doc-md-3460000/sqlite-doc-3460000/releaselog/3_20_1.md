




SQLite Release 3\.20\.1 On 2017\-08\-24




[![SQLite](../images/sqlite370_banner.gif)](../index.html)


Small. Fast. Reliable.  
Choose any three.


* [Home](../index.html)* [Menu](javascript:void(0))* [About](../about.html)* [Documentation](../docs.html)* [Download](../download.html)* [License](../copyright.html)* [Support](../support.html)* [Purchase](../prosupport.html)* [Search](javascript:void(0))




* [About](../about.html)* [Documentation](../docs.html)* [Download](../download.html)* [Support](../support.html)* [Purchase](../prosupport.html)






Search Documentation
Search Changelog







## SQLite Release 3\.20\.1 On 2017\-08\-24

**Prior changes from version 3\.20\.0 (2017\-08\-01\):**


1. Update the text of error messages returned by [sqlite3\_errmsg()](../c3ref/errcode.html) for some
 error codes.
- Add new [pointer passing interfaces](../bindptr.html).
- Backwards\-incompatible changes to some extensions in order to take
 advantage of the improved security offered by the new
 [pointer passing interfaces](../bindptr.html):
	1. [Extending FTS5](../fts5.html#extending_fts5) → requires [sqlite3\_bind\_pointer()](../c3ref/bind_blob.html) to find
	 the fts5\_api pointer.
	 - [carray(PTR,N)](../carray.html) → requires [sqlite3\_bind\_pointer()](../c3ref/bind_blob.html) to set the PTR parameter.
	 - [remember(V,PTR)](https://www.sqlite.org/src/file/ext/misc/remember.c)
	 → requires [sqlite3\_bind\_pointer()](../c3ref/bind_blob.html) to set the PTR parameter.- Added the [SQLITE\_STMT virtual table](../stmt.html) extension.
- Added the [COMPLETION extension](../completion.html) \- designed to suggest
 tab\-completions for interactive user interfaces. This is a work in progress.
 Expect further enhancements in future releases.
- Added the [UNION virtual table](../unionvtab.html) extension.
- The built\-in [date and time functions](../lang_datefunc.html) have been enhanced so that they can be
 used in [CHECK constraints](../lang_createtable.html#ckconst), in [indexes on expressions](../expridx.html), and in the WHERE clauses
 of [partial indexes](../partialindex.html), provided that they do not use the 'now', 'localtime', or
 'utc' keywords. [More information](../deterministic.html#dtexception).
- Added the [sqlite3\_prepare\_v3()](../c3ref/prepare.html) and [sqlite3\_prepare16\_v3()](../c3ref/prepare.html) interfaces
 with the extra "prepFlags" parameters.
- Provide the [SQLITE\_PREPARE\_PERSISTENT](../c3ref/c_prepare_normalize.html#sqlitepreparepersistent) flag for [sqlite3\_prepare\_v3()](../c3ref/prepare.html) and
 use it to limit [lookaside memory](../malloc.html#lookaside) misuse by [FTS3](../fts3.html), [FTS5](../fts5.html), and the
 [R\-Tree extension](../rtree.html).
- Added the [PRAGMA secure\_delete\=FAST](../pragma.html#pragma_secure_delete) command. When secure\_delete is
 set to FAST, old content is overwritten with zeros as long as that does
 not increase the amount of I/O. Deleted content might still persist on
 the [free\-page list](../fileformat2.html#freelist) but will be purged from all b\-tree pages.
- Enhancements to the [command\-line shell](../cli.html):
	1. Add support for tab\-completion using the [COMPLETION extension](../completion.html), for
	 both readline and linenoise.
	 - Add the ".cd" command.
	 - Enhance the "[.schema](../cli.html#dschema)" command to show the schema of all attached
	 databases.
	 - Enhance "[.tables](../cli.html#dtables)" so that it shows the schema names for all attached
	 if the name is anything other than "main".
	 - The "[.import](../cli.html#csv)" command ignores an initial UTF\-8 BOM.
	 - Added the "\-\-newlines" option to the "[.dump](../cli.html#dump)" command to cause U\+000a and
	 U\+000d characters to be output literally rather than escaped using the
	 [replace()](../lang_corefunc.html#replace) function.- Query planner enhancements:
	1. When generating individual loops for each ORed term of an OR scan,
	 move any constant WHERE expressions outside of the loop, as is
	 done for top\-level loops.
	 - The query planner examines the values of bound parameters to help
	 determine if a partial index is usable.
	 - When deciding between two plans with the same estimated cost, bias
	 the selection toward the one that does not use the sorter.
	 - Evaluate WHERE clause constraints involving correlated subqueries
	 last, in the hope that they never have be evaluated at all.
	 - Do not use the [flattening optimization](../optoverview.html#flattening) for a sub\-query on the RHS
	 of a LEFT JOIN if that subquery reads data from a [virtual table](../vtab.html) as
	 doing so prevents the query planner from creating [automatic indexes](../optoverview.html#autoindex)
	 on the results of the sub\-query, which can slow down the query.- Add [SQLITE\_STMTSTATUS\_REPREPARE](../c3ref/c_stmtstatus_counter.html#sqlitestmtstatusreprepare), [SQLITE\_STMTSTATUS\_RUN](../c3ref/c_stmtstatus_counter.html#sqlitestmtstatusrun),
 and [SQLITE\_STMTSTATUS\_MEMUSED](../c3ref/c_stmtstatus_counter.html#sqlitestmtstatusmemused) options for the
 [sqlite3\_stmt\_status()](../c3ref/stmt_status.html) interface.
- Provide [PRAGMA functions](../pragma.html#pragfunc) for
 [PRAGMA integrity\_check](../pragma.html#pragma_integrity_check), [PRAGMA quick\_check](../pragma.html#pragma_quick_check), and
 [PRAGMA foreign\_key\_check](../pragma.html#pragma_foreign_key_check).
- Add the \-withoutnulls option to the [TCL interface eval method](../tclsqlite.html#eval).
- Enhance the [sqlite3\_analyzer.exe](../sqlanalyze.html) utility program so that it shows
 the number of bytes of metadata on btree pages.
- The [SQLITE\_DBCONFIG\_ENABLE\_QPSG](../c3ref/c_dbconfig_defensive.html#sqlitedbconfigenableqpsg) run\-time option and the
 [SQLITE\_ENABLE\_QPSG](../compile.html#enable_qpsg) compile\-time option enable the
 [query planner stability guarantee](../queryplanner-ng.html#qpstab). See also ticket
 [892fc34f173e99d8](https://www.sqlite.org/src/info/892fc34f173e99d8)- Miscellaneous optimizations result in a 2% reduction in [CPU cycles used](../cpu.html).
**Bug Fixes:**
- Fix the behavior of [sqlite3\_column\_name()](../c3ref/column_name.html) for queries that use the
 [flattening optimization](../optoverview.html#flattening) so that the result is consistent with other
 queries that do not use that optimization, and with PostgreSQL, MySQL,
 and SQLServer. Ticket [de3403bf5ae](https://sqlite.org/src/info/de3403bf5ae).
- Fix the query planner so that it knows not to use [automatic indexes](../optoverview.html#autoindex)
 on the right table of LEFT JOIN if the WHERE clause uses the [IS operator](../lang_expr.html#isisnot).
 Fix for [ce68383bf6aba](https://sqlite.org/src/info/ce68383bf6aba).
- Ensure that the query planner knows that any column of a
 [flattened](../optoverview.html#flattening) LEFT JOIN can be NULL even
 if that column is labeled with "NOT NULL". Fix for ticket
 [892fc34f173e99d8](https://sqlite.org/src/info/892fc34f173e99d8).
- Fix rare false\-positives in [PRAGMA integrity\_check](../pragma.html#pragma_integrity_check) when run on a database connection
 with [attached databases](../lang_attach.html). Ticket
 [a4e06e75a9ab61a12](https://sqlite.org/src/info/a4e06e75a9ab61a12)- Fix a bug (discovered by OSSFuzz) that causes an assertion fault if certain
 dodgy CREATE TABLE declarations are used. Ticket
 [bc115541132dad136](https://sqlite.org/src/info/bc115541132dad136)


**Changes in this specific patch release, version 3\.20\.1 (2017\-08\-24\):**


1. Fix a potential memory leak in the new [sqlite3\_result\_pointer()](../c3ref/result_blob.html) interface.
 Ticket [7486aa54b968e9b5](https://sqlite.org/src/info/7486aa54b968e9b5).
**Hashes:**
- SQLITE\_SOURCE\_ID: "2017\-08\-24 16:21:36 8d3a7ea6c5690d6b7c3767558f4f01b511c55463e3f9e64506801fe9b74dce34"
- SHA3\-256 for sqlite3\.c: 93b1a6d69b48dc39697d1d3a1e4c30b55da0bdd2cad0c054462f91081832954a



A [complete list of SQLite releases](../changes.html)
 in a single page and a [chronology](../chronology.html) are both also available.
 A detailed history of every
 check\-in is available at
 [SQLite version control site](https://www.sqlite.org/src/timeline).




